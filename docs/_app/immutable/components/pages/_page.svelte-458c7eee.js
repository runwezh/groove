import{S as z,i as ee,s as U,k as O,e as Y,J as oi,l as N,h as T,n as y,D as S,C as V,K as de,b as H,a as q,q as $,m as G,c as j,r as W,o as si,L as Lt,u as at,M as Wn,N as Xn,O as Qn,P as be,p as Q,Q as Pt,R as Ue,T as ot,I as pe,U as ve,f as R,g as fe,t as L,d as me,V as li,W as st,x as ne,y as le,z as ie,A as re,X as ci,Y as bt,Z as ui,_ as Ze,$ as Ae,a0 as xe,a1 as Ee,a2 as di,a3 as fi,a4 as qt,a5 as mi,a6 as hi,v as _i,a7 as pi,a8 as gi,a9 as jt,aa as Vt,ab as lt,w as $t,ac as Ot}from"../../chunks/index-17702ef3.js";import{w as vi}from"../../chunks/wordmark-fc3f3709.js";import{d as yi,I as Wt}from"../../chunks/transform-f56d011b.js";import{w as Oe,r as ki}from"../../chunks/index-83a6e44c.js";function Xt(t,e,n){const r=t.slice();return r[5]=e[n],r}function Qt(t){let e,n;return{c(){e=O("link"),this.h()},l(r){e=N(r,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){y(e,"rel","preload"),y(e,"href",n=t[5]),y(e,"as","font"),y(e,"type","font/woff2"),y(e,"crossorigin","")},m(r,a){H(r,e,a)},p(r,a){a&16&&n!==(n=r[5])&&y(e,"href",n)},d(r){r&&T(e)}}}function bi(t){let e,n,r,a,s,l,f,u,d,_,i,o,c,m,p,g,h,v,k,b,A,I,w,F,E,D;document.title=e=t[0];let P=t[4],B=[];for(let x=0;x<P.length;x+=1)B[x]=Qt(Xt(t,P,x));return{c(){n=O("meta"),r=O("meta"),a=O("meta"),s=O("meta"),l=O("meta"),f=O("meta"),u=O("meta"),d=O("meta"),_=O("meta"),i=O("meta"),c=O("meta"),m=O("meta"),p=O("meta"),g=O("meta"),h=O("meta"),v=O("meta"),k=O("meta"),b=O("meta"),A=O("meta"),w=O("meta"),F=O("link");for(let x=0;x<B.length;x+=1)B[x].c();D=Y(),this.h()},l(x){const M=oi("svelte-1htu80s",document.head);n=N(M,"META",{name:!0,content:!0}),r=N(M,"META",{name:!0,content:!0}),a=N(M,"META",{name:!0,content:!0}),s=N(M,"META",{property:!0,content:!0}),l=N(M,"META",{property:!0,content:!0}),f=N(M,"META",{property:!0,content:!0}),u=N(M,"META",{property:!0,content:!0}),d=N(M,"META",{property:!0,content:!0}),_=N(M,"META",{property:!0,content:!0}),i=N(M,"META",{property:!0,content:!0}),c=N(M,"META",{property:!0,content:!0}),m=N(M,"META",{property:!0,content:!0}),p=N(M,"META",{property:!0,content:!0}),g=N(M,"META",{name:!0,content:!0}),h=N(M,"META",{name:!0,content:!0}),v=N(M,"META",{name:!0,content:!0}),k=N(M,"META",{name:!0,content:!0}),b=N(M,"META",{name:!0,content:!0}),A=N(M,"META",{name:!0,content:!0}),w=N(M,"META",{name:!0,content:!0}),F=N(M,"LINK",{rel:!0,href:!0});for(let C=0;C<B.length;C+=1)B[C].l(M);D=Y(),M.forEach(T),this.h()},h(){y(n,"name","description"),y(n,"content",t[1]),y(r,"name","author"),y(r,"content","The Pudding"),y(a,"name","news_keywords"),y(a,"content",t[3]),y(s,"property","og:title"),y(s,"content",t[0]),y(l,"property","og:site_name"),y(l,"content","The Pudding"),y(f,"property","og:url"),y(f,"content",t[2]),y(u,"property","og:description"),y(u,"content",t[1]),y(d,"property","og:type"),y(d,"content","article"),y(_,"property","og:locale"),y(_,"content","en_US"),y(i,"property","og:image"),y(i,"content",o=t[2]+"/assets/social-facebook.jpg"),y(c,"property","og:image:type"),y(c,"content","image/jpeg"),y(m,"property","og:image:width"),y(m,"content","1200"),y(p,"property","og:image:height"),y(p,"content","600"),y(g,"name","twitter:card"),y(g,"content","summary_large_image"),y(h,"name","twitter:site"),y(h,"content","https://pudding.cool"),y(v,"name","twitter:creator"),y(v,"content","@puddingviz"),y(k,"name","twitter:title"),y(k,"content",t[0]),y(b,"name","twitter:description"),y(b,"content",t[1]),y(A,"name","twitter:image:src"),y(A,"content",I=t[2]+"/assets/social-twitter.jpg"),y(w,"name","robots"),y(w,"content","max-image-preview:large"),y(F,"rel","canonical"),y(F,"href",E=t[2]+"/")},m(x,M){S(document.head,n),S(document.head,r),S(document.head,a),S(document.head,s),S(document.head,l),S(document.head,f),S(document.head,u),S(document.head,d),S(document.head,_),S(document.head,i),S(document.head,c),S(document.head,m),S(document.head,p),S(document.head,g),S(document.head,h),S(document.head,v),S(document.head,k),S(document.head,b),S(document.head,A),S(document.head,w),S(document.head,F);for(let C=0;C<B.length;C+=1)B[C].m(document.head,null);S(document.head,D)},p(x,[M]){if(M&1&&e!==(e=x[0])&&(document.title=e),M&2&&y(n,"content",x[1]),M&8&&y(a,"content",x[3]),M&1&&y(s,"content",x[0]),M&4&&y(f,"content",x[2]),M&2&&y(u,"content",x[1]),M&4&&o!==(o=x[2]+"/assets/social-facebook.jpg")&&y(i,"content",o),M&1&&y(k,"content",x[0]),M&2&&y(b,"content",x[1]),M&4&&I!==(I=x[2]+"/assets/social-twitter.jpg")&&y(A,"content",I),M&4&&E!==(E=x[2]+"/")&&y(F,"href",E),M&16){P=x[4];let C;for(C=0;C<P.length;C+=1){const te=Xt(x,P,C);B[C]?B[C].p(te,M):(B[C]=Qt(te),B[C].c(),B[C].m(D.parentNode,D))}for(;C<B.length;C+=1)B[C].d(1);B.length=P.length}},i:V,o:V,d(x){T(n),T(r),T(a),T(s),T(l),T(f),T(u),T(d),T(_),T(i),T(c),T(m),T(p),T(g),T(h),T(v),T(k),T(b),T(A),T(w),T(F),de(B,x),T(D)}}}function wi(t,e,n){let{title:r="Title TK"}=e,{description:a="Description TK"}=e,{url:s="https://pudding.cool"}=e,{keywords:l=""}=e,{preloadFont:f=[]}=e;return t.$$set=u=>{"title"in u&&n(0,r=u.title),"description"in u&&n(1,a=u.description),"url"in u&&n(2,s=u.url),"keywords"in u&&n(3,l=u.keywords),"preloadFont"in u&&n(4,f=u.preloadFont)},[r,a,s,l,f]}class Ti extends z{constructor(e){super(),ee(this,e,wi,bi,U,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function Yt(t,e,n){const r=t.slice();return r[5]=e[n],r}function Ut(t,e,n){const r=t.slice();return r[8]=e[n].hed,r[2]=e[n].url,r[9]=e[n].image,r}function Zt(t){let e,n,r,a,s,l,f=t[8]+"",u,d,_;return{c(){e=O("div"),n=O("a"),r=O("img"),s=q(),l=O("span"),u=$(f),_=q(),this.h()},l(i){e=N(i,"DIV",{class:!0});var o=G(e);n=N(o,"A",{href:!0,class:!0});var c=G(n);r=N(c,"IMG",{src:!0,alt:!0}),s=j(c),l=N(c,"SPAN",{class:!0});var m=G(l);u=W(m,f),m.forEach(T),c.forEach(T),_=j(o),o.forEach(T),this.h()},h(){Lt(r.src,a="https://pudding.cool/common/assets/thumbnails/640/"+t[9]+".jpg")||y(r,"src",a),y(r,"alt","thumbnail"),y(l,"class","svelte-1en6glb"),y(n,"href",d="https://pudding.cool/"+t[2]),y(n,"class","svelte-1en6glb"),y(e,"class","story svelte-1en6glb")},m(i,o){H(i,e,o),S(e,n),S(n,r),S(n,s),S(n,l),S(l,u),S(e,_)},p(i,o){o&1&&!Lt(r.src,a="https://pudding.cool/common/assets/thumbnails/640/"+i[9]+".jpg")&&y(r,"src",a),o&1&&f!==(f=i[8]+"")&&at(u,f),o&1&&d!==(d="https://pudding.cool/"+i[2])&&y(n,"href",d)},d(i){i&&T(e)}}}function Kt(t){let e,n,r,a=t[5].name.toUpperCase()+"",s,l;return{c(){e=O("li"),n=O("a"),r=O("span"),s=$(a),l=q(),this.h()},l(f){e=N(f,"LI",{class:!0});var u=G(e);n=N(u,"A",{href:!0,class:!0});var d=G(n);r=N(d,"SPAN",{class:!0});var _=G(r);s=W(_,a),_.forEach(T),d.forEach(T),l=j(u),u.forEach(T),this.h()},h(){y(r,"class","svelte-1en6glb"),y(n,"href",t[5].url),y(n,"class","svelte-1en6glb"),y(e,"class","svelte-1en6glb")},m(f,u){H(f,e,u),S(e,n),S(n,r),S(r,s),S(e,l)},p:V,d(f){f&&T(e)}}}function Ai(t){let e,n,r,a,s,l,f,u,d,_,i,o,c,m=t[0],p=[];for(let v=0;v<m.length;v+=1)p[v]=Zt(Ut(t,m,v));let g=t[1],h=[];for(let v=0;v<g.length;v+=1)h[v]=Kt(Yt(t,g,v));return{c(){e=O("footer"),n=O("section");for(let v=0;v<p.length;v+=1)p[v].c();r=q(),a=O("section"),s=O("div"),l=q(),f=O("p"),u=O("a"),d=$("The Pudding"),_=$(`
			is a digital publication that explains ideas debated in culture with visual
			essays.`),i=q(),o=O("section"),c=O("ul");for(let v=0;v<h.length;v+=1)h[v].c();this.h()},l(v){e=N(v,"FOOTER",{class:!0});var k=G(e);n=N(k,"SECTION",{class:!0});var b=G(n);for(let P=0;P<p.length;P+=1)p[P].l(b);b.forEach(T),r=j(k),a=N(k,"SECTION",{class:!0});var A=G(a);s=N(A,"DIV",{class:!0});var I=G(s);I.forEach(T),l=j(A),f=N(A,"P",{});var w=G(f);u=N(w,"A",{href:!0,class:!0});var F=G(u);d=W(F,"The Pudding"),F.forEach(T),_=W(w,`
			is a digital publication that explains ideas debated in culture with visual
			essays.`),w.forEach(T),A.forEach(T),i=j(k),o=N(k,"SECTION",{class:!0});var E=G(o);c=N(E,"UL",{class:!0});var D=G(c);for(let P=0;P<h.length;P+=1)h[P].l(D);D.forEach(T),E.forEach(T),k.forEach(T),this.h()},h(){y(n,"class","stories svelte-1en6glb"),y(s,"class","wordmark svelte-1en6glb"),y(u,"href","https://pudding.cool"),y(u,"class","svelte-1en6glb"),y(a,"class","about svelte-1en6glb"),y(c,"class","svelte-1en6glb"),y(o,"class","links svelte-1en6glb"),y(e,"class","svelte-1en6glb")},m(v,k){H(v,e,k),S(e,n);for(let b=0;b<p.length;b+=1)p[b].m(n,null);S(e,r),S(e,a),S(a,s),s.innerHTML=vi,S(a,l),S(a,f),S(f,u),S(u,d),S(f,_),S(e,i),S(e,o),S(o,c);for(let b=0;b<h.length;b+=1)h[b].m(c,null)},p(v,[k]){if(k&1){m=v[0];let b;for(b=0;b<m.length;b+=1){const A=Ut(v,m,b);p[b]?p[b].p(A,k):(p[b]=Zt(A),p[b].c(),p[b].m(n,null))}for(;b<p.length;b+=1)p[b].d(1);p.length=m.length}if(k&2){g=v[1];let b;for(b=0;b<g.length;b+=1){const A=Yt(v,g,b);h[b]?h[b].p(A,k):(h[b]=Kt(A),h[b].c(),h[b].m(c,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=g.length}},i:V,o:V,d(v){v&&T(e),de(p,v),de(h,v)}}}function xi(t,e,n){let r,a=[];const l=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`,f=[{name:"about",url:"https://pudding.cool/about"},{name:"facebook",url:"https://facebook.com/pudding.viz/"},{name:"twitter",url:"https://twitter.com/puddingviz/"},{name:"instagram",url:"https://www.instagram.com/the.pudding"},{name:"patreon",url:"https://patreon.com/thepudding/"},{name:"privacy",url:"https://pudding.cool/privacy/"},{name:"newsletter",url:"https://thepuddingmail.substack.com"},{name:"rss",url:"https://pudding.cool/feed/index.xml"}];return si(async()=>{r=window.location.href;const d=await(await fetch(l)).json();n(0,a=d.filter(_=>!r.includes(_.url)).slice(0,4))}),[a,f,l]}class Mi extends z{constructor(e){super(),ee(this,e,xi,Ai,U,{})}}function Si(t){let e,n,r,a,s,l;return{c(){e=O("div"),n=O("p"),r=q(),a=O("p"),s=$("-"),l=new Wn(!1),this.h()},l(f){e=N(f,"DIV",{class:!0});var u=G(e);n=N(u,"P",{class:!0});var d=G(n);d.forEach(T),r=j(u),a=N(u,"P",{});var _=G(a);s=W(_,"-"),l=Xn(_,!1),_.forEach(T),u.forEach(T),this.h()},h(){y(n,"class","quote svelte-r2e3hn"),l.a=null,y(e,"class","svelte-r2e3hn")},m(f,u){H(f,e,u),S(e,n),n.innerHTML=t[0],S(e,r),S(e,a),S(a,s),l.m(t[1],a)},p(f,[u]){u&1&&(n.innerHTML=f[0]),u&2&&l.p(f[1])},i:V,o:V,d(f){f&&T(e)}}}function Ii(t,e,n){let{quote:r}=e,{speaker:a}=e,{videoUrl:s}=e;return t.$$set=l=>{"quote"in l&&n(0,r=l.quote),"speaker"in l&&n(1,a=l.speaker),"videoUrl"in l&&n(2,s=l.videoUrl)},[r,a,s]}class Ei extends z{constructor(e){super(),ee(this,e,Ii,Si,U,{quote:0,speaker:1,videoUrl:2})}}var _e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ne={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var i=this||n;return i._counter=1e3,i._html5AudioPool=[],i.html5PoolSize=10,i._codecs={},i._howls=[],i._muted=!1,i._volume=1,i._canPlayEvent="canplaythrough",i._navigator=typeof window<"u"&&window.navigator?window.navigator:null,i.masterGain=null,i.noAudio=!1,i.usingWebAudio=!0,i.autoSuspend=!0,i.ctx=null,i.autoUnlock=!0,i._setup(),i},volume:function(i){var o=this||n;if(i=parseFloat(i),o.ctx||_(),typeof i<"u"&&i>=0&&i<=1){if(o._volume=i,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(i,n.ctx.currentTime);for(var c=0;c<o._howls.length;c++)if(!o._howls[c]._webAudio)for(var m=o._howls[c]._getSoundIds(),p=0;p<m.length;p++){var g=o._howls[c]._soundById(m[p]);g&&g._node&&(g._node.volume=g._volume*i)}return o}return o._volume},mute:function(i){var o=this||n;o.ctx||_(),o._muted=i,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(i?0:o._volume,n.ctx.currentTime);for(var c=0;c<o._howls.length;c++)if(!o._howls[c]._webAudio)for(var m=o._howls[c]._getSoundIds(),p=0;p<m.length;p++){var g=o._howls[c]._soundById(m[p]);g&&g._node&&(g._node.muted=i?!0:g._muted)}return o},stop:function(){for(var i=this||n,o=0;o<i._howls.length;o++)i._howls[o].stop();return i},unload:function(){for(var i=this||n,o=i._howls.length-1;o>=0;o--)i._howls[o].unload();return i.usingWebAudio&&i.ctx&&typeof i.ctx.close<"u"&&(i.ctx.close(),i.ctx=null,_()),i},codecs:function(i){return(this||n)._codecs[i.replace(/^x-/,"")]},_setup:function(){var i=this||n;if(i.state=i.ctx&&i.ctx.state||"suspended",i._autoSuspend(),!i.usingWebAudio)if(typeof Audio<"u")try{var o=new Audio;typeof o.oncanplaythrough>"u"&&(i._canPlayEvent="canplay")}catch{i.noAudio=!0}else i.noAudio=!0;try{var o=new Audio;o.muted&&(i.noAudio=!0)}catch{}return i.noAudio||i._setupCodecs(),i},_setupCodecs:function(){var i=this||n,o=null;try{o=typeof Audio<"u"?new Audio:null}catch{return i}if(!o||typeof o.canPlayType!="function")return i;var c=o.canPlayType("audio/mpeg;").replace(/^no$/,""),m=i._navigator?i._navigator.userAgent:"",p=m.match(/OPR\/([0-6].)/g),g=p&&parseInt(p[0].split("/")[1],10)<33,h=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,v=m.match(/Version\/(.*?) /),k=h&&v&&parseInt(v[1],10)<15;return i._codecs={mp3:!!(!g&&(c||o.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!c,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(o.canPlayType('audio/wav; codecs="1"')||o.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(o.canPlayType("audio/x-m4b;")||o.canPlayType("audio/m4b;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!k&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!k&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},i},_unlockAudio:function(){var i=this||n;if(!(i._audioUnlocked||!i.ctx)){i._audioUnlocked=!1,i.autoUnlock=!1,!i._mobileUnloaded&&i.ctx.sampleRate!==44100&&(i._mobileUnloaded=!0,i.unload()),i._scratchBuffer=i.ctx.createBuffer(1,1,22050);var o=function(c){for(;i._html5AudioPool.length<i.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,i._releaseHtml5Audio(m)}catch{i.noAudio=!0;break}for(var p=0;p<i._howls.length;p++)if(!i._howls[p]._webAudio)for(var g=i._howls[p]._getSoundIds(),h=0;h<g.length;h++){var v=i._howls[p]._soundById(g[h]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}i._autoResume();var k=i.ctx.createBufferSource();k.buffer=i._scratchBuffer,k.connect(i.ctx.destination),typeof k.start>"u"?k.noteOn(0):k.start(0),typeof i.ctx.resume=="function"&&i.ctx.resume(),k.onended=function(){k.disconnect(0),i._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0),document.removeEventListener("keydown",o,!0);for(var b=0;b<i._howls.length;b++)i._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),document.addEventListener("keydown",o,!0),i}},_obtainHtml5Audio:function(){var i=this||n;if(i._html5AudioPool.length)return i._html5AudioPool.pop();var o=new Audio().play();return o&&typeof Promise<"u"&&(o instanceof Promise||typeof o.then=="function")&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(i){var o=this||n;return i._unlocked&&o._html5AudioPool.push(i),o},_autoSuspend:function(){var i=this;if(!(!i.autoSuspend||!i.ctx||typeof i.ctx.suspend>"u"||!n.usingWebAudio)){for(var o=0;o<i._howls.length;o++)if(i._howls[o]._webAudio){for(var c=0;c<i._howls[o]._sounds.length;c++)if(!i._howls[o]._sounds[c]._paused)return i}return i._suspendTimer&&clearTimeout(i._suspendTimer),i._suspendTimer=setTimeout(function(){if(i.autoSuspend){i._suspendTimer=null,i.state="suspending";var m=function(){i.state="suspended",i._resumeAfterSuspend&&(delete i._resumeAfterSuspend,i._autoResume())};i.ctx.suspend().then(m,m)}},3e4),i}},_autoResume:function(){var i=this;if(!(!i.ctx||typeof i.ctx.resume>"u"||!n.usingWebAudio))return i.state==="running"&&i.ctx.state!=="interrupted"&&i._suspendTimer?(clearTimeout(i._suspendTimer),i._suspendTimer=null):i.state==="suspended"||i.state==="running"&&i.ctx.state==="interrupted"?(i.ctx.resume().then(function(){i.state="running";for(var o=0;o<i._howls.length;o++)i._howls[o]._emit("resume")}),i._suspendTimer&&(clearTimeout(i._suspendTimer),i._suspendTimer=null)):i.state==="suspending"&&(i._resumeAfterSuspend=!0),i}};var n=new e,r=function(i){var o=this;if(!i.src||i.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}o.init(i)};r.prototype={init:function(i){var o=this;return n.ctx||_(),o._autoplay=i.autoplay||!1,o._format=typeof i.format!="string"?i.format:[i.format],o._html5=i.html5||!1,o._muted=i.mute||!1,o._loop=i.loop||!1,o._pool=i.pool||5,o._preload=typeof i.preload=="boolean"||i.preload==="metadata"?i.preload:!0,o._rate=i.rate||1,o._sprite=i.sprite||{},o._src=typeof i.src!="string"?i.src:[i.src],o._volume=i.volume!==void 0?i.volume:1,o._xhr={method:i.xhr&&i.xhr.method?i.xhr.method:"GET",headers:i.xhr&&i.xhr.headers?i.xhr.headers:null,withCredentials:i.xhr&&i.xhr.withCredentials?i.xhr.withCredentials:!1},o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=i.onend?[{fn:i.onend}]:[],o._onfade=i.onfade?[{fn:i.onfade}]:[],o._onload=i.onload?[{fn:i.onload}]:[],o._onloaderror=i.onloaderror?[{fn:i.onloaderror}]:[],o._onplayerror=i.onplayerror?[{fn:i.onplayerror}]:[],o._onpause=i.onpause?[{fn:i.onpause}]:[],o._onplay=i.onplay?[{fn:i.onplay}]:[],o._onstop=i.onstop?[{fn:i.onstop}]:[],o._onmute=i.onmute?[{fn:i.onmute}]:[],o._onvolume=i.onvolume?[{fn:i.onvolume}]:[],o._onrate=i.onrate?[{fn:i.onrate}]:[],o._onseek=i.onseek?[{fn:i.onseek}]:[],o._onunlock=i.onunlock?[{fn:i.onunlock}]:[],o._onresume=[],o._webAudio=n.usingWebAudio&&!o._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o._preload!=="none"&&o.load(),o},load:function(){var i=this,o=null;if(n.noAudio){i._emit("loaderror",null,"No audio support.");return}typeof i._src=="string"&&(i._src=[i._src]);for(var c=0;c<i._src.length;c++){var m,p;if(i._format&&i._format[c])m=i._format[c];else{if(p=i._src[c],typeof p!="string"){i._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(p),m||(m=/\.([^.]+)$/.exec(p.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&n.codecs(m)){o=i._src[c];break}}if(!o){i._emit("loaderror",null,"No codec support for selected audio sources.");return}return i._src=o,i._state="loading",window.location.protocol==="https:"&&o.slice(0,5)==="http:"&&(i._html5=!0,i._webAudio=!1),new a(i),i._webAudio&&l(i),i},play:function(i,o){var c=this,m=null;if(typeof i=="number")m=i,i=null;else{if(typeof i=="string"&&c._state==="loaded"&&!c._sprite[i])return null;if(typeof i>"u"&&(i="__default",!c._playLock)){for(var p=0,g=0;g<c._sounds.length;g++)c._sounds[g]._paused&&!c._sounds[g]._ended&&(p++,m=c._sounds[g]._id);p===1?i=null:m=null}}var h=m?c._soundById(m):c._inactiveSound();if(!h)return null;if(m&&!i&&(i=h._sprite||"__default"),c._state!=="loaded"){h._sprite=i,h._ended=!1;var v=h._id;return c._queue.push({event:"play",action:function(){c.play(v)}}),v}if(m&&!h._paused)return o||c._loadQueue("play"),h._id;c._webAudio&&n._autoResume();var k=Math.max(0,h._seek>0?h._seek:c._sprite[i][0]/1e3),b=Math.max(0,(c._sprite[i][0]+c._sprite[i][1])/1e3-k),A=b*1e3/Math.abs(h._rate),I=c._sprite[i][0]/1e3,w=(c._sprite[i][0]+c._sprite[i][1])/1e3;h._sprite=i,h._ended=!1;var F=function(){h._paused=!1,h._seek=k,h._start=I,h._stop=w,h._loop=!!(h._loop||c._sprite[i][2])};if(k>=w){c._ended(h);return}var E=h._node;if(c._webAudio){var D=function(){c._playLock=!1,F(),c._refreshBuffer(h);var M=h._muted||c._muted?0:h._volume;E.gain.setValueAtTime(M,n.ctx.currentTime),h._playStart=n.ctx.currentTime,typeof E.bufferSource.start>"u"?h._loop?E.bufferSource.noteGrainOn(0,k,86400):E.bufferSource.noteGrainOn(0,k,b):h._loop?E.bufferSource.start(0,k,86400):E.bufferSource.start(0,k,b),A!==1/0&&(c._endTimers[h._id]=setTimeout(c._ended.bind(c,h),A)),o||setTimeout(function(){c._emit("play",h._id),c._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?D():(c._playLock=!0,c.once("resume",D),c._clearTimer(h._id))}else{var P=function(){E.currentTime=k,E.muted=h._muted||c._muted||n._muted||E.muted,E.volume=h._volume*n.volume(),E.playbackRate=h._rate;try{var M=E.play();if(M&&typeof Promise<"u"&&(M instanceof Promise||typeof M.then=="function")?(c._playLock=!0,F(),M.then(function(){c._playLock=!1,E._unlocked=!0,o?c._loadQueue():c._emit("play",h._id)}).catch(function(){c._playLock=!1,c._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),h._ended=!0,h._paused=!0})):o||(c._playLock=!1,F(),c._emit("play",h._id)),E.playbackRate=h._rate,E.paused){c._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}i!=="__default"||h._loop?c._endTimers[h._id]=setTimeout(c._ended.bind(c,h),A):(c._endTimers[h._id]=function(){c._ended(h),E.removeEventListener("ended",c._endTimers[h._id],!1)},E.addEventListener("ended",c._endTimers[h._id],!1))}catch(C){c._emit("playerror",h._id,C)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=c._src,E.load());var B=window&&window.ejecta||!E.readyState&&n._navigator.isCocoonJS;if(E.readyState>=3||B)P();else{c._playLock=!0,c._state="loading";var x=function(){c._state="loaded",P(),E.removeEventListener(n._canPlayEvent,x,!1)};E.addEventListener(n._canPlayEvent,x,!1),c._clearTimer(h._id)}}return h._id},pause:function(i){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"pause",action:function(){o.pause(i)}}),o;for(var c=o._getSoundIds(i),m=0;m<c.length;m++){o._clearTimer(c[m]);var p=o._soundById(c[m]);if(p&&!p._paused&&(p._seek=o.seek(c[m]),p._rateSeek=0,p._paused=!0,o._stopFade(c[m]),p._node))if(o._webAudio){if(!p._node.bufferSource)continue;typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),o._cleanBuffer(p._node)}else(!isNaN(p._node.duration)||p._node.duration===1/0)&&p._node.pause();arguments[1]||o._emit("pause",p?p._id:null)}return o},stop:function(i,o){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"stop",action:function(){c.stop(i)}}),c;for(var m=c._getSoundIds(i),p=0;p<m.length;p++){c._clearTimer(m[p]);var g=c._soundById(m[p]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,c._stopFade(m[p]),g._node&&(c._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),c._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&c._clearSound(g._node))),o||c._emit("stop",g._id))}return c},mute:function(i,o){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"mute",action:function(){c.mute(i,o)}}),c;if(typeof o>"u")if(typeof i=="boolean")c._muted=i;else return c._muted;for(var m=c._getSoundIds(o),p=0;p<m.length;p++){var g=c._soundById(m[p]);g&&(g._muted=i,g._interval&&c._stopFade(g._id),c._webAudio&&g._node?g._node.gain.setValueAtTime(i?0:g._volume,n.ctx.currentTime):g._node&&(g._node.muted=n._muted?!0:i),c._emit("mute",g._id))}return c},volume:function(){var i=this,o=arguments,c,m;if(o.length===0)return i._volume;if(o.length===1||o.length===2&&typeof o[1]>"u"){var p=i._getSoundIds(),g=p.indexOf(o[0]);g>=0?m=parseInt(o[0],10):c=parseFloat(o[0])}else o.length>=2&&(c=parseFloat(o[0]),m=parseInt(o[1],10));var h;if(typeof c<"u"&&c>=0&&c<=1){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,o)}}),i;typeof m>"u"&&(i._volume=c),m=i._getSoundIds(m);for(var v=0;v<m.length;v++)h=i._soundById(m[v]),h&&(h._volume=c,o[2]||i._stopFade(m[v]),i._webAudio&&h._node&&!h._muted?h._node.gain.setValueAtTime(c,n.ctx.currentTime):h._node&&!h._muted&&(h._node.volume=c*n.volume()),i._emit("volume",h._id))}else return h=m?i._soundById(m):i._sounds[0],h?h._volume:0;return i},fade:function(i,o,c,m){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(i,o,c,m)}}),p;i=Math.min(Math.max(0,parseFloat(i)),1),o=Math.min(Math.max(0,parseFloat(o)),1),c=parseFloat(c),p.volume(i,m);for(var g=p._getSoundIds(m),h=0;h<g.length;h++){var v=p._soundById(g[h]);if(v){if(m||p._stopFade(g[h]),p._webAudio&&!v._muted){var k=n.ctx.currentTime,b=k+c/1e3;v._volume=i,v._node.gain.setValueAtTime(i,k),v._node.gain.linearRampToValueAtTime(o,b)}p._startFadeInterval(v,i,o,c,g[h],typeof m>"u")}}return p},_startFadeInterval:function(i,o,c,m,p,g){var h=this,v=o,k=c-o,b=Math.abs(k/.01),A=Math.max(4,b>0?m/b:m),I=Date.now();i._fadeTo=c,i._interval=setInterval(function(){var w=(Date.now()-I)/m;I=Date.now(),v+=k*w,v=Math.round(v*100)/100,k<0?v=Math.max(c,v):v=Math.min(c,v),h._webAudio?i._volume=v:h.volume(v,i._id,!0),g&&(h._volume=v),(c<o&&v<=c||c>o&&v>=c)&&(clearInterval(i._interval),i._interval=null,i._fadeTo=null,h.volume(c,i._id),h._emit("fade",i._id))},A)},_stopFade:function(i){var o=this,c=o._soundById(i);return c&&c._interval&&(o._webAudio&&c._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(c._interval),c._interval=null,o.volume(c._fadeTo,i),c._fadeTo=null,o._emit("fade",i)),o},loop:function(){var i=this,o=arguments,c,m,p;if(o.length===0)return i._loop;if(o.length===1)if(typeof o[0]=="boolean")c=o[0],i._loop=c;else return p=i._soundById(parseInt(o[0],10)),p?p._loop:!1;else o.length===2&&(c=o[0],m=parseInt(o[1],10));for(var g=i._getSoundIds(m),h=0;h<g.length;h++)p=i._soundById(g[h]),p&&(p._loop=c,i._webAudio&&p._node&&p._node.bufferSource&&(p._node.bufferSource.loop=c,c&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop,i.playing(g[h])&&(i.pause(g[h],!0),i.play(g[h],!0)))));return i},rate:function(){var i=this,o=arguments,c,m;if(o.length===0)m=i._sounds[0]._id;else if(o.length===1){var p=i._getSoundIds(),g=p.indexOf(o[0]);g>=0?m=parseInt(o[0],10):c=parseFloat(o[0])}else o.length===2&&(c=parseFloat(o[0]),m=parseInt(o[1],10));var h;if(typeof c=="number"){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,o)}}),i;typeof m>"u"&&(i._rate=c),m=i._getSoundIds(m);for(var v=0;v<m.length;v++)if(h=i._soundById(m[v]),h){i.playing(m[v])&&(h._rateSeek=i.seek(m[v]),h._playStart=i._webAudio?n.ctx.currentTime:h._playStart),h._rate=c,i._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.setValueAtTime(c,n.ctx.currentTime):h._node&&(h._node.playbackRate=c);var k=i.seek(m[v]),b=(i._sprite[h._sprite][0]+i._sprite[h._sprite][1])/1e3-k,A=b*1e3/Math.abs(h._rate);(i._endTimers[m[v]]||!h._paused)&&(i._clearTimer(m[v]),i._endTimers[m[v]]=setTimeout(i._ended.bind(i,h),A)),i._emit("rate",h._id)}}else return h=i._soundById(m),h?h._rate:i._rate;return i},seek:function(){var i=this,o=arguments,c,m;if(o.length===0)i._sounds.length&&(m=i._sounds[0]._id);else if(o.length===1){var p=i._getSoundIds(),g=p.indexOf(o[0]);g>=0?m=parseInt(o[0],10):i._sounds.length&&(m=i._sounds[0]._id,c=parseFloat(o[0]))}else o.length===2&&(c=parseFloat(o[0]),m=parseInt(o[1],10));if(typeof m>"u")return 0;if(typeof c=="number"&&(i._state!=="loaded"||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,o)}}),i;var h=i._soundById(m);if(h)if(typeof c=="number"&&c>=0){var v=i.playing(m);v&&i.pause(m,!0),h._seek=c,h._ended=!1,i._clearTimer(m),!i._webAudio&&h._node&&!isNaN(h._node.duration)&&(h._node.currentTime=c);var k=function(){v&&i.play(m,!0),i._emit("seek",m)};if(v&&!i._webAudio){var b=function(){i._playLock?setTimeout(b,0):k()};setTimeout(b,0)}else k()}else if(i._webAudio){var A=i.playing(m)?n.ctx.currentTime-h._playStart:0,I=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(I+A*Math.abs(h._rate))}else return h._node.currentTime;return i},playing:function(i){var o=this;if(typeof i=="number"){var c=o._soundById(i);return c?!c._paused:!1}for(var m=0;m<o._sounds.length;m++)if(!o._sounds[m]._paused)return!0;return!1},duration:function(i){var o=this,c=o._duration,m=o._soundById(i);return m&&(c=o._sprite[m._sprite][1]/1e3),c},state:function(){return this._state},unload:function(){for(var i=this,o=i._sounds,c=0;c<o.length;c++)o[c]._paused||i.stop(o[c]._id),i._webAudio||(i._clearSound(o[c]._node),o[c]._node.removeEventListener("error",o[c]._errorFn,!1),o[c]._node.removeEventListener(n._canPlayEvent,o[c]._loadFn,!1),o[c]._node.removeEventListener("ended",o[c]._endFn,!1),n._releaseHtml5Audio(o[c]._node)),delete o[c]._node,i._clearTimer(o[c]._id);var m=n._howls.indexOf(i);m>=0&&n._howls.splice(m,1);var p=!0;for(c=0;c<n._howls.length;c++)if(n._howls[c]._src===i._src||i._src.indexOf(n._howls[c]._src)>=0){p=!1;break}return s&&p&&delete s[i._src],n.noAudio=!1,i._state="unloaded",i._sounds=[],i=null,null},on:function(i,o,c,m){var p=this,g=p["_on"+i];return typeof o=="function"&&g.push(m?{id:c,fn:o,once:m}:{id:c,fn:o}),p},off:function(i,o,c){var m=this,p=m["_on"+i],g=0;if(typeof o=="number"&&(c=o,o=null),o||c)for(g=0;g<p.length;g++){var h=c===p[g].id;if(o===p[g].fn&&h||!o&&h){p.splice(g,1);break}}else if(i)m["_on"+i]=[];else{var v=Object.keys(m);for(g=0;g<v.length;g++)v[g].indexOf("_on")===0&&Array.isArray(m[v[g]])&&(m[v[g]]=[])}return m},once:function(i,o,c){var m=this;return m.on(i,o,c,1),m},_emit:function(i,o,c){for(var m=this,p=m["_on"+i],g=p.length-1;g>=0;g--)(!p[g].id||p[g].id===o||i==="load")&&(setTimeout(function(h){h.call(this,o,c)}.bind(m,p[g].fn),0),p[g].once&&m.off(i,p[g].fn,p[g].id));return m._loadQueue(i),m},_loadQueue:function(i){var o=this;if(o._queue.length>0){var c=o._queue[0];c.event===i&&(o._queue.shift(),o._loadQueue()),i||c.action()}return o},_ended:function(i){var o=this,c=i._sprite;if(!o._webAudio&&i._node&&!i._node.paused&&!i._node.ended&&i._node.currentTime<i._stop)return setTimeout(o._ended.bind(o,i),100),o;var m=!!(i._loop||o._sprite[c][2]);if(o._emit("end",i._id),!o._webAudio&&m&&o.stop(i._id,!0).play(i._id),o._webAudio&&m){o._emit("play",i._id),i._seek=i._start||0,i._rateSeek=0,i._playStart=n.ctx.currentTime;var p=(i._stop-i._start)*1e3/Math.abs(i._rate);o._endTimers[i._id]=setTimeout(o._ended.bind(o,i),p)}return o._webAudio&&!m&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,i._rateSeek=0,o._clearTimer(i._id),o._cleanBuffer(i._node),n._autoSuspend()),!o._webAudio&&!m&&o.stop(i._id,!0),o},_clearTimer:function(i){var o=this;if(o._endTimers[i]){if(typeof o._endTimers[i]!="function")clearTimeout(o._endTimers[i]);else{var c=o._soundById(i);c&&c._node&&c._node.removeEventListener("ended",o._endTimers[i],!1)}delete o._endTimers[i]}return o},_soundById:function(i){for(var o=this,c=0;c<o._sounds.length;c++)if(i===o._sounds[c]._id)return o._sounds[c];return null},_inactiveSound:function(){var i=this;i._drain();for(var o=0;o<i._sounds.length;o++)if(i._sounds[o]._ended)return i._sounds[o].reset();return new a(i)},_drain:function(){var i=this,o=i._pool,c=0,m=0;if(!(i._sounds.length<o)){for(m=0;m<i._sounds.length;m++)i._sounds[m]._ended&&c++;for(m=i._sounds.length-1;m>=0;m--){if(c<=o)return;i._sounds[m]._ended&&(i._webAudio&&i._sounds[m]._node&&i._sounds[m]._node.disconnect(0),i._sounds.splice(m,1),c--)}}},_getSoundIds:function(i){var o=this;if(typeof i>"u"){for(var c=[],m=0;m<o._sounds.length;m++)c.push(o._sounds[m]._id);return c}else return[i]},_refreshBuffer:function(i){var o=this;return i._node.bufferSource=n.ctx.createBufferSource(),i._node.bufferSource.buffer=s[o._src],i._panner?i._node.bufferSource.connect(i._panner):i._node.bufferSource.connect(i._node),i._node.bufferSource.loop=i._loop,i._loop&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop||0),i._node.bufferSource.playbackRate.setValueAtTime(i._rate,n.ctx.currentTime),o},_cleanBuffer:function(i){var o=this,c=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&i.bufferSource&&(i.bufferSource.onended=null,i.bufferSource.disconnect(0),c))try{i.bufferSource.buffer=n._scratchBuffer}catch{}return i.bufferSource=null,o},_clearSound:function(i){var o=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);o||(i.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(i){this._parent=i,this.init()};a.prototype={init:function(){var i=this,o=i._parent;return i._muted=o._muted,i._loop=o._loop,i._volume=o._volume,i._rate=o._rate,i._seek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++n._counter,o._sounds.push(i),i.create(),i},create:function(){var i=this,o=i._parent,c=n._muted||i._muted||i._parent._muted?0:i._volume;return o._webAudio?(i._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),i._node.gain.setValueAtTime(c,n.ctx.currentTime),i._node.paused=!0,i._node.connect(n.masterGain)):n.noAudio||(i._node=n._obtainHtml5Audio(),i._errorFn=i._errorListener.bind(i),i._node.addEventListener("error",i._errorFn,!1),i._loadFn=i._loadListener.bind(i),i._node.addEventListener(n._canPlayEvent,i._loadFn,!1),i._endFn=i._endListener.bind(i),i._node.addEventListener("ended",i._endFn,!1),i._node.src=o._src,i._node.preload=o._preload===!0?"auto":o._preload,i._node.volume=c*n.volume(),i._node.load()),i},reset:function(){var i=this,o=i._parent;return i._muted=o._muted,i._loop=o._loop,i._volume=o._volume,i._rate=o._rate,i._seek=0,i._rateSeek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++n._counter,i},_errorListener:function(){var i=this;i._parent._emit("loaderror",i._id,i._node.error?i._node.error.code:0),i._node.removeEventListener("error",i._errorFn,!1)},_loadListener:function(){var i=this,o=i._parent;o._duration=Math.ceil(i._node.duration*10)/10,Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue()),i._node.removeEventListener(n._canPlayEvent,i._loadFn,!1)},_endListener:function(){var i=this,o=i._parent;o._duration===1/0&&(o._duration=Math.ceil(i._node.duration*10)/10,o._sprite.__default[1]===1/0&&(o._sprite.__default[1]=o._duration*1e3),o._ended(i)),i._node.removeEventListener("ended",i._endFn,!1)}};var s={},l=function(i){var o=i._src;if(s[o]){i._duration=s[o].duration,d(i);return}if(/^data:[^;]+;base64,/.test(o)){for(var c=atob(o.split(",")[1]),m=new Uint8Array(c.length),p=0;p<c.length;++p)m[p]=c.charCodeAt(p);u(m.buffer,i)}else{var g=new XMLHttpRequest;g.open(i._xhr.method,o,!0),g.withCredentials=i._xhr.withCredentials,g.responseType="arraybuffer",i._xhr.headers&&Object.keys(i._xhr.headers).forEach(function(h){g.setRequestHeader(h,i._xhr.headers[h])}),g.onload=function(){var h=(g.status+"")[0];if(h!=="0"&&h!=="2"&&h!=="3"){i._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}u(g.response,i)},g.onerror=function(){i._webAudio&&(i._html5=!0,i._webAudio=!1,i._sounds=[],delete s[o],i.load())},f(g)}},f=function(i){try{i.send()}catch{i.onerror()}},u=function(i,o){var c=function(){o._emit("loaderror",null,"Decoding audio data failed.")},m=function(p){p&&o._sounds.length>0?(s[o._src]=p,d(o,p)):c()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(i).then(m).catch(c):n.ctx.decodeAudioData(i,m,c)},d=function(i,o){o&&!i._duration&&(i._duration=o.duration),Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue())},_=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var i=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),o=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),c=o?parseInt(o[1],10):null;if(i&&c&&c<9){var m=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!m&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,typeof _e<"u"?(_e.HowlerGlobal=e,_e.Howler=n,_e.Howl=r,_e.Sound=a):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=a)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var a=r._howls.length-1;a>=0;a--)r._howls[a].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,a){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(r=typeof r!="number"?s._pos[1]:r,a=typeof a!="number"?s._pos[2]:a,typeof n=="number")s._pos=[n,r,a],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,r,a,s,l,f){var u=this;if(!u.ctx||!u.ctx.listener)return u;var d=u._orientation;if(r=typeof r!="number"?d[1]:r,a=typeof a!="number"?d[2]:a,s=typeof s!="number"?d[3]:s,l=typeof l!="number"?d[4]:l,f=typeof f!="number"?d[5]:f,typeof n=="number")u._orientation=[n,r,a,s,l,f],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(f,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(n,r,a,s,l,f);else return d;return u},Howl.prototype.init=function(n){return function(r){var a=this;return a._orientation=r.orientation||[1,0,0],a._stereo=r.stereo||null,a._pos=r.pos||null,a._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},a._onstereo=r.onstereo?[{fn:r.onstereo}]:[],a._onpos=r.onpos?[{fn:r.onpos}]:[],a._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(n,r)}}),a;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")a._stereo=n,a._pos=[n,0,0];else return a._stereo;for(var l=a._getSoundIds(r),f=0;f<l.length;f++){var u=a._soundById(l[f]);if(u)if(typeof n=="number")u._stereo=n,u._pos=[n,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,s),s==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(n,0,0):u._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),a._emit("stereo",u._id);else return u._stereo}return a},Howl.prototype.pos=function(n,r,a,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(n,r,a,s)}}),l;if(r=typeof r!="number"?0:r,a=typeof a!="number"?-.5:a,typeof s>"u")if(typeof n=="number")l._pos=[n,r,a];else return l._pos;for(var f=l._getSoundIds(s),u=0;u<f.length;u++){var d=l._soundById(f[u]);if(d)if(typeof n=="number")d._pos=[n,r,a],d._node&&((!d._panner||d._panner.pan)&&e(d,"spatial"),typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):d._panner.setPosition(n,r,a)),l._emit("pos",d._id);else return d._pos}return l},Howl.prototype.orientation=function(n,r,a,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(n,r,a,s)}}),l;if(r=typeof r!="number"?l._orientation[1]:r,a=typeof a!="number"?l._orientation[2]:a,typeof s>"u")if(typeof n=="number")l._orientation=[n,r,a];else return l._orientation;for(var f=l._getSoundIds(s),u=0;u<f.length;u++){var d=l._soundById(f[u]);if(d)if(typeof n=="number")d._orientation=[n,r,a],d._node&&(d._panner||(d._pos||(d._pos=l._pos||[0,0,-.5]),e(d,"spatial")),typeof d._panner.orientationX<"u"?(d._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):d._panner.setOrientation(n,r,a)),l._emit("orientation",d._id);else return d._orientation}return l},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,a,s,l;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")a=r[0],typeof s>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),n._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:n._panningModel});else return l=n._soundById(parseInt(r[0],10)),l?l._pannerAttr:n._pannerAttr;else r.length===2&&(a=r[0],s=parseInt(r[1],10));for(var f=n._getSoundIds(s),u=0;u<f.length;u++)if(l=n._soundById(f[u]),l){var d=l._pannerAttr;d={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:d.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:d.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:d.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:d.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:d.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:d.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:d.panningModel};var _=l._panner;_?(_.coneInnerAngle=d.coneInnerAngle,_.coneOuterAngle=d.coneOuterAngle,_.coneOuterGain=d.coneOuterGain,_.distanceModel=d.distanceModel,_.maxDistance=d.maxDistance,_.refDistance=d.refDistance,_.rolloffFactor=d.rolloffFactor,_.panningModel=d.panningModel):(l._pos||(l._pos=n._pos||[0,0,-.5]),e(l,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var r=this,a=r._parent;r._orientation=a._orientation,r._stereo=a._stereo,r._pos=a._pos,r._pannerAttr=a._pannerAttr,n.call(this),r._stereo?a.stereo(r._stereo):r._pos&&a.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,a=r._parent;return r._orientation=a._orientation,r._stereo=a._stereo,r._pos=a._pos,r._pannerAttr=a._pannerAttr,r._stereo?a.stereo(r._stereo):r._pos?a.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,a._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var e=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(Ne);function Fi(t){const e=t-1;return e*e*e+1}function Jt(t){return--t*t*t*t*t+1}function zt(t,{delay:e=0,duration:n=400,easing:r=Qn}={}){const a=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:s=>`opacity: ${s*a}`}}function en(t,{delay:e=0,duration:n=400,easing:r=Fi}={}){const a=getComputedStyle(t),s=+a.opacity,l=parseFloat(a.height),f=parseFloat(a.paddingTop),u=parseFloat(a.paddingBottom),d=parseFloat(a.marginTop),_=parseFloat(a.marginBottom),i=parseFloat(a.borderTopWidth),o=parseFloat(a.borderBottomWidth);return{delay:e,duration:n,easing:r,css:c=>`overflow: hidden;opacity: ${Math.min(c*20,1)*s};height: ${c*l}px;padding-top: ${c*f}px;padding-bottom: ${c*u}px;margin-top: ${c*d}px;margin-bottom: ${c*_}px;border-top-width: ${c*i}px;border-bottom-width: ${c*o}px;`}}function Pi(t){let e,n,r;return{c(){e=O("div"),this.h()},l(a){e=N(a,"DIV",{class:!0}),G(e).forEach(T),this.h()},h(){y(e,"class","svelte-ue0rk9"),be(e,"played",t[5]>=t[0]-wt),be(e,"off-grid",t[6]),Q(e,"height",`${t[2]}px`),Q(e,"width",`${t[1]}px`),Q(e,"left",`${t[3]}px`),Q(e,"--color",t[4])},m(a,s){H(a,e,s),r=!0},p(a,[s]){(!r||s&33)&&be(e,"played",a[5]>=a[0]-wt),(!r||s&64)&&be(e,"off-grid",a[6]),s&4&&Q(e,"height",`${a[2]}px`),s&2&&Q(e,"width",`${a[1]}px`),s&8&&Q(e,"left",`${a[3]}px`),s&16&&Q(e,"--color",a[4])},i(a){r||(Pt(()=>{n||(n=Ue(e,zt,{},!0)),n.run(1)}),r=!0)},o(a){n||(n=Ue(e,zt,{},!1)),n.run(0),r=!1},d(a){a&&T(e),a&&n&&n.end()}}}const wt=.05;function Oi(t,e,n){let r,a,s,l,f,{note:u}=e,{instrumentId:d}=e,{width:_}=e,{height:i}=e,{x:o}=e,{color:c}=e,{withSound:m}=e;const{getT:p,getInstrumentToggles:g}=ot("song"),h=p();pe(t,h,A=>n(5,f=A));const v=g();pe(t,v,A=>n(13,l=A));const k={hihat:new Ne.Howl({src:["assets/sound/hihat.mp3"]}),kick:new Ne.Howl({src:["assets/sound/kick.mp3"]}),snare:new Ne.Howl({src:["assets/sound/snare.mp3"]})},b=()=>{k[d].state()==="loaded"&&k[d].play()};return t.$$set=A=>{"note"in A&&n(0,u=A.note),"instrumentId"in A&&n(9,d=A.instrumentId),"width"in A&&n(1,_=A.width),"height"in A&&n(2,i=A.height),"x"in A&&n(3,o=A.x),"color"in A&&n(4,c=A.color),"withSound"in A&&n(10,m=A.withSound)},t.$$.update=()=>{t.$$.dirty&1&&n(6,r=u%.0625!==0),t.$$.dirty&33&&n(12,a=f!==0&&f>=u&&f<u+wt),t.$$.dirty&8704&&n(11,s=l[d]==="on"),t.$$.dirty&7168&&m&&a&&s&&b()},[u,_,i,o,c,f,r,h,v,d,m,s,a,l]}class Ni extends z{constructor(e){super(),ee(this,e,Oi,Pi,U,{note:0,instrumentId:9,width:1,height:2,x:3,color:4,withSound:10})}}function Ye(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yn(t){let e,n,r;t.length!==2?(e=Ye,n=(f,u)=>Ye(t(f),u),r=(f,u)=>t(f)-u):(e=t===Ye||t===yi?t:Gi,n=t,r=t);function a(f,u,d=0,_=f.length){if(d<_){if(e(u,u)!==0)return _;do{const i=d+_>>>1;n(f[i],u)<0?d=i+1:_=i}while(d<_)}return d}function s(f,u,d=0,_=f.length){if(d<_){if(e(u,u)!==0)return _;do{const i=d+_>>>1;n(f[i],u)<=0?d=i+1:_=i}while(d<_)}return d}function l(f,u,d=0,_=f.length){const i=a(f,u,d,_-1);return i>d&&r(f[i-1],u)>-r(f[i],u)?i-1:i}return{left:a,center:l,right:s}}function Gi(){return 0}function Hi(t){return t===null?NaN:+t}const Di=Yn(Ye),Bi=Di.right;Yn(Hi).center;const Ri=Bi,Ci=Math.sqrt(50),Li=Math.sqrt(10),qi=Math.sqrt(2);function Ke(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),l=s>=Ci?10:s>=Li?5:s>=qi?2:1;let f,u,d;return a<0?(d=Math.pow(10,-a)/l,f=Math.round(t*d),u=Math.round(e*d),f/d<t&&++f,u/d>e&&--u,d=-d):(d=Math.pow(10,a)*l,f=Math.round(t/d),u=Math.round(e/d),f*d<t&&++f,u*d>e&&--u),u<f&&.5<=n&&n<2?Ke(t,e,n*2):[f,u,d]}function ji(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,s,l]=r?Ke(e,t,n):Ke(t,e,n);if(!(s>=a))return[];const f=s-a+1,u=new Array(f);if(r)if(l<0)for(let d=0;d<f;++d)u[d]=(s-d)/-l;else for(let d=0;d<f;++d)u[d]=(s-d)*l;else if(l<0)for(let d=0;d<f;++d)u[d]=(a+d)/-l;else for(let d=0;d<f;++d)u[d]=(a+d)*l;return u}function Tt(t,e,n){return e=+e,t=+t,n=+n,Ke(t,e,n)[2]}function Vi(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?Tt(e,t,n):Tt(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function Fe(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(a);++r<a;)s[r]=t+r*n;return s}function Nt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Un(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Le(){}var Ge=.7,Je=1/Ge,Ie="\\s*([+-]?\\d+)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$i=/^#([0-9a-f]{3,8})$/,Wi=new RegExp(`^rgb\\(${Ie},${Ie},${Ie}\\)$`),Xi=new RegExp(`^rgb\\(${ue},${ue},${ue}\\)$`),Qi=new RegExp(`^rgba\\(${Ie},${Ie},${Ie},${He}\\)$`),Yi=new RegExp(`^rgba\\(${ue},${ue},${ue},${He}\\)$`),Ui=new RegExp(`^hsl\\(${He},${ue},${ue}\\)$`),Zi=new RegExp(`^hsla\\(${He},${ue},${ue},${He}\\)$`),tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nt(Le,De,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nn,formatHex:nn,formatHex8:Ki,formatHsl:Ji,formatRgb:rn,toString:rn});function nn(){return this.rgb().formatHex()}function Ki(){return this.rgb().formatHex8()}function Ji(){return Zn(this).formatHsl()}function rn(){return this.rgb().formatRgb()}function De(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$i.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?an(e):n===3?new J(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?$e(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?$e(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Wi.exec(t))?new J(e[1],e[2],e[3],1):(e=Xi.exec(t))?new J(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Qi.exec(t))?$e(e[1],e[2],e[3],e[4]):(e=Yi.exec(t))?$e(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ui.exec(t))?ln(e[1],e[2]/100,e[3]/100,1):(e=Zi.exec(t))?ln(e[1],e[2]/100,e[3]/100,e[4]):tn.hasOwnProperty(t)?an(tn[t]):t==="transparent"?new J(NaN,NaN,NaN,0):null}function an(t){return new J(t>>16&255,t>>8&255,t&255,1)}function $e(t,e,n,r){return r<=0&&(t=e=n=NaN),new J(t,e,n,r)}function zi(t){return t instanceof Le||(t=De(t)),t?(t=t.rgb(),new J(t.r,t.g,t.b,t.opacity)):new J}function At(t,e,n,r){return arguments.length===1?zi(t):new J(t,e,n,r??1)}function J(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Nt(J,At,Un(Le,{brighter(t){return t=t==null?Je:Math.pow(Je,t),new J(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ge:Math.pow(Ge,t),new J(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new J(Te(this.r),Te(this.g),Te(this.b),ze(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:on,formatHex:on,formatHex8:er,formatRgb:sn,toString:sn}));function on(){return`#${we(this.r)}${we(this.g)}${we(this.b)}`}function er(){return`#${we(this.r)}${we(this.g)}${we(this.b)}${we((isNaN(this.opacity)?1:this.opacity)*255)}`}function sn(){const t=ze(this.opacity);return`${t===1?"rgb(":"rgba("}${Te(this.r)}, ${Te(this.g)}, ${Te(this.b)}${t===1?")":`, ${t})`}`}function ze(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Te(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function we(t){return t=Te(t),(t<16?"0":"")+t.toString(16)}function ln(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new se(t,e,n,r)}function Zn(t){if(t instanceof se)return new se(t.h,t.s,t.l,t.opacity);if(t instanceof Le||(t=De(t)),!t)return new se;if(t instanceof se)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),s=Math.max(e,n,r),l=NaN,f=s-a,u=(s+a)/2;return f?(e===s?l=(n-r)/f+(n<r)*6:n===s?l=(r-e)/f+2:l=(e-n)/f+4,f/=u<.5?s+a:2-s-a,l*=60):f=u>0&&u<1?0:l,new se(l,f,u,t.opacity)}function tr(t,e,n,r){return arguments.length===1?Zn(t):new se(t,e,n,r??1)}function se(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Nt(se,tr,Un(Le,{brighter(t){return t=t==null?Je:Math.pow(Je,t),new se(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ge:Math.pow(Ge,t),new se(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new J(_t(t>=240?t-240:t+120,a,r),_t(t,a,r),_t(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new se(cn(this.h),We(this.s),We(this.l),ze(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ze(this.opacity);return`${t===1?"hsl(":"hsla("}${cn(this.h)}, ${We(this.s)*100}%, ${We(this.l)*100}%${t===1?")":`, ${t})`}`}}));function cn(t){return t=(t||0)%360,t<0?t+360:t}function We(t){return Math.max(0,Math.min(1,t||0))}function _t(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Gt=t=>()=>t;function nr(t,e){return function(n){return t+n*e}}function ir(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function rr(t){return(t=+t)==1?Kn:function(e,n){return n-e?ir(e,n,t):Gt(isNaN(e)?n:e)}}function Kn(t,e){var n=e-t;return n?nr(t,n):Gt(isNaN(t)?e:t)}const un=function t(e){var n=rr(e);function r(a,s){var l=n((a=At(a)).r,(s=At(s)).r),f=n(a.g,s.g),u=n(a.b,s.b),d=Kn(a.opacity,s.opacity);return function(_){return a.r=l(_),a.g=f(_),a.b=u(_),a.opacity=d(_),a+""}}return r.gamma=t,r}(1);function ar(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=t[a]*(1-s)+e[a]*s;return r}}function or(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function sr(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)a[l]=Ht(t[l],e[l]);for(;l<n;++l)s[l]=e[l];return function(f){for(l=0;l<r;++l)s[l]=a[l](f);return s}}function lr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function et(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function cr(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=Ht(t[a],e[a]):r[a]=e[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var xt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pt=new RegExp(xt.source,"g");function ur(t){return function(){return t}}function dr(t){return function(e){return t(e)+""}}function fr(t,e){var n=xt.lastIndex=pt.lastIndex=0,r,a,s,l=-1,f=[],u=[];for(t=t+"",e=e+"";(r=xt.exec(t))&&(a=pt.exec(e));)(s=a.index)>n&&(s=e.slice(n,s),f[l]?f[l]+=s:f[++l]=s),(r=r[0])===(a=a[0])?f[l]?f[l]+=a:f[++l]=a:(f[++l]=null,u.push({i:l,x:et(r,a)})),n=pt.lastIndex;return n<e.length&&(s=e.slice(n),f[l]?f[l]+=s:f[++l]=s),f.length<2?u[0]?dr(u[0].x):ur(e):(e=u.length,function(d){for(var _=0,i;_<e;++_)f[(i=u[_]).i]=i.x(d);return f.join("")})}function Ht(t,e){var n=typeof e,r;return e==null||n==="boolean"?Gt(e):(n==="number"?et:n==="string"?(r=De(e))?(e=r,un):fr:e instanceof De?un:e instanceof Date?lr:or(e)?ar:Array.isArray(e)?sr:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?cr:et)(t,e)}function mr(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}const Mt=Math.PI,St=2*Mt,ke=1e-6,hr=St-ke;function Jn(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function _r(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Jn;const n=10**e;return function(r){this._+=r[0];for(let a=1,s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class pr{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Jn:_r(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,a){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,n,r,a,s,l){this._append`C${+e},${+n},${+r},${+a},${this._x1=+s},${this._y1=+l}`}arcTo(e,n,r,a,s){if(e=+e,n=+n,r=+r,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,f=this._y1,u=r-e,d=a-n,_=l-e,i=f-n,o=_*_+i*i;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(o>ke)if(!(Math.abs(i*u-d*_)>ke)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let c=r-l,m=a-f,p=u*u+d*d,g=c*c+m*m,h=Math.sqrt(p),v=Math.sqrt(o),k=s*Math.tan((Mt-Math.acos((p+o-g)/(2*h*v)))/2),b=k/v,A=k/h;Math.abs(b-1)>ke&&this._append`L${e+b*_},${n+b*i}`,this._append`A${s},${s},0,0,${+(i*c>_*m)},${this._x1=e+A*u},${this._y1=n+A*d}`}}arc(e,n,r,a,s,l){if(e=+e,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(a),u=r*Math.sin(a),d=e+f,_=n+u,i=1^l,o=l?a-s:s-a;this._x1===null?this._append`M${d},${_}`:(Math.abs(this._x1-d)>ke||Math.abs(this._y1-_)>ke)&&this._append`L${d},${_}`,r&&(o<0&&(o=o%St+St),o>hr?this._append`A${r},${r},0,1,${i},${e-f},${n-u}A${r},${r},0,1,${i},${this._x1=d},${this._y1=_}`:o>ke&&this._append`A${r},${r},0,${+(o>=Mt)},${i},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function gr(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function tt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Pe(t){return t=tt(Math.abs(t)),t?t[1]:NaN}function vr(t,e){return function(n,r){for(var a=n.length,s=[],l=0,f=t[0],u=0;a>0&&f>0&&(u+f+1>r&&(f=Math.max(1,r-u)),s.push(n.substring(a-=f,a+f)),!((u+=f+1)>r));)f=t[l=(l+1)%t.length];return s.reverse().join(e)}}function yr(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var kr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nt(t){if(!(e=kr.exec(t)))throw new Error("invalid format: "+t);var e;return new Dt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}nt.prototype=Dt.prototype;function Dt(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Dt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function br(t){e:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var zn;function wr(t,e){var n=tt(t,e);if(!n)return t+"";var r=n[0],a=n[1],s=a-(zn=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+tt(t,Math.max(0,e+s-1))[0]}function dn(t,e){var n=tt(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const fn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:gr,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>dn(t*100,e),r:dn,s:wr,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function mn(t){return t}var hn=Array.prototype.map,_n=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Tr(t){var e=t.grouping===void 0||t.thousands===void 0?mn:vr(hn.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?mn:yr(hn.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function d(i){i=nt(i);var o=i.fill,c=i.align,m=i.sign,p=i.symbol,g=i.zero,h=i.width,v=i.comma,k=i.precision,b=i.trim,A=i.type;A==="n"?(v=!0,A="g"):fn[A]||(k===void 0&&(k=12),b=!0,A="g"),(g||o==="0"&&c==="=")&&(g=!0,o="0",c="=");var I=p==="$"?n:p==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",w=p==="$"?r:/[%p]/.test(A)?l:"",F=fn[A],E=/[defgprs%]/.test(A);k=k===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function D(P){var B=I,x=w,M,C,te;if(A==="c")x=F(P)+x,P="";else{P=+P;var ae=P<0||1/P<0;if(P=isNaN(P)?u:F(Math.abs(P),k),b&&(P=br(P)),ae&&+P==0&&m!=="+"&&(ae=!1),B=(ae?m==="("?m:f:m==="-"||m==="("?"":m)+B,x=(A==="s"?_n[8+zn/3]:"")+x+(ae&&m==="("?")":""),E){for(M=-1,C=P.length;++M<C;)if(te=P.charCodeAt(M),48>te||te>57){x=(te===46?a+P.slice(M+1):P.slice(M))+x,P=P.slice(0,M);break}}}v&&!g&&(P=e(P,1/0));var oe=B.length+P.length+x.length,Z=oe<h?new Array(h-oe+1).join(o):"";switch(v&&g&&(P=e(Z+P,Z.length?h-x.length:1/0),Z=""),c){case"<":P=B+P+x+Z;break;case"=":P=B+Z+P+x;break;case"^":P=Z.slice(0,oe=Z.length>>1)+B+P+x+Z.slice(oe);break;default:P=Z+B+P+x;break}return s(P)}return D.toString=function(){return i+""},D}function _(i,o){var c=d((i=nt(i),i.type="f",i)),m=Math.max(-8,Math.min(8,Math.floor(Pe(o)/3)))*3,p=Math.pow(10,-m),g=_n[8+m/3];return function(h){return c(p*h)+g}}return{format:d,formatPrefix:_}}var Xe,it,ei;Ar({thousands:",",grouping:[3],currency:["$",""]});function Ar(t){return Xe=Tr(t),it=Xe.format,ei=Xe.formatPrefix,Xe}function xr(t){return Math.max(0,-Pe(Math.abs(t)))}function Mr(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pe(e)/3)))*3-Pe(Math.abs(t)))}function Sr(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Pe(e)-Pe(t))+1}function Bt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const pn=Symbol("implicit");function ti(){var t=new Wt,e=[],n=[],r=pn;function a(s){let l=t.get(s);if(l===void 0){if(r!==pn)return r;t.set(s,l=e.push(s)-1)}return n[l%n.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Wt;for(const l of s)t.has(l)||t.set(l,e.push(l)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return ti(e,n).unknown(r)},Bt.apply(a,arguments),a}function ni(){var t=ti().unknown(void 0),e=t.domain,n=t.range,r=0,a=1,s,l,f=!1,u=0,d=0,_=.5;delete t.unknown;function i(){var o=e().length,c=a<r,m=c?a:r,p=c?r:a;s=(p-m)/Math.max(1,o-u+d*2),f&&(s=Math.floor(s)),m+=(p-m-s*(o-u))*_,l=s*(1-u),f&&(m=Math.round(m),l=Math.round(l));var g=Fe(o).map(function(h){return m+s*h});return n(c?g.reverse():g)}return t.domain=function(o){return arguments.length?(e(o),i()):e()},t.range=function(o){return arguments.length?([r,a]=o,r=+r,a=+a,i()):[r,a]},t.rangeRound=function(o){return[r,a]=o,r=+r,a=+a,f=!0,i()},t.bandwidth=function(){return l},t.step=function(){return s},t.round=function(o){return arguments.length?(f=!!o,i()):f},t.padding=function(o){return arguments.length?(u=Math.min(1,d=+o),i()):u},t.paddingInner=function(o){return arguments.length?(u=Math.min(1,o),i()):u},t.paddingOuter=function(o){return arguments.length?(d=+o,i()):d},t.align=function(o){return arguments.length?(_=Math.max(0,Math.min(1,o)),i()):_},t.copy=function(){return ni(e(),[r,a]).round(f).paddingInner(u).paddingOuter(d).align(_)},Bt.apply(i(),arguments)}function Ir(t){return function(){return t}}function Er(t){return+t}var gn=[0,1];function Me(t){return t}function It(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ir(isNaN(e)?NaN:.5)}function Fr(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Pr(t,e,n){var r=t[0],a=t[1],s=e[0],l=e[1];return a<r?(r=It(a,r),s=n(l,s)):(r=It(r,a),s=n(s,l)),function(f){return s(r(f))}}function Or(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),s=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<r;)a[l]=It(t[l],t[l+1]),s[l]=n(e[l],e[l+1]);return function(f){var u=Ri(t,f,1,r)-1;return s[u](a[u](f))}}function Nr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Gr(){var t=gn,e=gn,n=Ht,r,a,s,l=Me,f,u,d;function _(){var o=Math.min(t.length,e.length);return l!==Me&&(l=Fr(t[0],t[o-1])),f=o>2?Or:Pr,u=d=null,i}function i(o){return o==null||isNaN(o=+o)?s:(u||(u=f(t.map(r),e,n)))(r(l(o)))}return i.invert=function(o){return l(a((d||(d=f(e,t.map(r),et)))(o)))},i.domain=function(o){return arguments.length?(t=Array.from(o,Er),_()):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),_()):e.slice()},i.rangeRound=function(o){return e=Array.from(o),n=mr,_()},i.clamp=function(o){return arguments.length?(l=o?!0:Me,_()):l!==Me},i.interpolate=function(o){return arguments.length?(n=o,_()):n},i.unknown=function(o){return arguments.length?(s=o,i):s},function(o,c){return r=o,a=c,_()}}function Hr(){return Gr()(Me,Me)}function Dr(t,e,n,r){var a=Vi(t,e,n),s;switch(r=nt(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Mr(a,l))&&(r.precision=s),ei(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Sr(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=xr(a))&&(r.precision=s-(r.type==="%")*2);break}}return it(r)}function Br(t){var e=t.domain;return t.ticks=function(n){var r=e();return ji(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return Dr(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,s=r.length-1,l=r[a],f=r[s],u,d,_=10;for(f<l&&(d=l,l=f,f=d,d=a,a=s,s=d);_-- >0;){if(d=Tt(l,f,n),d===u)return r[a]=l,r[s]=f,e(r);if(d>0)l=Math.floor(l/d)*d,f=Math.ceil(f/d)*d;else if(d<0)l=Math.ceil(l*d)/d,f=Math.floor(f*d)/d;else break;u=d}return t},t}function Be(){var t=Hr();return t.copy=function(){return Nr(t,Be())},Bt.apply(t,arguments),Br(t)}function ge(t){return function(){return t}}const vn=Math.abs,X=Math.atan2,ye=Math.cos,Rr=Math.max,gt=Math.min,ce=Math.sin,Se=Math.sqrt,K=1e-12,Re=Math.PI,rt=Re/2,Cr=2*Re;function Lr(t){return t>1?0:t<-1?Re:Math.acos(t)}function yn(t){return t>=1?rt:t<=-1?-rt:Math.asin(t)}function qr(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new pr(e)}function jr(t){return t.innerRadius}function Vr(t){return t.outerRadius}function $r(t){return t.startAngle}function Wr(t){return t.endAngle}function Xr(t){return t&&t.padAngle}function Qr(t,e,n,r,a,s,l,f){var u=n-t,d=r-e,_=l-a,i=f-s,o=i*u-_*d;if(!(o*o<K))return o=(_*(e-s)-i*(t-a))/o,[t+o*u,e+o*d]}function Qe(t,e,n,r,a,s,l){var f=t-n,u=e-r,d=(l?s:-s)/Se(f*f+u*u),_=d*u,i=-d*f,o=t+_,c=e+i,m=n+_,p=r+i,g=(o+m)/2,h=(c+p)/2,v=m-o,k=p-c,b=v*v+k*k,A=a-s,I=o*p-m*c,w=(k<0?-1:1)*Se(Rr(0,A*A*b-I*I)),F=(I*k-v*w)/b,E=(-I*v-k*w)/b,D=(I*k+v*w)/b,P=(-I*v+k*w)/b,B=F-g,x=E-h,M=D-g,C=P-h;return B*B+x*x>M*M+C*C&&(F=D,E=P),{cx:F,cy:E,x01:-_,y01:-i,x11:F*(a/A-1),y11:E*(a/A-1)}}function Yr(){var t=jr,e=Vr,n=ge(0),r=null,a=$r,s=Wr,l=Xr,f=null,u=qr(d);function d(){var _,i,o=+t.apply(this,arguments),c=+e.apply(this,arguments),m=a.apply(this,arguments)-rt,p=s.apply(this,arguments)-rt,g=vn(p-m),h=p>m;if(f||(f=_=u()),c<o&&(i=c,c=o,o=i),!(c>K))f.moveTo(0,0);else if(g>Cr-K)f.moveTo(c*ye(m),c*ce(m)),f.arc(0,0,c,m,p,!h),o>K&&(f.moveTo(o*ye(p),o*ce(p)),f.arc(0,0,o,p,m,h));else{var v=m,k=p,b=m,A=p,I=g,w=g,F=l.apply(this,arguments)/2,E=F>K&&(r?+r.apply(this,arguments):Se(o*o+c*c)),D=gt(vn(c-o)/2,+n.apply(this,arguments)),P=D,B=D,x,M;if(E>K){var C=yn(E/o*ce(F)),te=yn(E/c*ce(F));(I-=C*2)>K?(C*=h?1:-1,b+=C,A-=C):(I=0,b=A=(m+p)/2),(w-=te*2)>K?(te*=h?1:-1,v+=te,k-=te):(w=0,v=k=(m+p)/2)}var ae=c*ye(v),oe=c*ce(v),Z=o*ye(A),qe=o*ce(A);if(D>K){var je=c*ye(k),Ve=c*ce(k),ct=o*ye(b),ut=o*ce(b),he;if(g<Re)if(he=Qr(ae,oe,ct,ut,je,Ve,Z,qe)){var dt=ae-he[0],ft=oe-he[1],mt=je-he[0],ht=Ve-he[1],Rt=1/ce(Lr((dt*mt+ft*ht)/(Se(dt*dt+ft*ft)*Se(mt*mt+ht*ht)))/2),Ct=Se(he[0]*he[0]+he[1]*he[1]);P=gt(D,(o-Ct)/(Rt-1)),B=gt(D,(c-Ct)/(Rt+1))}else P=B=0}w>K?B>K?(x=Qe(ct,ut,ae,oe,c,B,h),M=Qe(je,Ve,Z,qe,c,B,h),f.moveTo(x.cx+x.x01,x.cy+x.y01),B<D?f.arc(x.cx,x.cy,B,X(x.y01,x.x01),X(M.y01,M.x01),!h):(f.arc(x.cx,x.cy,B,X(x.y01,x.x01),X(x.y11,x.x11),!h),f.arc(0,0,c,X(x.cy+x.y11,x.cx+x.x11),X(M.cy+M.y11,M.cx+M.x11),!h),f.arc(M.cx,M.cy,B,X(M.y11,M.x11),X(M.y01,M.x01),!h))):(f.moveTo(ae,oe),f.arc(0,0,c,v,k,!h)):f.moveTo(ae,oe),!(o>K)||!(I>K)?f.lineTo(Z,qe):P>K?(x=Qe(Z,qe,je,Ve,o,-P,h),M=Qe(ae,oe,ct,ut,o,-P,h),f.lineTo(x.cx+x.x01,x.cy+x.y01),P<D?f.arc(x.cx,x.cy,P,X(x.y01,x.x01),X(M.y01,M.x01),!h):(f.arc(x.cx,x.cy,P,X(x.y01,x.x01),X(x.y11,x.x11),!h),f.arc(0,0,o,X(x.cy+x.y11,x.cx+x.x11),X(M.cy+M.y11,M.cx+M.x11),h),f.arc(M.cx,M.cy,P,X(M.y11,M.x11),X(M.y01,M.x01),!h))):f.arc(0,0,o,A,b,h)}if(f.closePath(),_)return f=null,_+""||null}return d.centroid=function(){var _=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Re/2;return[ye(i)*_,ce(i)*_]},d.innerRadius=function(_){return arguments.length?(t=typeof _=="function"?_:ge(+_),d):t},d.outerRadius=function(_){return arguments.length?(e=typeof _=="function"?_:ge(+_),d):e},d.cornerRadius=function(_){return arguments.length?(n=typeof _=="function"?_:ge(+_),d):n},d.padRadius=function(_){return arguments.length?(r=_==null?null:typeof _=="function"?_:ge(+_),d):r},d.startAngle=function(_){return arguments.length?(a=typeof _=="function"?_:ge(+_),d):a},d.endAngle=function(_){return arguments.length?(s=typeof _=="function"?_:ge(+_),d):s},d.padAngle=function(_){return arguments.length?(l=typeof _=="function"?_:ge(+_),d):l},d.context=function(_){return arguments.length?(f=_??null,d):f},d}function kn(t,e,n){const r=t.slice();r[4]=e[n];const a=r[4]%1===0;r[5]=a;const s=r[2](r[4]);return r[6]=s,r}function Ur(t){let e,n=t[4]%4+1+"",r;return{c(){e=O("div"),r=$(n),this.h()},l(a){e=N(a,"DIV",{class:!0});var s=G(e);r=W(s,n),s.forEach(T),this.h()},h(){y(e,"class","number svelte-14i3nd7")},m(a,s){H(a,e,s),S(e,r)},p:V,d(a){a&&T(e)}}}function bn(t){let e,n,r,a,s=t[4]%1===0&&Ur(t);return{c(){e=O("div"),s&&s.c(),n=q(),r=O("div"),a=q(),this.h()},l(l){e=N(l,"DIV",{class:!0});var f=G(e);s&&s.l(f),n=j(f),r=N(f,"DIV",{class:!0}),G(r).forEach(T),a=j(f),f.forEach(T),this.h()},h(){y(r,"class","line svelte-14i3nd7"),be(r,"thick",t[5]),y(e,"class","group svelte-14i3nd7"),Q(e,"left",`${t[6]}px`)},m(l,f){H(l,e,f),s&&s.m(e,null),S(e,n),S(e,r),S(e,a)},p(l,f){l[4]%1===0&&s.p(l,f)},d(l){l&&T(e),s&&s.d()}}}function Zr(t){let e,n,r,a=Fe(0,t[0],1/t[1]),s=[];for(let l=0;l<a.length;l+=1)s[l]=bn(kn(t,a,l));return{c(){e=O("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=N(l,"DIV",{class:!0});var f=G(e);for(let u=0;u<s.length;u+=1)s[u].l(f);f.forEach(T),this.h()},h(){y(e,"class","grid svelte-14i3nd7")},m(l,f){H(l,e,f);for(let u=0;u<s.length;u+=1)s[u].m(e,null);r=!0},p(l,[f]){if(t=l,f&7){a=Fe(0,t[0],1/t[1]);let u;for(u=0;u<a.length;u+=1){const d=kn(t,a,u);s[u]?s[u].p(d,f):(s[u]=bn(d),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=a.length}},i(l){r||(Pt(()=>{n||(n=Ue(e,en,{delay:100,duration:400,easing:Jt},!0)),n.run(1)}),r=!0)},o(l){n||(n=Ue(e,en,{delay:100,duration:400,easing:Jt},!1)),n.run(0),r=!1},d(l){l&&T(e),de(s,l),l&&n&&n.end()}}}function Kr(t){const{beatsPerRotation:e,division:n,getXScale:r}=ot("song"),a=r();return[e,n,a]}class Jr extends z{constructor(e){super(),ee(this,e,Kr,Zr,U,{})}}function wn(t,e,n){const r=t.slice();r[16]=e[n],r[21]=n;const a=r[5](r[16]);r[17]=a;const s=r[21]+1<r[0].length?r[0][r[21]+1]:r[5].domain()[1];r[18]=s;const l=r[5](r[18])-r[17];return r[19]=l,r}function Tn(t){let e,n;return e=new Jr({}),{c(){ne(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,a){ie(e,r,a),n=!0},i(r){n||(R(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){re(e,r)}}}function An(t,e){let n,r,a;return r=new Ni({props:{note:e[16],instrumentId:e[1],height:e[2],width:e[19],x:e[17],color:e[10][e[1]]}}),{key:t,first:null,c(){n=Y(),ne(r.$$.fragment),this.h()},l(s){n=Y(),le(r.$$.fragment,s),this.h()},h(){this.first=n},m(s,l){H(s,n,l),ie(r,s,l),a=!0},p(s,l){e=s;const f={};l&1&&(f.note=e[16]),l&2&&(f.instrumentId=e[1]),l&4&&(f.height=e[2]),l&33&&(f.width=e[19]),l&33&&(f.x=e[17]),l&2&&(f.color=e[10][e[1]]),r.$set(f)},i(s){a||(R(r.$$.fragment,s),a=!0)},o(s){L(r.$$.fragment,s),a=!1},d(s){s&&T(n),re(r,s)}}}function zr(t){let e,n,r,a=[],s=new Map,l,f,u,d=t[4][t[1]]==="on"&&Tn(),_=t[0];const i=o=>`${o[1]}-${o[21]}`;for(let o=0;o<_.length;o+=1){let c=wn(t,_,o),m=i(c);s.set(m,a[o]=An(m,c))}return{c(){e=O("div"),d&&d.c(),n=q(),r=O("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=N(o,"DIV",{class:!0});var c=G(e);d&&d.l(c),n=j(c),r=N(c,"DIV",{class:!0});var m=G(r);for(let p=0;p<a.length;p+=1)a[p].l(m);m.forEach(T),c.forEach(T),this.h()},h(){y(r,"class","notes svelte-1aci5g5"),y(e,"class","instrument svelte-1aci5g5"),be(e,"muted",t[3][t[1]]==="off"),Q(e,"height",`${t[2]}px`)},m(o,c){H(o,e,c),d&&d.m(e,null),S(e,n),S(e,r);for(let m=0;m<a.length;m+=1)a[m].m(r,null);l=!0,f||(u=[ve(e,"click",t[11]),ve(e,"keydown",t[12])],f=!0)},p(o,[c]){o[4][o[1]]==="on"?d?c&18&&R(d,1):(d=Tn(),d.c(),R(d,1),d.m(e,n)):d&&(fe(),L(d,1,1,()=>{d=null}),me()),c&1063&&(_=o[0],fe(),a=li(a,c,i,1,o,_,s,r,ci,An,null,wn),me()),(!l||c&10)&&be(e,"muted",o[3][o[1]]==="off"),c&4&&Q(e,"height",`${o[2]}px`)},i(o){if(!l){R(d);for(let c=0;c<_.length;c+=1)R(a[c]);l=!0}},o(o){L(d);for(let c=0;c<a.length;c+=1)L(a[c]);l=!1},d(o){o&&T(e),d&&d.d();for(let c=0;c<a.length;c+=1)a[c].d();f=!1,st(u)}}}function ea(t,e,n){let r,a,s,{data:l}=e,{id:f}=e,{height:u}=e;const{getXScale:d,getInstrumentToggles:_,getGridToggles:i}=ot("song"),o=d();pe(t,o,k=>n(5,s=k));const c=_();pe(t,c,k=>n(3,r=k));const m=i();pe(t,m,k=>n(4,a=k));const p=k=>{bt(c,r[k]=r[k]==="on"?"off":"on",r)},g={snare:"#96c8d7",hihat:"gold",kick:"#550e5c"},h=()=>p(f),v=()=>p(f);return t.$$set=k=>{"data"in k&&n(0,l=k.data),"id"in k&&n(1,f=k.id),"height"in k&&n(2,u=k.height)},[l,f,u,r,a,s,o,c,m,p,g,h,v]}class ta extends z{constructor(e){super(),ee(this,e,ea,zr,U,{data:0,id:1,height:2})}}const vt={hihat:[45,42,44],kick:[55,36,53],snare:[52,38]},na=(t,e,n)=>{const r=e.header.tempos[0].bpm,a=e.header.ppq,s=6e4/r/a,l=e.tracks[0].endOfTrackTicks,f=Be().domain([0,s*l/1e3]).range([0,n]),u=e.tracks[0].notes.map(d=>({beat:f(d.time),instrument:d.midi}));return console.log({beats:u}),{hihat:u.filter(d=>vt.hihat.includes(d.instrument)).map(d=>d.beat),snare:u.filter(d=>vt.snare.includes(d.instrument)).map(d=>d.beat),kick:u.filter(d=>vt.kick.includes(d.instrument)).map(d=>d.beat)}},ia={keySignatures:[{key:"C",scale:"major",ticks:0}],meta:[],name:"Beat Machine",ppq:480,tempos:[{bpm:107.99991360006912,ticks:0},{bpm:107.99991360006912,ticks:1920},{bpm:107.99991360006912,ticks:5280}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}]},ra=[{channel:0,controlChanges:{},pitchBends:[],instrument:{family:"piano",number:0,name:"acoustic grand piano"},name:"Beat Machine",notes:[{duration:.11574083333333335,durationTicks:100,midi:36,name:"C2",ticks:0,time:0,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:0,time:0,velocity:.7716535433070866},{duration:.16435198333333328,durationTicks:142,midi:36,name:"C2",ticks:280,time:.3240743333333334,velocity:.7716535433070866},{duration:.1689816166666666,durationTicks:146,midi:42,name:"F#2",ticks:280,time:.3240743333333334,velocity:.7716535433070866},{duration:.15277790000000002,durationTicks:132,midi:38,name:"D2",ticks:549,time:.6354171750000001,velocity:.7716535433070866},{duration:.16898161666666678,durationTicks:146,midi:42,name:"F#2",ticks:549,time:.6354171750000001,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:840,time:.9722230000000001,velocity:.7716535433070866},{duration:.16782420833333322,durationTicks:145,midi:42,name:"F#2",ticks:1113,time:1.2881954750000002,velocity:.7716535433070866},{duration:.11574083333333318,durationTicks:100,midi:36,name:"C2",ticks:1124,time:1.3009269666666667,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:1400,time:1.6203716666666668,velocity:.7716535433070866},{duration:.11574083333333318,durationTicks:100,midi:36,name:"C2",ticks:1420,time:1.6435198333333336,velocity:.7716535433070866},{duration:.09722229999999987,durationTicks:84,midi:36,name:"C2",ticks:1600,time:1.8518533333333336,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:1680,time:1.9444460000000001,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:1940,time:2.245372166666667,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:2220,time:2.5694465,velocity:.7716535433070866},{duration:.11574083333333363,durationTicks:100,midi:36,name:"C2",ticks:2240,time:2.592594666666667,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:2500,time:2.8935208333333335,velocity:.7716535433070866},{duration:.16435198333333334,durationTicks:142,midi:36,name:"C2",ticks:2520,time:2.916669,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:2769,time:3.2048636750000004,velocity:.7716535433070866},{duration:.11921305833333351,durationTicks:103,midi:38,name:"D2",ticks:2780,time:3.217595166666667,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:3060,time:3.5416695000000002,velocity:.7716535433070866},{duration:.16782420833333367,durationTicks:145,midi:42,name:"F#2",ticks:3333,time:3.8576419750000004,velocity:.7716535433070866},{duration:.11574083333333407,durationTicks:100,midi:36,name:"C2",ticks:3364,time:3.8935216333333336,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:3620,time:4.189818166666667,velocity:.7716535433070866},{duration:.11574083333333363,durationTicks:100,midi:36,name:"C2",ticks:3660,time:4.2361145,velocity:.7716535433070866},{duration:.09722229999999943,durationTicks:84,midi:36,name:"C2",ticks:3840,time:4.444448,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:3900,time:4.513892500000001,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:4160,time:4.8148186666666675,velocity:.7716535433070866}],endOfTrackTicks:4100}],aa={header:ia,tracks:ra},oa={keySignatures:[{key:"C",scale:"major",ticks:0}],meta:[],name:"kick",ppq:480,tempos:[{bpm:120,ticks:0}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}]},sa=[{channel:0,controlChanges:{},pitchBends:[],instrument:{family:"piano",number:0,name:"acoustic grand piano"},name:"kick",notes:[{duration:.09270833333333334,durationTicks:89,midi:45,name:"A2",ticks:0,time:0,velocity:.6929133858267716},{duration:.11145833333333334,durationTicks:107,midi:55,name:"G3",ticks:0,time:0,velocity:.6929133858267716},{duration:.11875000000000002,durationTicks:114,midi:45,name:"A2",ticks:420,time:.4375,velocity:.6929133858267716},{duration:.10729166666666667,durationTicks:103,midi:52,name:"E3",ticks:647,time:.6739583333333333,velocity:.6929133858267716},{duration:.09270833333333328,durationTicks:89,midi:45,name:"A2",ticks:720,time:.75,velocity:.6929133858267716},{duration:.10729166666666656,durationTicks:103,midi:45,name:"A2",ticks:1e3,time:1.0416666666666667,velocity:.6929133858267716},{duration:.08437499999999987,durationTicks:81,midi:45,name:"A2",ticks:1334,time:1.3895833333333334,velocity:.6929133858267716},{duration:.13854166666666656,durationTicks:133,midi:45,name:"A2",ticks:1680,time:1.75,velocity:.6929133858267716},{duration:.1708333333333334,durationTicks:164,midi:52,name:"E3",ticks:1920,time:2,velocity:.6929133858267716},{duration:.08437500000000009,durationTicks:81,midi:45,name:"A2",ticks:1980,time:2.0625,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:2320,time:2.4166666666666665,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:2551,time:2.6572916666666666,velocity:.6929133858267716},{duration:.1791666666666667,durationTicks:172,midi:55,name:"G3",ticks:2571,time:2.678125,velocity:.6929133858267716},{duration:.11875000000000036,durationTicks:114,midi:45,name:"A2",ticks:2920,time:3.0416666666666665,velocity:.6929133858267716},{duration:.1552083333333334,durationTicks:149,midi:52,name:"E3",ticks:3175,time:3.3072916666666665,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:3220,time:3.3541666666666665,velocity:.6929133858267716},{duration:.10729166666666634,durationTicks:103,midi:45,name:"A2",ticks:3500,time:3.6458333333333335,velocity:.6929133858267716},{duration:.08437500000000009,durationTicks:81,midi:45,name:"A2",ticks:3834,time:3.99375,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:4180,time:4.354166666666667,velocity:.6929133858267716},{duration:.13229166666666625,durationTicks:127,midi:52,name:"E3",ticks:4440,time:4.625,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:4480,time:4.666666666666667,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:4820,time:5.020833333333333,velocity:.6929133858267716},{duration:.1552083333333334,durationTicks:149,midi:55,name:"G3",ticks:5055,time:5.265625,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:5100,time:5.3125,velocity:.6929133858267716},{duration:.11874999999999947,durationTicks:114,midi:45,name:"A2",ticks:5470,time:5.697916666666667,velocity:.6929133858267716},{duration:.09583333333333321,durationTicks:92,midi:52,name:"E3",ticks:5714,time:5.952083333333333,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:5770,time:6.010416666666667,velocity:.6929133858267716},{duration:.10729166666666679,durationTicks:103,midi:45,name:"A2",ticks:6050,time:6.302083333333333,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:6384,time:6.65,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:6730,time:7.010416666666667,velocity:.6929133858267716},{duration:.1552083333333334,durationTicks:149,midi:52,name:"E3",ticks:6980,time:7.270833333333333,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:7030,time:7.322916666666667,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:7370,time:7.677083333333333,velocity:.6929133858267716},{duration:.0927083333333325,durationTicks:89,midi:45,name:"A2",ticks:7601,time:7.917708333333334,velocity:.6929133858267716},{duration:.13437500000000036,durationTicks:129,midi:55,name:"G3",ticks:7626,time:7.94375,velocity:.6929133858267716},{duration:.11874999999999858,durationTicks:114,midi:45,name:"A2",ticks:7970,time:8.302083333333334,velocity:.6929133858267716},{duration:.14583333333333215,durationTicks:140,midi:52,name:"E3",ticks:8240,time:8.583333333333334,velocity:.6929133858267716},{duration:.0927083333333325,durationTicks:89,midi:45,name:"A2",ticks:8270,time:8.614583333333334,velocity:.6929133858267716},{duration:.10729166666666679,durationTicks:103,midi:45,name:"A2",ticks:8550,time:8.90625,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:8884,time:9.254166666666666,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:9230,time:9.614583333333334,velocity:.6929133858267716},{duration:.1437500000000007,durationTicks:138,midi:52,name:"E3",ticks:9507,time:9.903125,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:9530,time:9.927083333333334,velocity:.6929133858267716},{duration:.14374999999999893,durationTicks:138,midi:52,name:"E3",ticks:9740,time:10.145833333333334,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:9870,time:10.28125,velocity:.6929133858267716}],endOfTrackTicks:10200}],la={header:oa,tracks:sa},ca={keySignatures:[{key:"C",scale:"major",ticks:0}],meta:[],name:"Beat Machine",ppq:480,tempos:[{bpm:183.99997546666995,ticks:0}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}]},ua=[{channel:0,controlChanges:{},pitchBends:[],instrument:{family:"piano",number:0,name:"acoustic grand piano"},name:"Beat Machine",notes:[{duration:.09986414375,durationTicks:147,midi:44,name:"G#2",ticks:0,time:0,velocity:.7716535433070866},{duration:.13790762708333332,durationTicks:203,midi:53,name:"F3",ticks:0,time:0,velocity:.7716535433070866},{duration:.09986414375,durationTicks:147,midi:44,name:"G#2",ticks:240,time:.16304349999999998,velocity:.7716535433070866},{duration:.07744566250000001,durationTicks:114,midi:44,name:"G#2",ticks:480,time:.32608699999999996,velocity:.7716535433070866},{duration:.11413045,durationTicks:168,midi:52,name:"E3",ticks:480,time:.32608699999999996,velocity:.7716535433070866},{duration:.11480979791666668,durationTicks:169,midi:44,name:"G#2",ticks:720,time:.4891304999999999,velocity:.7716535433070866},{duration:.13858697500000006,durationTicks:204,midi:53,name:"F3",ticks:720,time:.4891304999999999,velocity:.7716535433070866},{duration:.06793479166666672,durationTicks:100,midi:44,name:"G#2",ticks:960,time:.6521739999999999,velocity:.7716535433070866},{duration:.08763588124999988,durationTicks:129,midi:44,name:"G#2",ticks:1200,time:.8152174999999999,velocity:.7716535433070866},{duration:.15353262916666655,durationTicks:226,midi:53,name:"F3",ticks:1200,time:.8152174999999999,velocity:.7716535433070866},{duration:.09986414375000008,durationTicks:147,midi:44,name:"G#2",ticks:1440,time:.9782609999999998,velocity:.7716535433070866},{duration:.11073371041666658,durationTicks:163,midi:52,name:"E3",ticks:1440,time:.9782609999999998,velocity:.7716535433070866},{duration:.10054349166666654,durationTicks:148,midi:44,name:"G#2",ticks:1680,time:1.1413045,velocity:.7716535433070866},{duration:.11277175416666663,durationTicks:166,midi:44,name:"G#2",ticks:1920,time:1.3043479999999998,velocity:.7716535433070866},{duration:.1399456708333331,durationTicks:206,midi:53,name:"F3",ticks:1920,time:1.3043479999999998,velocity:.7716535433070866},{duration:.10054349166666676,durationTicks:148,midi:44,name:"G#2",ticks:2160,time:1.4673914999999997,velocity:.7716535433070866},{duration:.07472827083333344,durationTicks:110,midi:44,name:"G#2",ticks:2400,time:1.6304349999999999,velocity:.7716535433070866},{duration:.11073371041666658,durationTicks:163,midi:52,name:"E3",ticks:2400,time:1.6304349999999999,velocity:.7716535433070866},{duration:.1216032770833333,durationTicks:179,midi:44,name:"G#2",ticks:2640,time:1.7934784999999998,velocity:.7716535433070866},{duration:.13586958333333343,durationTicks:200,midi:53,name:"F3",ticks:2640,time:1.7934784999999998,velocity:.7716535433070866},{duration:.11480979791666668,durationTicks:169,midi:44,name:"G#2",ticks:2880,time:1.9565219999999997,velocity:.7716535433070866},{duration:.11345110208333331,durationTicks:167,midi:44,name:"G#2",ticks:3120,time:2.1195654999999998,velocity:.7716535433070866},{duration:.11480979791666668,durationTicks:169,midi:53,name:"F3",ticks:3120,time:2.1195654999999998,velocity:.7716535433070866},{duration:.08763588124999977,durationTicks:129,midi:44,name:"G#2",ticks:3360,time:2.282609,velocity:.7716535433070866},{duration:.1501358895833329,durationTicks:221,midi:52,name:"E3",ticks:3360,time:2.282609,velocity:.7716535433070866},{duration:.10054349166666698,durationTicks:148,midi:44,name:"G#2",ticks:3600,time:2.4456524999999996,velocity:.7716535433070866},{duration:.07676631458333372,durationTicks:113,midi:44,name:"G#2",ticks:3840,time:2.6086959999999997,velocity:.7716535433070866},{duration:.15013588958333335,durationTicks:221,midi:53,name:"F3",ticks:3840,time:2.6086959999999997,velocity:.7716535433070866},{duration:.0638587041666665,durationTicks:94,midi:44,name:"G#2",ticks:4080,time:2.7717395,velocity:.7716535433070866},{duration:.08831522916666712,durationTicks:130,midi:44,name:"G#2",ticks:4320,time:2.9347829999999995,velocity:.7716535433070866},{duration:.11209240624999994,durationTicks:165,midi:52,name:"E3",ticks:4320,time:2.9347829999999995,velocity:.7716535433070866},{duration:.09986414375000008,durationTicks:147,midi:44,name:"G#2",ticks:4560,time:3.0978264999999996,velocity:.7716535433070866},{duration:.11345110208333331,durationTicks:167,midi:53,name:"F3",ticks:4560,time:3.0978264999999996,velocity:.7716535433070866},{duration:.07336957499999963,durationTicks:108,midi:44,name:"G#2",ticks:4800,time:3.2608699999999997,velocity:.7716535433070866},{duration:.11209240625000039,durationTicks:165,midi:44,name:"G#2",ticks:5040,time:3.4239134999999994,velocity:.7716535433070866},{duration:.11480979791666668,durationTicks:169,midi:53,name:"F3",ticks:5040,time:3.4239134999999994,velocity:.7716535433070866},{duration:.09239131666666678,durationTicks:136,midi:44,name:"G#2",ticks:5280,time:3.5869569999999995,velocity:.7716535433070866},{duration:.15149458541666672,durationTicks:223,midi:52,name:"E3",ticks:5280,time:3.5869569999999995,velocity:.7716535433070866},{duration:.07336957499999963,durationTicks:108,midi:44,name:"G#2",ticks:5520,time:3.7500004999999996,velocity:.7716535433070866},{duration:.07404892291666654,durationTicks:109,midi:44,name:"G#2",ticks:5760,time:3.9130439999999993,velocity:.7716535433070866},{duration:.14130436666666668,durationTicks:208,midi:53,name:"F3",ticks:5760,time:3.9130439999999993,velocity:.7716535433070866},{duration:.07676631458333283,durationTicks:113,midi:44,name:"G#2",ticks:6e3,time:4.0760875,velocity:.7716535433070866},{duration:.08763588124999977,durationTicks:129,midi:44,name:"G#2",ticks:6240,time:4.2391309999999995,velocity:.7716535433070866},{duration:.14877719374999998,durationTicks:219,midi:52,name:"E3",ticks:6240,time:4.2391309999999995,velocity:.7716535433070866},{duration:.07404892291666698,durationTicks:109,midi:44,name:"G#2",ticks:6480,time:4.402174499999999,velocity:.7716535433070866},{duration:.11277175416666729,durationTicks:166,midi:53,name:"F3",ticks:6480,time:4.402174499999999,velocity:.7716535433070866},{duration:.09171196874999943,durationTicks:135,midi:44,name:"G#2",ticks:6720,time:4.565218,velocity:.7716535433070866},{duration:.07336957500000008,durationTicks:108,midi:44,name:"G#2",ticks:6960,time:4.7282614999999995,velocity:.7716535433070866},{duration:.12092392916666661,durationTicks:178,midi:53,name:"F3",ticks:6960,time:4.7282614999999995,velocity:.7716535433070866},{duration:.08899457708333358,durationTicks:131,midi:44,name:"G#2",ticks:7200,time:4.891304999999999,velocity:.7716535433070866},{duration:.1419837145833336,durationTicks:209,midi:52,name:"E3",ticks:7200,time:4.891304999999999,velocity:.7716535433070866},{duration:.09171196874999943,durationTicks:135,midi:44,name:"G#2",ticks:7440,time:5.0543485,velocity:.7716535433070866}],endOfTrackTicks:7680}],da={header:ca,tracks:ua},fa={keySignatures:[{key:"C",scale:"major",ticks:0}],meta:[],name:"Beat Machine",ppq:480,tempos:[{bpm:96,ticks:0}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}]},ma=[{channel:0,controlChanges:{},pitchBends:[],instrument:{family:"piano",number:0,name:"acoustic grand piano"},name:"Beat Machine",notes:[{duration:.10546875,durationTicks:81,midi:42,name:"F#2",ticks:0,time:0,velocity:.7716535433070866},{duration:.08854166666666669,durationTicks:68,midi:42,name:"F#2",ticks:262,time:.3411458333333333,velocity:.7716535433070866},{duration:.06901041666666663,durationTicks:53,midi:42,name:"F#2",ticks:402,time:.5234375,velocity:.7716535433070866},{duration:.10026041666666663,durationTicks:77,midi:42,name:"F#2",ticks:480,time:.625,velocity:.7716535433070866},{duration:.06901041666666663,durationTicks:53,midi:42,name:"F#2",ticks:722,time:.9401041666666666,velocity:.7716535433070866},{duration:.10026041666666652,durationTicks:77,midi:42,name:"F#2",ticks:866,time:1.1276041666666667,velocity:.7716535433070866},{duration:.10546875,durationTicks:81,midi:42,name:"F#2",ticks:960,time:1.25,velocity:.7716535433070866},{duration:.08854166666666652,durationTicks:68,midi:42,name:"F#2",ticks:1222,time:1.5911458333333335,velocity:.7716535433070866},{duration:.06901041666666652,durationTicks:53,midi:42,name:"F#2",ticks:1362,time:1.7734375,velocity:.7716535433070866},{duration:.10026041666666674,durationTicks:77,midi:42,name:"F#2",ticks:1440,time:1.875,velocity:.7716535433070866},{duration:.06901041666666652,durationTicks:53,midi:42,name:"F#2",ticks:1682,time:2.190104166666667,velocity:.7716535433070866},{duration:.10026041666666652,durationTicks:77,midi:42,name:"F#2",ticks:1826,time:2.3776041666666665,velocity:.7716535433070866},{duration:.10546875,durationTicks:81,midi:42,name:"F#2",ticks:1920,time:2.5,velocity:.7716535433070866},{duration:.08854166666666652,durationTicks:68,midi:42,name:"F#2",ticks:2182,time:2.8411458333333335,velocity:.7716535433070866},{duration:.06901041666666696,durationTicks:53,midi:42,name:"F#2",ticks:2322,time:3.0234375,velocity:.7716535433070866},{duration:.10026041666666652,durationTicks:77,midi:42,name:"F#2",ticks:2400,time:3.125,velocity:.7716535433070866},{duration:.06901041666666652,durationTicks:53,midi:42,name:"F#2",ticks:2642,time:3.4401041666666665,velocity:.7716535433070866},{duration:.10026041666666696,durationTicks:77,midi:42,name:"F#2",ticks:2786,time:3.6276041666666665,velocity:.7716535433070866},{duration:.10546875,durationTicks:81,midi:42,name:"F#2",ticks:2880,time:3.75,velocity:.7716535433070866},{duration:.08854166666666696,durationTicks:68,midi:42,name:"F#2",ticks:3142,time:4.091145833333333,velocity:.7716535433070866},{duration:.06901041666666696,durationTicks:53,midi:42,name:"F#2",ticks:3282,time:4.2734375,velocity:.7716535433070866},{duration:.10026041666666607,durationTicks:77,midi:42,name:"F#2",ticks:3360,time:4.375,velocity:.7716535433070866},{duration:.06901041666666696,durationTicks:53,midi:42,name:"F#2",ticks:3602,time:4.690104166666666,velocity:.7716535433070866},{duration:.10026041666666785,durationTicks:77,midi:42,name:"F#2",ticks:3746,time:4.877604166666666,velocity:.7716535433070866}],endOfTrackTicks:3840}],ha={header:fa,tracks:ma},_a={keySignatures:[{key:"C",scale:"major",ticks:0}],meta:[],name:"Beat Machine",ppq:480,tempos:[{bpm:96,ticks:0}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}]},pa=[{channel:0,controlChanges:{},pitchBends:[],instrument:{family:"piano",number:0,name:"acoustic grand piano"},name:"Beat Machine",notes:[{duration:.10546875,durationTicks:81,midi:42,name:"F#2",ticks:0,time:0,velocity:.7716535433070866},{duration:.08854166666666669,durationTicks:68,midi:42,name:"F#2",ticks:240,time:.3125,velocity:.7716535433070866},{duration:.0703125,durationTicks:54,midi:42,name:"F#2",ticks:360,time:.46875,velocity:.7716535433070866},{duration:.10026041666666663,durationTicks:77,midi:42,name:"F#2",ticks:480,time:.625,velocity:.7716535433070866},{duration:.0703125,durationTicks:54,midi:42,name:"F#2",ticks:720,time:.9375,velocity:.7716535433070866},{duration:.10546875,durationTicks:81,midi:42,name:"F#2",ticks:960,time:1.25,velocity:.7716535433070866},{duration:.08854166666666652,durationTicks:68,midi:42,name:"F#2",ticks:1200,time:1.5625,velocity:.7716535433070866},{duration:.0703125,durationTicks:54,midi:42,name:"F#2",ticks:1320,time:1.71875,velocity:.7716535433070866},{duration:.10026041666666674,durationTicks:77,midi:42,name:"F#2",ticks:1440,time:1.875,velocity:.7716535433070866},{duration:.0703125,durationTicks:54,midi:42,name:"F#2",ticks:1680,time:2.1875,velocity:.7716535433070866},{duration:.10546875,durationTicks:81,midi:42,name:"F#2",ticks:1920,time:2.5,velocity:.7716535433070866},{duration:.08854166666666652,durationTicks:68,midi:42,name:"F#2",ticks:2160,time:2.8125,velocity:.7716535433070866},{duration:.0703125,durationTicks:54,midi:42,name:"F#2",ticks:2280,time:2.96875,velocity:.7716535433070866},{duration:.10026041666666652,durationTicks:77,midi:42,name:"F#2",ticks:2400,time:3.125,velocity:.7716535433070866},{duration:.0703125,durationTicks:54,midi:42,name:"F#2",ticks:2640,time:3.4375,velocity:.7716535433070866},{duration:.10546875,durationTicks:81,midi:42,name:"F#2",ticks:2880,time:3.75,velocity:.7716535433070866},{duration:.08854166666666696,durationTicks:68,midi:42,name:"F#2",ticks:3120,time:4.0625,velocity:.7716535433070866},{duration:.0703125,durationTicks:54,midi:42,name:"F#2",ticks:3240,time:4.21875,velocity:.7716535433070866},{duration:.10026041666666607,durationTicks:77,midi:42,name:"F#2",ticks:3360,time:4.375,velocity:.7716535433070866},{duration:.0703125,durationTicks:54,midi:42,name:"F#2",ticks:3600,time:4.6875,velocity:.7716535433070866}],endOfTrackTicks:3840}],ga={header:_a,tracks:pa};function xn(t,e,n){const r=t.slice();return r[23]=e[n],r[25]=n,r}function Mn(t){let e,n,r=Object.keys(t[3]),a=[];for(let l=0;l<r.length;l+=1)a[l]=Sn(xn(t,r,l));const s=l=>L(a[l],1,1,()=>{a[l]=null});return{c(){for(let l=0;l<a.length;l+=1)a[l].c();e=Y()},l(l){for(let f=0;f<a.length;f+=1)a[f].l(l);e=Y()},m(l,f){for(let u=0;u<a.length;u+=1)a[u].m(l,f);H(l,e,f),n=!0},p(l,f){if(f&12){r=Object.keys(l[3]);let u;for(u=0;u<r.length;u+=1){const d=xn(l,r,u);a[u]?(a[u].p(d,f),R(a[u],1)):(a[u]=Sn(d),a[u].c(),R(a[u],1),a[u].m(e.parentNode,e))}for(fe(),u=r.length;u<a.length;u+=1)s(u);me()}},i(l){if(!n){for(let f=0;f<r.length;f+=1)R(a[f]);n=!0}},o(l){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)L(a[f]);n=!1},d(l){de(a,l),l&&T(e)}}}function Sn(t){let e,n;return e=new ta({props:{data:t[3][t[23]],id:t[23],height:t[2]}}),{c(){ne(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,a){ie(e,r,a),n=!0},p(r,a){const s={};a&4&&(s.height=r[2]),e.$set(s)},i(r){n||(R(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){re(e,r)}}}function va(t){let e,n=t[0].toFixed(2)+"",r,a,s,l,f,u,d,_,i,o,c,m,p,g,h=t[1]&&Mn(t);return{c(){e=O("p"),r=$(n),a=q(),s=O("div"),l=O("div"),h&&h.c(),u=q(),d=O("button"),_=$("play"),i=q(),o=O("button"),c=$("pause"),this.h()},l(v){e=N(v,"P",{});var k=G(e);r=W(k,n),k.forEach(T),a=j(v),s=N(v,"DIV",{class:!0});var b=G(s);l=N(b,"DIV",{class:!0});var A=G(l);h&&h.l(A),A.forEach(T),b.forEach(T),u=j(v),d=N(v,"BUTTON",{});var I=G(d);_=W(I,"play"),I.forEach(T),i=j(v),o=N(v,"BUTTON",{});var w=G(o);c=W(w,"pause"),w.forEach(T),this.h()},h(){y(l,"class","instruments svelte-1cqahtz"),Pt(()=>t[12].call(l)),y(s,"class","container svelte-1cqahtz"),Q(s,"height",`${ii}px`)},m(v,k){H(v,e,k),S(e,r),H(v,a,k),H(v,s,k),S(s,l),h&&h.m(l,null),f=ui(l,t[12].bind(l)),H(v,u,k),H(v,d,k),S(d,_),H(v,i,k),H(v,o,k),S(o,c),m=!0,p||(g=[ve(d,"click",t[6]),ve(o,"click",t[7])],p=!0)},p(v,[k]){(!m||k&1)&&n!==(n=v[0].toFixed(2)+"")&&at(r,n),v[1]?h?(h.p(v,k),k&2&&R(h,1)):(h=Mn(v),h.c(),R(h,1),h.m(l,null)):h&&(fe(),L(h,1,1,()=>{h=null}),me())},i(v){m||(R(h),m=!0)},o(v){L(h),m=!1},d(v){v&&T(e),v&&T(a),v&&T(s),h&&h.d(),f(),v&&T(u),v&&T(d),v&&T(i),v&&T(o),p=!1,st(g)}}}let ya=2;const ii=500;function ka(t,e,n){let r,a,s,l,f,{id:u}=e,{beatsPerRotation:d}=e;const _=new Howl({src:[`assets/sound/${u}.mp3`]}),o=na(u,{kamaal:aa,sincerity:la,lightSwitch:da,dmatSwung:ha,dmatStraight:ga}[u],d);Ze("song",{beatsPerRotation:d,division:ya,getT:()=>c,getXScale:()=>m,getInstrumentToggles:()=>h,getGridToggles:()=>v,getCycleDuration:()=>r});const c=Oe(0);pe(t,c,D=>n(16,f=D));const m=Oe(void 0);pe(t,m,D=>n(15,l=D));let p,g=0;const h=Oe({hihat:"on",snare:"on",kick:"on"}),v=Oe({hihat:"off",snare:"off",kick:"off"});let k,b=()=>0;_.on("load",()=>{A()});const A=()=>{n(10,b=Be().domain([0,_.duration()*1e3]).range([0,d]))};_.on("end",()=>{I()});const I=()=>{_.play(),p=requestAnimationFrame(F)},w=()=>{cancelAnimationFrame(p),_.pause()},F=()=>{n(0,g=_.seek()),p=requestAnimationFrame(F)};function E(){k=this.clientWidth,n(1,k)}return t.$$set=D=>{"id"in D&&n(8,u=D.id),"beatsPerRotation"in D&&n(9,d=D.beatsPerRotation)},t.$$.update=()=>{t.$$.dirty&256&&A(),t.$$.dirty&1025&&bt(c,f=g===0?0:b(g*1e3),f),t.$$.dirty&514&&bt(m,l=Be().domain([0,d]).range([0,k]),l),t.$$.dirty&2048&&n(2,s=a.bandwidth())},r=_.duration()*1e3,n(11,a=ni().domain(Object.keys(o)).range([0,ii]).padding(.45)),[g,k,s,o,c,m,I,w,u,d,b,a,E]}class ba extends z{constructor(e){super(),ee(this,e,ka,va,U,{id:8,beatsPerRotation:9})}}function wa(t){let e,n;return{c(){e=O("p"),n=$("[play]")},l(r){e=N(r,"P",{});var a=G(e);n=W(a,"[play]"),a.forEach(T)},m(r,a){H(r,e,a),S(e,n)},p:V,i:V,o:V,d(r){r&&T(e)}}}class Ta extends z{constructor(e){super(),ee(this,e,null,wa,U,{})}}function Aa(t){let e;return{c(){e=Ae("circle"),this.h()},l(n){e=xe(n,"circle",{cx:!0,cy:!0,r:!0}),G(e).forEach(T),this.h()},h(){y(e,"cx",t[0]),y(e,"cy",t[1]),y(e,"r",10),Q(e,"transform","translate(50%, 50%)")},m(n,r){H(n,e,r)},p(n,[r]){r&1&&y(e,"cx",n[0]),r&2&&y(e,"cy",n[1])},i:V,o:V,d(n){n&&T(e)}}}const xa=.05;function Ma(t,e,n){let r,a,{note:s}=e,{cx:l}=e,{cy:f}=e;const{getT:u}=ot("song"),d=u();pe(t,d,i=>n(5,a=i));const _=new Ne.Howl({src:["assets/sound/hihat.mp3"]});return t.$$set=i=>{"note"in i&&n(3,s=i.note),"cx"in i&&n(0,l=i.cx),"cy"in i&&n(1,f=i.cy)},t.$$.update=()=>{t.$$.dirty&40&&n(4,r=a>=s&&a<s+xa),t.$$.dirty&16&&r&&_.state()==="loaded"&&_.play()},[l,f,d,s,r,a]}class Sa extends z{constructor(e){super(),ee(this,e,Ma,Aa,U,{note:3,cx:0,cy:1})}}var Ia="Expected a function",In=0/0,Ea="[object Symbol]",Fa=/^\s+|\s+$/g,Pa=/^[-+]0x[0-9a-f]+$/i,Oa=/^0b[01]+$/i,Na=/^0o[0-7]+$/i,Ga=parseInt,Ha=typeof _e=="object"&&_e&&_e.Object===Object&&_e,Da=typeof self=="object"&&self&&self.Object===Object&&self,Ba=Ha||Da||Function("return this")(),Ra=Object.prototype,Ca=Ra.toString,La=Math.max,qa=Math.min,yt=function(){return Ba.Date.now()};function ja(t,e,n){var r,a,s,l,f,u,d=0,_=!1,i=!1,o=!0;if(typeof t!="function")throw new TypeError(Ia);e=En(e)||0,Et(n)&&(_=!!n.leading,i="maxWait"in n,s=i?La(En(n.maxWait)||0,e):s,o="trailing"in n?!!n.trailing:o);function c(I){var w=r,F=a;return r=a=void 0,d=I,l=t.apply(F,w),l}function m(I){return d=I,f=setTimeout(h,e),_?c(I):l}function p(I){var w=I-u,F=I-d,E=e-w;return i?qa(E,s-F):E}function g(I){var w=I-u,F=I-d;return u===void 0||w>=e||w<0||i&&F>=s}function h(){var I=yt();if(g(I))return v(I);f=setTimeout(h,p(I))}function v(I){return f=void 0,o&&r?c(I):(r=a=void 0,l)}function k(){f!==void 0&&clearTimeout(f),d=0,r=u=a=f=void 0}function b(){return f===void 0?l:v(yt())}function A(){var I=yt(),w=g(I);if(r=arguments,a=this,u=I,w){if(f===void 0)return m(u);if(i)return f=setTimeout(h,e),c(u)}return f===void 0&&(f=setTimeout(h,e)),l}return A.cancel=k,A.flush=b,A}function Et(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Va(t){return!!t&&typeof t=="object"}function $a(t){return typeof t=="symbol"||Va(t)&&Ca.call(t)==Ea}function En(t){if(typeof t=="number")return t;if($a(t))return In;if(Et(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Et(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Fa,"");var n=Oa.test(t);return n||Na.test(t)?Ga(t.slice(2),n?2:8):Pa.test(t)?In:+t}var Wa=ja;ki({width:0,height:0},t=>{const e=()=>t({width:window.innerWidth,height:window.innerHeight});return e(),window.addEventListener("resize",Wa(e,250)),()=>{window.removeEventListener("resize",e)}});function Fn(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ft(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((a,s)=>Ft(t[s],a));return a=>r.map(s=>s(a))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Fn(t)&&Fn(e)){t=t.getTime(),e=e.getTime();const s=e-t;return l=>new Date(t+l*s)}const r=Object.keys(e),a={};return r.forEach(s=>{a[s]=Ft(t[s],e[s])}),s=>{const l={};return r.forEach(f=>{l[f]=a[f](s)}),l}}if(n==="number"){const r=e-t;return a=>t+a*r}throw new Error(`Cannot interpolate ${n} values`)}function Xa(t,e={}){const n=Oe(t);let r,a=t;function s(l,f){if(t==null)return n.set(t=l),Promise.resolve();a=l;let u=r,d=!1,{delay:_=0,duration:i=400,easing:o=Qn,interpolate:c=Ft}=Ee(Ee({},e),f);if(i===0)return u&&(u.abort(),u=null),n.set(t=a),Promise.resolve();const m=di()+_;let p;return r=fi(g=>{if(g<m)return!0;d||(p=c(t,l),typeof i=="function"&&(i=i(t,l)),d=!0),u&&(u.abort(),u=null);const h=g-m;return h>i?(n.set(t=l),!1):(n.set(t=p(o(h/i))),!0)}),r.promise}return{set:s,update:(l,f)=>s(l(a,t),f),subscribe:n.subscribe}}function Pn(t,e,n){const r=t.slice();return r[10]=e[n],r}function On(t){let e,n=it(`.${t[6]}f`)(t[10])+"",r;return{c(){e=O("span"),r=$(n),this.h()},l(a){e=N(a,"SPAN",{class:!0});var s=G(e);r=W(s,n),s.forEach(T),this.h()},h(){y(e,"class","tick svelte-q7ecsm")},m(a,s){H(a,e,s),S(e,r)},p(a,s){s&65&&n!==(n=it(`.${a[6]}f`)(a[10])+"")&&at(r,n)},d(a){a&&T(e)}}}function Qa(t){let e,n,r,a,s,l,f=t[0],u=[];for(let d=0;d<f.length;d+=1)u[d]=On(Pn(t,f,d));return{c(){e=O("div"),n=O("div");for(let d=0;d<u.length;d+=1)u[d].c();r=q(),a=O("input"),this.h()},l(d){e=N(d,"DIV",{class:!0});var _=G(e);n=N(_,"DIV",{class:!0});var i=G(n);for(let o=0;o<u.length;o+=1)u[o].l(i);i.forEach(T),r=j(_),a=N(_,"INPUT",{type:!0,"aria-label":!0,min:!0,max:!0,step:!0,class:!0}),_.forEach(T),this.h()},h(){y(n,"class","ticks svelte-q7ecsm"),y(a,"type","range"),y(a,"aria-label",t[5]),y(a,"min",t[2]),y(a,"max",t[3]),y(a,"step",t[4]),y(a,"class","svelte-q7ecsm"),y(e,"class","range svelte-q7ecsm")},m(d,_){H(d,e,_),S(e,n);for(let i=0;i<u.length;i+=1)u[i].m(n,null);S(e,r),S(e,a),qt(a,t[1]),s||(l=[ve(a,"change",t[8]),ve(a,"input",t[8])],s=!0)},p(d,[_]){if(_&65){f=d[0];let i;for(i=0;i<f.length;i+=1){const o=Pn(d,f,i);u[i]?u[i].p(o,_):(u[i]=On(o),u[i].c(),u[i].m(n,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=f.length}_&32&&y(a,"aria-label",d[5]),_&4&&y(a,"min",d[2]),_&8&&y(a,"max",d[3]),_&16&&y(a,"step",d[4]),_&2&&qt(a,d[1])},i:V,o:V,d(d){d&&T(e),de(u,d),s=!1,st(l)}}}function Ya(t,e,n){let r,{min:a=0}=e,{max:s=100}=e,{step:l=1}=e,{showTicks:f=!1}=e,{value:u=a}=e,{label:d=""}=e,{ticks:_}=e;const i=c=>Math.floor(c)===c?0:c.toString().split(".")[1].length||0;function o(){u=mi(this.value),n(1,u)}return t.$$set=c=>{"min"in c&&n(2,a=c.min),"max"in c&&n(3,s=c.max),"step"in c&&n(4,l=c.step),"showTicks"in c&&n(7,f=c.showTicks),"value"in c&&n(1,u=c.value),"label"in c&&n(5,d=c.label),"ticks"in c&&n(0,_=c.ticks)},t.$$.update=()=>{t.$$.dirty&16&&n(6,r=i(l)),t.$$.dirty&157&&n(0,_=_||(f?Fe(a,s+l,l):[]))},[_,u,a,s,l,d,r,f,o]}class Ua extends z{constructor(e){super(),ee(this,e,Ya,Qa,U,{min:2,max:3,step:4,showTicks:7,value:1,label:5,ticks:0})}}function Nn(t,e,n){const r=t.slice();r[20]=e[n];const a=r[9](r[3](r[20]));r[21]=a;const s=r[10](r[3](r[20]));return r[22]=s,r}function Gn(t,e,n){const r=t.slice();return r[25]=e[n],r}function Hn(t){let e,n=Fe(0,1,1/t[2]),r=[];for(let a=0;a<n.length;a+=1)r[a]=Dn(Gn(t,n,a));return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Y()},l(a){for(let s=0;s<r.length;s+=1)r[s].l(a);e=Y()},m(a,s){for(let l=0;l<r.length;l+=1)r[l].m(a,s);H(a,e,s)},p(a,s){if(s&268){n=Fe(0,1,1/a[2]);let l;for(l=0;l<n.length;l+=1){const f=Gn(a,n,l);r[l]?r[l].p(f,s):(r[l]=Dn(f),r[l].c(),r[l].m(e.parentNode,e))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(a){de(r,a),a&&T(e)}}}function Dn(t){let e,n,r;return{c(){e=Ae("line"),this.h()},l(a){e=xe(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),G(e).forEach(T),this.h()},h(){y(e,"x1",0),y(e,"y1",0),y(e,"x2",n=t[8]*Math.cos(t[3](t[25]))),y(e,"y2",r=t[8]*Math.sin(t[3](t[25]))),y(e,"class","svelte-1vphjdi"),Q(e,"transform","translate(50%, 50%)")},m(a,s){H(a,e,s)},p(a,s){s&12&&n!==(n=a[8]*Math.cos(a[3](a[25])))&&y(e,"x2",n),s&12&&r!==(r=a[8]*Math.sin(a[3](a[25])))&&y(e,"y2",r)},d(a){a&&T(e)}}}function Bn(t){let e,n;return e=new Sa({props:{note:t[20],cx:t[21],cy:t[22]}}),{c(){ne(e.$$.fragment)},l(r){le(e.$$.fragment,r)},m(r,a){ie(e,r,a),n=!0},p(r,a){const s={};a&16&&(s.note=r[20]),a&24&&(s.cx=r[21]),a&24&&(s.cy=r[22]),e.$set(s)},i(r){n||(R(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){re(e,r)}}}function Rn(t){let e,n,r;function a(l){t[17](l)}let s={min:1,max:10,step:1,showTicks:!0};return t[2]!==void 0&&(s.value=t[2]),e=new Ua({props:s}),_i.push(()=>pi(e,"value",a)),{c(){ne(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,f){ie(e,l,f),r=!0},p(l,f){const u={};!n&&f&4&&(n=!0,u.value=l[2],gi(()=>n=!1)),e.$set(u)},i(l){r||(R(e.$$.fragment,l),r=!0)},o(l){L(e.$$.fragment,l),r=!1},d(l){re(e,l)}}}function Za(t){let e,n,r,a,s,l,f,u,d,_,i,o,c,m,p,g,h,v=t[0]&&Hn(t),k=t[4],b=[];for(let w=0;w<k.length;w+=1)b[w]=Bn(Nn(t,k,w));const A=w=>L(b[w],1,1,()=>{b[w]=null});let I=t[1]&&Rn(t);return{c(){e=Ae("svg"),n=Ae("circle"),r=Ae("path"),v&&v.c(),s=Ae("line");for(let w=0;w<b.length;w+=1)b[w].c();u=q(),I&&I.c(),d=q(),_=O("button"),i=$("play"),o=q(),c=O("button"),m=$("pause"),this.h()},l(w){e=xe(w,"svg",{width:!0,height:!0,class:!0});var F=G(e);n=xe(F,"circle",{id:!0,r:!0,cx:!0,cy:!0,class:!0}),G(n).forEach(T),r=xe(F,"path",{fill:!0,d:!0}),G(r).forEach(T),v&&v.l(F),s=xe(F,"line",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),G(s).forEach(T);for(let P=0;P<b.length;P+=1)b[P].l(F);F.forEach(T),u=j(w),I&&I.l(w),d=j(w),_=N(w,"BUTTON",{});var E=G(_);i=W(E,"play"),E.forEach(T),o=j(w),c=N(w,"BUTTON",{});var D=G(c);m=W(D,"pause"),D.forEach(T),this.h()},h(){y(n,"id","outer"),y(n,"r",t[8]),y(n,"cx","50%"),y(n,"cy","50%"),y(n,"class","svelte-1vphjdi"),y(r,"fill","lightgrey"),y(r,"d",a=t[5]()),Q(r,"transform","translate(50%, 50%)"),y(s,"id","marker"),y(s,"x1",0),y(s,"y1",0),y(s,"x2",l=t[9](t[3](t[6]))),y(s,"y2",f=t[10](t[3](t[6]))),y(s,"class","svelte-1vphjdi"),Q(s,"transform","translate(50%, 50%)"),y(e,"width","100%"),y(e,"height",ri),y(e,"class","svelte-1vphjdi")},m(w,F){H(w,e,F),S(e,n),S(e,r),v&&v.m(e,null),S(e,s);for(let E=0;E<b.length;E+=1)b[E].m(e,null);H(w,u,F),I&&I.m(w,F),H(w,d,F),H(w,_,F),S(_,i),H(w,o,F),H(w,c,F),S(c,m),p=!0,g||(h=[ve(_,"click",t[12]),ve(c,"click",t[11])],g=!0)},p(w,[F]){if((!p||F&32&&a!==(a=w[5]()))&&y(r,"d",a),w[0]?v?v.p(w,F):(v=Hn(w),v.c(),v.m(e,s)):v&&(v.d(1),v=null),(!p||F&72&&l!==(l=w[9](w[3](w[6]))))&&y(s,"x2",l),(!p||F&72&&f!==(f=w[10](w[3](w[6]))))&&y(s,"y2",f),F&1560){k=w[4];let E;for(E=0;E<k.length;E+=1){const D=Nn(w,k,E);b[E]?(b[E].p(D,F),R(b[E],1)):(b[E]=Bn(D),b[E].c(),R(b[E],1),b[E].m(e,null))}for(fe(),E=k.length;E<b.length;E+=1)A(E);me()}w[1]?I?(I.p(w,F),F&2&&R(I,1)):(I=Rn(w),I.c(),R(I,1),I.m(d.parentNode,d)):I&&(fe(),L(I,1,1,()=>{I=null}),me())},i(w){if(!p){for(let F=0;F<k.length;F+=1)R(b[F]);R(I),p=!0}},o(w){b=b.filter(Boolean);for(let F=0;F<b.length;F+=1)L(b[F]);L(I),p=!1},d(w){w&&T(e),v&&v.d(),de(b,w),w&&T(u),I&&I.d(w),w&&T(d),w&&T(_),w&&T(o),w&&T(c),g=!1,st(h)}}}const ri=450,Cn=0;function Ka(t,e,n){let r,a,s,l,f,u,{dots:d}=e,{beatsPerRotation:_=1}=e,{division:i}=e,{bpm:o=60}=e,{interactive:c}=e;Ze("song",{beatsPerRotation:_,division:i,getT:()=>g,getAngleScale:()=>f,getCycleDuration:()=>l});let m=i,p;const g=Xa(0);pe(t,g,w=>n(6,u=w));const h=ri/2-100,v=w=>h*Math.cos(w),k=w=>h*Math.sin(w),b=()=>{clearInterval(p),g.set(a,{duration:0})},A=()=>{g.set(Cn,{duration:0}),g.set(a,{duration:l}),p=setInterval(()=>{g.set(Cn,{duration:0}),g.set(a,{duration:l})},l)};hi(()=>{clearInterval(p)});function I(w){m=w,n(2,m)}return t.$$set=w=>{"dots"in w&&n(13,d=w.dots),"beatsPerRotation"in w&&n(14,_=w.beatsPerRotation),"division"in w&&n(0,i=w.division),"bpm"in w&&n(15,o=w.bpm),"interactive"in w&&n(1,c=w.interactive)},t.$$.update=()=>{t.$$.dirty&8198&&n(4,r=c?[0,1/m]:d?d.map(w=>+w):[]),t.$$.dirty&16384&&n(16,a=_),t.$$.dirty&65536&&n(3,f=Be().domain([0,a]).range([-Math.PI/2,3/2*Math.PI])),t.$$.dirty&24&&n(5,s=Yr().innerRadius(0).outerRadius(h).startAngle(f(r[0])+Math.PI/2).endAngle(f(r[r.length-1])+Math.PI/2)),t.$$.dirty&49152&&(l=6e4*_/o)},[i,c,m,f,r,s,u,g,h,v,k,b,A,d,_,o,a,I]}class Ja extends z{constructor(e){super(),ee(this,e,Ka,Za,U,{dots:13,beatsPerRotation:14,division:0,bpm:15,interactive:1})}}function Ln(t,e,n){const r=t.slice();return r[4]=e[n].type,r[5]=e[n].text,r[6]=e[n].component,r[7]=e[n].classname,r[8]=e[n].props,r}function qn(t){let e,n;return{c(){e=O("h3"),n=$(t[1])},l(r){e=N(r,"H3",{});var a=G(e);n=W(a,t[1]),a.forEach(T)},m(r,a){H(r,e,a),S(e,n)},p(r,a){a&2&&at(n,r[1])},d(r){r&&T(e)}}}function za(t){let e,n,r;const a=[t[8]];var s=t[3][t[6]];function l(f){let u={};for(let d=0;d<a.length;d+=1)u=Ee(u,a[d]);return{props:u}}return s&&(e=$t(s,l())),{c(){e&&ne(e.$$.fragment),n=Y()},l(f){e&&le(e.$$.fragment,f),n=Y()},m(f,u){e&&ie(e,f,u),H(f,n,u),r=!0},p(f,u){const d=u&4?lt(a,[Ot(f[8])]):{};if(s!==(s=f[3][f[6]])){if(e){fe();const _=e;L(_.$$.fragment,1,0,()=>{re(_,1)}),me()}s?(e=$t(s,l()),ne(e.$$.fragment),R(e.$$.fragment,1),ie(e,n.parentNode,n)):e=null}else s&&e.$set(d)},i(f){r||(e&&R(e.$$.fragment,f),r=!0)},o(f){e&&L(e.$$.fragment,f),r=!1},d(f){f&&T(n),e&&re(e,f)}}}function eo(t){let e,n=t[5]+"",r;return{c(){e=new Wn(!1),r=Y(),this.h()},l(a){e=Xn(a,!1),r=Y(),this.h()},h(){e.a=r},m(a,s){e.m(n,a,s),H(a,r,s)},p(a,s){s&4&&n!==(n=a[5]+"")&&e.p(n)},i:V,o:V,d(a){a&&T(r),a&&e.d()}}}function kt(t){let e,n,r,a,s,l;const f=[eo,za],u=[];function d(o,c){return o[5]?0:1}n=d(t),r=u[n]=f[n](t);let _=[{class:s=t[7]}],i={};for(let o=0;o<_.length;o+=1)i=Ee(i,_[o]);return{c(){e=O(t[4]),r.c(),a=q(),this.h()},l(o){e=N(o,(t[4]||"null").toUpperCase(),{class:!0});var c=G(e);r.l(c),a=j(c),c.forEach(T),this.h()},h(){/-/.test(t[4])?jt(e,i):Vt(e,i)},m(o,c){H(o,e,c),u[n].m(e,null),S(e,a),l=!0},p(o,c){let m=n;n=d(o),n===m?u[n].p(o,c):(fe(),L(u[m],1,1,()=>{u[m]=null}),me(),r=u[n],r?r.p(o,c):(r=u[n]=f[n](o),r.c()),R(r,1),r.m(e,a)),i=lt(_,[(!l||c&4&&s!==(s=o[7]))&&{class:s}]),/-/.test(o[4])?jt(e,i):Vt(e,i)},i(o){l||(R(r),l=!0)},o(o){L(r),l=!1},d(o){o&&T(e),u[n].d()}}}function jn(t){let e=t[4],n,r=t[4]&&kt(t);return{c(){r&&r.c(),n=Y()},l(a){r&&r.l(a),n=Y()},m(a,s){r&&r.m(a,s),H(a,n,s)},p(a,s){a[4]?e?U(e,a[4])?(r.d(1),r=kt(a),r.c(),r.m(n.parentNode,n)):r.p(a,s):(r=kt(a),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=a[4]},i:V,o(a){L(r)},d(a){a&&T(n),r&&r.d(a)}}}function to(t){let e,n,r,a=t[1]&&qn(t),s=t[2],l=[];for(let u=0;u<s.length;u+=1)l[u]=jn(Ln(t,s,u));const f=u=>L(l[u],1,1,()=>{l[u]=null});return{c(){e=O("section"),a&&a.c(),n=q();for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=N(u,"SECTION",{id:!0});var d=G(e);a&&a.l(d),n=j(d);for(let _=0;_<l.length;_+=1)l[_].l(d);d.forEach(T),this.h()},h(){y(e,"id",t[0])},m(u,d){H(u,e,d),a&&a.m(e,null),S(e,n);for(let _=0;_<l.length;_+=1)l[_].m(e,null);r=!0},p(u,[d]){if(u[1]?a?a.p(u,d):(a=qn(u),a.c(),a.m(e,n)):a&&(a.d(1),a=null),d&12){s=u[2];let _;for(_=0;_<s.length;_+=1){const i=Ln(u,s,_);l[_]?(l[_].p(i,d),R(l[_],1)):(l[_]=jn(i),l[_].c(),R(l[_],1),l[_].m(e,null))}for(fe(),_=s.length;_<l.length;_+=1)f(_);me()}(!r||d&1)&&y(e,"id",u[0])},i(u){if(!r){for(let d=0;d<s.length;d+=1)R(l[d]);r=!0}},o(u){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)L(l[d]);r=!1},d(u){u&&T(e),a&&a.d(),de(l,u)}}}function no(t,e,n){let{id:r}=e,{title:a}=e,{chunks:s}=e;const l={Play:Ta,Grid:ba,Quote:Ei,Circle:Ja};return t.$$set=f=>{"id"in f&&n(0,r=f.id),"title"in f&&n(1,a=f.title),"chunks"in f&&n(2,s=f.chunks)},[r,a,s,l]}class ai extends z{constructor(e){super(),ee(this,e,no,to,U,{id:0,title:1,chunks:2})}}const io="wonky",ro="an interactive accompaniment to “Dilla Time” by Dan Charnas",ao="By <a href=https://pudding.cool/author/michelle-mcghee/ target=_blank>Michelle McGhee</a>",oo=[{id:"intro",chunks:[{type:"p",text:"You’re the drummer. The backbone of the band. Your job is to keep a steady rhythm."},{type:"p",text:"Here, try it."},{type:"div",component:"Play"},{type:"p",text:"Nice job. Sometimes you were a little late or a little early. To correct this, we can snap every note to the nearest steady beat. This is called quantizing, and most music recording software lets you do this with the click of a button."},{type:"p",text:"Now listen to this clip of “Sincerity is Scary” by The 1975. Below we’re just visualizing the hi-hat, which is the part of the drum kit that sounds like this."},{type:"div",component:"Grid",props:{id:"sincerity",beatsPerRotation:"16"}},{type:"p",text:"This rhythm is not even at all. Some hits come slightly early, others slightly late. It’s the rhythmic equivalent of coloring a little outside of the lines or playing slightly out of tune."},{type:"p",text:"But at the same time... it’s groovy. It’s chill, laid back, off-kilter, sort of like you’re falling but never quite catching yourself."},{type:"p",text:"These are professional musicians - they know what they’re doing, and there’s intention behind it. They’re following in the tradition of artists like J Dilla, who pioneered this style of playing off the grid, which went against what musicians are typically taught, to play perfectly evenly."},{type:"div",component:"Quote",props:{quote:"“It was the most life-changing moment I ever had… it sounded like the kick drum was played by a drunk 3 year old. And I was like, are you allowed to do that?”",speaker:"Questlove",videoUrl:""}},{type:"p",text:"And these days, it shows up everywhere in popular music if you listen closely."},{type:"p",text:"Dan Charnas wrote a book called “Dilla Time”, all about J Dilla’s music, life, and legacy. I want to focus on the timefeel that Dilla pioneered. How does it work? What does it look and sound like? The book was great, but I wanted visuals I could interact with."}]},{id:"straight",title:"🥁 part i: straight",chunks:[{type:"p",text:"The quantized beat you made is described as rhythmically “straight.” This means that the notes line up with our typical evenly spaced grid. Here are some other songs with straight grooves."},{type:"div",component:"Grid",props:{id:"lightSwitch",beatsPerRotation:"16"}}]},{id:"swing",title:"🥁🥁 part ii: swing",chunks:[{type:"p",text:"Sometimes straight can get a little boring. If we move every other note (called the “backbeat”) on the hi-hat a bit later, we get what’s called swing. This is very common in jazz. Here are some songs with swung grooves."},{type:"div",component:"Grid",props:{id:"dmatSwung",beatsPerRotation:"8"}}]},{id:"nerd-box",summary:"How do drummers know how late to put the backbeat?",chunks:[{type:"p",text:"Different drummers have different techniques, but some count it very exactly. To understand this, let’s look at 1 beat. This circle represents 1 beat."},{type:"div",component:"Circle",props:{dots:["0"]}},{type:"p",text:"If we divide the beat in 2, we get this classic sound. The backbeat and the downbeat take the same amount of space."},{type:"div",component:"Circle",props:{dots:["0","0.5"],division:"2"}},{type:"p",text:"It gets interesting if we try dividing the beat into an odd number of divisions. Then we’re forced to have one note be longer than the other. Dividing in 3, we can have the first note take 2/3 and the second take 1/3. This is called a triplet swing. It’s also referred to as a 66% swing percentage because that’s the amount of the beat taken up by the first note."},{type:"p",text:"Try it out, see what different numbers feel like."},{type:"div",component:"Circle",props:{interactive:"true",division:"3"}}]},{id:"dilla",title:"🥁🥁🥁 part iii: dilla",chunks:[{type:"p",text:"To understand what makes Dilla time special, it’s all about what the best artists do - subverting expectation."},{type:"div",component:"Quote",props:{quote:"To hear a rhythm at all, we must have at least two events spaced in time: like a snare hit, then a pause of any length, then another hit: positive-negative-positive. Once a pattern is established it sets up an expectation. We expect to hear an event in a positive (or “strong”) space, and do not expect to hear one in a negative (or “weak”) space.",speaker:"Dan Charnas (Dilla Time)"}},{type:"div",component:"Quote",props:{quote:"Our expectations are governed by the most granular pulse in a given song, what we call the rhythmic current. In hip-hop, we expect to hear a beat counted in fours. Usually the hi-hat acts as the metronome, and because it hits two times for every one of those four beats, it sets the rhythmic current at eight.",speaker:"Dan Charnas (Dilla Time)"}},{type:"div",component:"Quote",props:{quote:"Because the rhythmic current - the most granular pulse - governs our expectations, changes on a microscopic level can ironically be jarring, and it is in this area, subverting the rhythmic current that [J Dilla] did most of his work. In a typical J Dilla beat, the rushed snare messes with our expectations by falling into a weak area of the rhythmic current and not a strong one.",speaker:"Dan Charnas (Dilla Time)"}}]}],Ce={hed:io,dek:ro,byline:ao,sections:oo};function Vn(t,e,n){const r=t.slice();return r[2]=e[n],r}function so(t){let e,n;const r=[t[2]];let a={};for(let s=0;s<r.length;s+=1)a=Ee(a,r[s]);return e=new ai({props:a}),{c(){ne(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,l){ie(e,s,l),n=!0},p(s,l){const f=l&0?lt(r,[Ot(s[2])]):{};e.$set(f)},i(s){n||(R(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){re(e,s)}}}function lo(t){let e,n,r=t[2].summary+"",a,s,l,f,u;const d=[t[2]];let _={};for(let i=0;i<d.length;i+=1)_=Ee(_,d[i]);return l=new ai({props:_}),{c(){e=O("details"),n=O("summary"),a=$(r),s=q(),ne(l.$$.fragment),f=q(),this.h()},l(i){e=N(i,"DETAILS",{class:!0});var o=G(e);n=N(o,"SUMMARY",{class:!0});var c=G(n);a=W(c,r),c.forEach(T),s=j(o),le(l.$$.fragment,o),f=j(o),o.forEach(T),this.h()},h(){y(n,"class","svelte-mh11j9"),y(e,"class","nerd-box svelte-mh11j9")},m(i,o){H(i,e,o),S(e,n),S(n,a),S(e,s),ie(l,e,null),S(e,f),u=!0},p(i,o){const c=o&0?lt(d,[Ot(i[2])]):{};l.$set(c)},i(i){u||(R(l.$$.fragment,i),u=!0)},o(i){L(l.$$.fragment,i),u=!1},d(i){i&&T(e),re(l)}}}function $n(t){let e,n,r,a;const s=[lo,so],l=[];function f(u,d){return u[2].id==="nerd-box"?0:1}return e=f(t),n=l[e]=s[e](t),{c(){n.c(),r=Y()},l(u){n.l(u),r=Y()},m(u,d){l[e].m(u,d),H(u,r,d),a=!0},p(u,d){n.p(u,d)},i(u){a||(R(n),a=!0)},o(u){L(n),a=!1},d(u){l[e].d(u),u&&T(r)}}}function co(t){let e,n,r,a,s,l,f,u,d,_,i=Ce.sections,o=[];for(let m=0;m<i.length;m+=1)o[m]=$n(Vn(t,i,m));const c=m=>L(o[m],1,1,()=>{o[m]=null});return d=new Mi({}),{c(){e=O("article"),n=O("h1"),r=$(t[0]),a=q(),s=O("h2"),l=$(t[1]),f=q();for(let m=0;m<o.length;m+=1)o[m].c();u=q(),ne(d.$$.fragment),this.h()},l(m){e=N(m,"ARTICLE",{class:!0});var p=G(e);n=N(p,"H1",{});var g=G(n);r=W(g,t[0]),g.forEach(T),a=j(p),s=N(p,"H2",{});var h=G(s);l=W(h,t[1]),h.forEach(T),f=j(p);for(let v=0;v<o.length;v+=1)o[v].l(p);p.forEach(T),u=j(m),le(d.$$.fragment,m),this.h()},h(){y(e,"class","svelte-mh11j9")},m(m,p){H(m,e,p),S(e,n),S(n,r),S(e,a),S(e,s),S(s,l),S(e,f);for(let g=0;g<o.length;g+=1)o[g].m(e,null);H(m,u,p),ie(d,m,p),_=!0},p(m,[p]){if(p&0){i=Ce.sections;let g;for(g=0;g<i.length;g+=1){const h=Vn(m,i,g);o[g]?(o[g].p(h,p),R(o[g],1)):(o[g]=$n(h),o[g].c(),R(o[g],1),o[g].m(e,null))}for(fe(),g=i.length;g<o.length;g+=1)c(g);me()}},i(m){if(!_){for(let p=0;p<i.length;p+=1)R(o[p]);R(d.$$.fragment,m),_=!0}},o(m){o=o.filter(Boolean);for(let p=0;p<o.length;p+=1)L(o[p]);L(d.$$.fragment,m),_=!1},d(m){m&&T(e),de(o,m),m&&T(u),re(d,m)}}}function uo(t){const{hed:e,dek:n}=Ce;return[e,n]}class fo extends z{constructor(e){super(),ee(this,e,uo,co,U,{})}}function mo(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.1.0"),console.log("build: 2023-04-11-17:03"),console.log("--- --- --- --- --- ---")}function ho(t){let e,n,r,a;return e=new Ti({props:{title:t[1],description:t[2],url:t[3],preloadFont:t[0],keywords:t[4]}}),r=new fo({}),{c(){ne(e.$$.fragment),n=q(),ne(r.$$.fragment)},l(s){le(e.$$.fragment,s),n=j(s),le(r.$$.fragment,s)},m(s,l){ie(e,s,l),H(s,n,l),ie(r,s,l),a=!0},p:V,i(s){a||(R(e.$$.fragment,s),R(r.$$.fragment,s),a=!0)},o(s){L(e.$$.fragment,s),L(r.$$.fragment,s),a=!1},d(s){re(e,s),s&&T(n),re(r,s)}}}function _o(t,e,n){let{data:r}=e;mo();const a=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2","https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2"],{title:s,description:l,url:f,keywords:u}=Ce;return Ze("copy",Ce),Ze("data",r.data),t.$$set=d=>{"data"in d&&n(5,r=d.data)},[a,s,l,f,u,r]}class ko extends z{constructor(e){super(),ee(this,e,_o,ho,U,{data:5})}}export{ko as default};

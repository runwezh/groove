import{S as Y,i as Q,s as Z,k as N,e as ie,J as an,l as P,h as b,n as v,D as E,C as U,K as pe,b as G,q as ae,a as $,m as R,r as oe,c as j,L as ve,u as Oe,M as on,N as z,p as C,O as Ke,P as Ne,Q as Ge,I as fe,f as F,g as _e,t as V,d as me,R as ln,T as qt,x as ee,y as te,z as ne,A as re,U as sn,V as Wt,W as Xt,X as Yt,Y as un,Z as qe,v as fn,_ as cn,$ as dn}from"../../chunks/index-6f483652.js";import{d as _n,I as nt}from"../../chunks/transform-f56d011b.js";import{w as Ve,r as mn}from"../../chunks/index-25b2a587.js";function rt(t,n,r){const i=t.slice();return i[5]=n[r],i}function it(t){let n,r;return{c(){n=N("link"),this.h()},l(i){n=P(i,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){v(n,"rel","preload"),v(n,"href",r=t[5]),v(n,"as","font"),v(n,"type","font/woff2"),v(n,"crossorigin","")},m(i,a){G(i,n,a)},p(i,a){a&16&&r!==(r=i[5])&&v(n,"href",r)},d(i){i&&b(n)}}}function hn(t){let n,r,i,a,u,l,f,c,d,p,e,o,s,_,h,g,m,y,k,x,H,T,w,S,A,B;document.title=n=t[0];let I=t[4],D=[];for(let O=0;O<I.length;O+=1)D[O]=it(rt(t,I,O));return{c(){r=N("meta"),i=N("meta"),a=N("meta"),u=N("meta"),l=N("meta"),f=N("meta"),c=N("meta"),d=N("meta"),p=N("meta"),e=N("meta"),s=N("meta"),_=N("meta"),h=N("meta"),g=N("meta"),m=N("meta"),y=N("meta"),k=N("meta"),x=N("meta"),H=N("meta"),w=N("meta"),S=N("link");for(let O=0;O<D.length;O+=1)D[O].c();B=ie(),this.h()},l(O){const M=an("svelte-1htu80s",document.head);r=P(M,"META",{name:!0,content:!0}),i=P(M,"META",{name:!0,content:!0}),a=P(M,"META",{name:!0,content:!0}),u=P(M,"META",{property:!0,content:!0}),l=P(M,"META",{property:!0,content:!0}),f=P(M,"META",{property:!0,content:!0}),c=P(M,"META",{property:!0,content:!0}),d=P(M,"META",{property:!0,content:!0}),p=P(M,"META",{property:!0,content:!0}),e=P(M,"META",{property:!0,content:!0}),s=P(M,"META",{property:!0,content:!0}),_=P(M,"META",{property:!0,content:!0}),h=P(M,"META",{property:!0,content:!0}),g=P(M,"META",{name:!0,content:!0}),m=P(M,"META",{name:!0,content:!0}),y=P(M,"META",{name:!0,content:!0}),k=P(M,"META",{name:!0,content:!0}),x=P(M,"META",{name:!0,content:!0}),H=P(M,"META",{name:!0,content:!0}),w=P(M,"META",{name:!0,content:!0}),S=P(M,"LINK",{rel:!0,href:!0});for(let L=0;L<D.length;L+=1)D[L].l(M);B=ie(),M.forEach(b),this.h()},h(){v(r,"name","description"),v(r,"content",t[1]),v(i,"name","author"),v(i,"content","The Pudding"),v(a,"name","news_keywords"),v(a,"content",t[3]),v(u,"property","og:title"),v(u,"content",t[0]),v(l,"property","og:site_name"),v(l,"content","The Pudding"),v(f,"property","og:url"),v(f,"content",t[2]),v(c,"property","og:description"),v(c,"content",t[1]),v(d,"property","og:type"),v(d,"content","article"),v(p,"property","og:locale"),v(p,"content","en_US"),v(e,"property","og:image"),v(e,"content",o=t[2]+"/assets/social-facebook.jpg"),v(s,"property","og:image:type"),v(s,"content","image/jpeg"),v(_,"property","og:image:width"),v(_,"content","1200"),v(h,"property","og:image:height"),v(h,"content","600"),v(g,"name","twitter:card"),v(g,"content","summary_large_image"),v(m,"name","twitter:site"),v(m,"content","https://pudding.cool"),v(y,"name","twitter:creator"),v(y,"content","@puddingviz"),v(k,"name","twitter:title"),v(k,"content",t[0]),v(x,"name","twitter:description"),v(x,"content",t[1]),v(H,"name","twitter:image:src"),v(H,"content",T=t[2]+"/assets/social-twitter.jpg"),v(w,"name","robots"),v(w,"content","max-image-preview:large"),v(S,"rel","canonical"),v(S,"href",A=t[2]+"/")},m(O,M){E(document.head,r),E(document.head,i),E(document.head,a),E(document.head,u),E(document.head,l),E(document.head,f),E(document.head,c),E(document.head,d),E(document.head,p),E(document.head,e),E(document.head,s),E(document.head,_),E(document.head,h),E(document.head,g),E(document.head,m),E(document.head,y),E(document.head,k),E(document.head,x),E(document.head,H),E(document.head,w),E(document.head,S);for(let L=0;L<D.length;L+=1)D[L].m(document.head,null);E(document.head,B)},p(O,[M]){if(M&1&&n!==(n=O[0])&&(document.title=n),M&2&&v(r,"content",O[1]),M&8&&v(a,"content",O[3]),M&1&&v(u,"content",O[0]),M&4&&v(f,"content",O[2]),M&2&&v(c,"content",O[1]),M&4&&o!==(o=O[2]+"/assets/social-facebook.jpg")&&v(e,"content",o),M&1&&v(k,"content",O[0]),M&2&&v(x,"content",O[1]),M&4&&T!==(T=O[2]+"/assets/social-twitter.jpg")&&v(H,"content",T),M&4&&A!==(A=O[2]+"/")&&v(S,"href",A),M&16){I=O[4];let L;for(L=0;L<I.length;L+=1){const le=rt(O,I,L);D[L]?D[L].p(le,M):(D[L]=it(le),D[L].c(),D[L].m(B.parentNode,B))}for(;L<D.length;L+=1)D[L].d(1);D.length=I.length}},i:U,o:U,d(O){b(r),b(i),b(a),b(u),b(l),b(f),b(c),b(d),b(p),b(e),b(s),b(_),b(h),b(g),b(m),b(y),b(k),b(x),b(H),b(w),b(S),pe(D,O),b(B)}}}function pn(t,n,r){let{title:i="Title TK"}=n,{description:a="Description TK"}=n,{url:u="https://pudding.cool"}=n,{keywords:l=""}=n,{preloadFont:f=[]}=n;return t.$$set=c=>{"title"in c&&r(0,i=c.title),"description"in c&&r(1,a=c.description),"url"in c&&r(2,u=c.url),"keywords"in c&&r(3,l=c.keywords),"preloadFont"in c&&r(4,f=c.preloadFont)},[i,a,u,l,f]}class gn extends Y{constructor(n){super(),Q(this,n,pn,hn,Z,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function at(t){let n,r=t[2][0]+"",i,a,u,l=t[2][1]+"",f;return{c(){n=N("span"),i=ae(r),a=$(),u=N("span"),f=ae(l),this.h()},l(c){n=P(c,"SPAN",{class:!0});var d=R(n);i=oe(d,r),d.forEach(b),a=j(c),u=P(c,"SPAN",{class:!0});var p=R(u);f=oe(p,l),p.forEach(b),this.h()},h(){v(n,"class","svelte-157h5as"),v(u,"class","svelte-157h5as")},m(c,d){G(c,n,d),E(n,i),G(c,a,d),G(c,u,d),E(u,f)},p(c,d){d&4&&r!==(r=c[2][0]+"")&&Oe(i,r),d&4&&l!==(l=c[2][1]+"")&&Oe(f,l)},d(c){c&&b(n),c&&b(a),c&&b(u)}}}function vn(t){let n,r,i,a,u,l,f,c,d=t[1]==="inner"&&at(t);return{c(){n=N("div"),r=N("span"),i=ae(t[0]),a=$(),u=N("button"),d&&d.c(),this.h()},l(p){n=P(p,"DIV",{class:!0});var e=R(n);r=P(e,"SPAN",{class:!0,id:!0});var o=R(r);i=oe(o,t[0]),o.forEach(b),a=j(e),u=P(e,"BUTTON",{role:!0,"aria-checked":!0,"aria-labelledby":!0,class:!0});var s=R(u);d&&d.l(s),s.forEach(b),e.forEach(b),this.h()},h(){v(r,"class","label svelte-157h5as"),v(r,"id",t[4]),v(u,"role","switch"),v(u,"aria-checked",t[3]),v(u,"aria-labelledby",t[4]),v(u,"class","svelte-157h5as"),v(n,"class",l="toggle toggle--"+t[1]+" svelte-157h5as")},m(p,e){G(p,n,e),E(n,r),E(r,i),E(n,a),E(n,u),d&&d.m(u,null),f||(c=ve(u,"click",t[5]),f=!0)},p(p,[e]){e&1&&Oe(i,p[0]),p[1]==="inner"?d?d.p(p,e):(d=at(p),d.c(),d.m(u,null)):d&&(d.d(1),d=null),e&8&&v(u,"aria-checked",p[3]),e&2&&l!==(l="toggle toggle--"+p[1]+" svelte-157h5as")&&v(n,"class",l)},i:U,o:U,d(p){p&&b(n),d&&d.d(),f=!1,c()}}}function yn(t,n,r){let{label:i}=n,{style:a="inner"}=n,{options:u=["on","off"]}=n,{value:l=u[0]}=n,f=l===u[0];const c=`toggle-${Math.floor(Math.random()*1e6)}`,d=p=>{const o=p.target.getAttribute("aria-checked");r(3,f=o!=="true"),r(6,l=f?u[0]:u[1])};return t.$$set=p=>{"label"in p&&r(0,i=p.label),"style"in p&&r(1,a=p.style),"options"in p&&r(2,u=p.options),"value"in p&&r(6,l=p.value)},[i,a,u,f,c,d,l]}class bn extends Y{constructor(n){super(),Q(this,n,yn,vn,Z,{label:0,style:1,options:2,value:6})}}var J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ge={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var n=function(){this.init()};n.prototype={init:function(){var e=this||r;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var o=this||r;if(e=parseFloat(e),o.ctx||p(),typeof e<"u"&&e>=0&&e<=1){if(o._volume=e,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(e,r.ctx.currentTime);for(var s=0;s<o._howls.length;s++)if(!o._howls[s]._webAudio)for(var _=o._howls[s]._getSoundIds(),h=0;h<_.length;h++){var g=o._howls[s]._soundById(_[h]);g&&g._node&&(g._node.volume=g._volume*e)}return o}return o._volume},mute:function(e){var o=this||r;o.ctx||p(),o._muted=e,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(e?0:o._volume,r.ctx.currentTime);for(var s=0;s<o._howls.length;s++)if(!o._howls[s]._webAudio)for(var _=o._howls[s]._getSoundIds(),h=0;h<_.length;h++){var g=o._howls[s]._soundById(_[h]);g&&g._node&&(g._node.muted=e?!0:g._muted)}return o},stop:function(){for(var e=this||r,o=0;o<e._howls.length;o++)e._howls[o].stop();return e},unload:function(){for(var e=this||r,o=e._howls.length-1;o>=0;o--)e._howls[o].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||r)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||r;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var o=new Audio;typeof o.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var o=new Audio;o.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||r,o=null;try{o=typeof Audio<"u"?new Audio:null}catch{return e}if(!o||typeof o.canPlayType!="function")return e;var s=o.canPlayType("audio/mpeg;").replace(/^no$/,""),_=e._navigator?e._navigator.userAgent:"",h=_.match(/OPR\/([0-6].)/g),g=h&&parseInt(h[0].split("/")[1],10)<33,m=_.indexOf("Safari")!==-1&&_.indexOf("Chrome")===-1,y=_.match(/Version\/(.*?) /),k=m&&y&&parseInt(y[1],10)<15;return e._codecs={mp3:!!(!g&&(s||o.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!s,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(o.canPlayType('audio/wav; codecs="1"')||o.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(o.canPlayType("audio/x-m4b;")||o.canPlayType("audio/m4b;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!k&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!k&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||r;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var o=function(s){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var _=new Audio;_._unlocked=!0,e._releaseHtml5Audio(_)}catch{e.noAudio=!0;break}for(var h=0;h<e._howls.length;h++)if(!e._howls[h]._webAudio)for(var g=e._howls[h]._getSoundIds(),m=0;m<g.length;m++){var y=e._howls[h]._soundById(g[m]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}e._autoResume();var k=e.ctx.createBufferSource();k.buffer=e._scratchBuffer,k.connect(e.ctx.destination),typeof k.start>"u"?k.noteOn(0):k.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),k.onended=function(){k.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0),document.removeEventListener("keydown",o,!0);for(var x=0;x<e._howls.length;x++)e._howls[x]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),document.addEventListener("keydown",o,!0),e}},_obtainHtml5Audio:function(){var e=this||r;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var o=new Audio().play();return o&&typeof Promise<"u"&&(o instanceof Promise||typeof o.then=="function")&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var o=this||r;return e._unlocked&&o._html5AudioPool.push(e),o},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!r.usingWebAudio)){for(var o=0;o<e._howls.length;o++)if(e._howls[o]._webAudio){for(var s=0;s<e._howls[o]._sounds.length;s++)if(!e._howls[o]._sounds[s]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var _=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(_,_)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!r.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var o=0;o<e._howls.length;o++)e._howls[o]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var r=new n,i=function(e){var o=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}o.init(e)};i.prototype={init:function(e){var o=this;return r.ctx||p(),o._autoplay=e.autoplay||!1,o._format=typeof e.format!="string"?e.format:[e.format],o._html5=e.html5||!1,o._muted=e.mute||!1,o._loop=e.loop||!1,o._pool=e.pool||5,o._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,o._rate=e.rate||1,o._sprite=e.sprite||{},o._src=typeof e.src!="string"?e.src:[e.src],o._volume=e.volume!==void 0?e.volume:1,o._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=e.onend?[{fn:e.onend}]:[],o._onfade=e.onfade?[{fn:e.onfade}]:[],o._onload=e.onload?[{fn:e.onload}]:[],o._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],o._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],o._onpause=e.onpause?[{fn:e.onpause}]:[],o._onplay=e.onplay?[{fn:e.onplay}]:[],o._onstop=e.onstop?[{fn:e.onstop}]:[],o._onmute=e.onmute?[{fn:e.onmute}]:[],o._onvolume=e.onvolume?[{fn:e.onvolume}]:[],o._onrate=e.onrate?[{fn:e.onrate}]:[],o._onseek=e.onseek?[{fn:e.onseek}]:[],o._onunlock=e.onunlock?[{fn:e.onunlock}]:[],o._onresume=[],o._webAudio=r.usingWebAudio&&!o._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o._preload!=="none"&&o.load(),o},load:function(){var e=this,o=null;if(r.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var s=0;s<e._src.length;s++){var _,h;if(e._format&&e._format[s])_=e._format[s];else{if(h=e._src[s],typeof h!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}_=/^data:audio\/([^;,]+);/i.exec(h),_||(_=/\.([^.]+)$/.exec(h.split("?",1)[0])),_&&(_=_[1].toLowerCase())}if(_||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),_&&r.codecs(_)){o=e._src[s];break}}if(!o){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=o,e._state="loading",window.location.protocol==="https:"&&o.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&l(e),e},play:function(e,o){var s=this,_=null;if(typeof e=="number")_=e,e=null;else{if(typeof e=="string"&&s._state==="loaded"&&!s._sprite[e])return null;if(typeof e>"u"&&(e="__default",!s._playLock)){for(var h=0,g=0;g<s._sounds.length;g++)s._sounds[g]._paused&&!s._sounds[g]._ended&&(h++,_=s._sounds[g]._id);h===1?e=null:_=null}}var m=_?s._soundById(_):s._inactiveSound();if(!m)return null;if(_&&!e&&(e=m._sprite||"__default"),s._state!=="loaded"){m._sprite=e,m._ended=!1;var y=m._id;return s._queue.push({event:"play",action:function(){s.play(y)}}),y}if(_&&!m._paused)return o||s._loadQueue("play"),m._id;s._webAudio&&r._autoResume();var k=Math.max(0,m._seek>0?m._seek:s._sprite[e][0]/1e3),x=Math.max(0,(s._sprite[e][0]+s._sprite[e][1])/1e3-k),H=x*1e3/Math.abs(m._rate),T=s._sprite[e][0]/1e3,w=(s._sprite[e][0]+s._sprite[e][1])/1e3;m._sprite=e,m._ended=!1;var S=function(){m._paused=!1,m._seek=k,m._start=T,m._stop=w,m._loop=!!(m._loop||s._sprite[e][2])};if(k>=w){s._ended(m);return}var A=m._node;if(s._webAudio){var B=function(){s._playLock=!1,S(),s._refreshBuffer(m);var M=m._muted||s._muted?0:m._volume;A.gain.setValueAtTime(M,r.ctx.currentTime),m._playStart=r.ctx.currentTime,typeof A.bufferSource.start>"u"?m._loop?A.bufferSource.noteGrainOn(0,k,86400):A.bufferSource.noteGrainOn(0,k,x):m._loop?A.bufferSource.start(0,k,86400):A.bufferSource.start(0,k,x),H!==1/0&&(s._endTimers[m._id]=setTimeout(s._ended.bind(s,m),H)),o||setTimeout(function(){s._emit("play",m._id),s._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?B():(s._playLock=!0,s.once("resume",B),s._clearTimer(m._id))}else{var I=function(){A.currentTime=k,A.muted=m._muted||s._muted||r._muted||A.muted,A.volume=m._volume*r.volume(),A.playbackRate=m._rate;try{var M=A.play();if(M&&typeof Promise<"u"&&(M instanceof Promise||typeof M.then=="function")?(s._playLock=!0,S(),M.then(function(){s._playLock=!1,A._unlocked=!0,o?s._loadQueue():s._emit("play",m._id)}).catch(function(){s._playLock=!1,s._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),m._ended=!0,m._paused=!0})):o||(s._playLock=!1,S(),s._emit("play",m._id)),A.playbackRate=m._rate,A.paused){s._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||m._loop?s._endTimers[m._id]=setTimeout(s._ended.bind(s,m),H):(s._endTimers[m._id]=function(){s._ended(m),A.removeEventListener("ended",s._endTimers[m._id],!1)},A.addEventListener("ended",s._endTimers[m._id],!1))}catch(L){s._emit("playerror",m._id,L)}};A.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(A.src=s._src,A.load());var D=window&&window.ejecta||!A.readyState&&r._navigator.isCocoonJS;if(A.readyState>=3||D)I();else{s._playLock=!0,s._state="loading";var O=function(){s._state="loaded",I(),A.removeEventListener(r._canPlayEvent,O,!1)};A.addEventListener(r._canPlayEvent,O,!1),s._clearTimer(m._id)}}return m._id},pause:function(e){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"pause",action:function(){o.pause(e)}}),o;for(var s=o._getSoundIds(e),_=0;_<s.length;_++){o._clearTimer(s[_]);var h=o._soundById(s[_]);if(h&&!h._paused&&(h._seek=o.seek(s[_]),h._rateSeek=0,h._paused=!0,o._stopFade(s[_]),h._node))if(o._webAudio){if(!h._node.bufferSource)continue;typeof h._node.bufferSource.stop>"u"?h._node.bufferSource.noteOff(0):h._node.bufferSource.stop(0),o._cleanBuffer(h._node)}else(!isNaN(h._node.duration)||h._node.duration===1/0)&&h._node.pause();arguments[1]||o._emit("pause",h?h._id:null)}return o},stop:function(e,o){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"stop",action:function(){s.stop(e)}}),s;for(var _=s._getSoundIds(e),h=0;h<_.length;h++){s._clearTimer(_[h]);var g=s._soundById(_[h]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,s._stopFade(_[h]),g._node&&(s._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),s._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&s._clearSound(g._node))),o||s._emit("stop",g._id))}return s},mute:function(e,o){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"mute",action:function(){s.mute(e,o)}}),s;if(typeof o>"u")if(typeof e=="boolean")s._muted=e;else return s._muted;for(var _=s._getSoundIds(o),h=0;h<_.length;h++){var g=s._soundById(_[h]);g&&(g._muted=e,g._interval&&s._stopFade(g._id),s._webAudio&&g._node?g._node.gain.setValueAtTime(e?0:g._volume,r.ctx.currentTime):g._node&&(g._node.muted=r._muted?!0:e),s._emit("mute",g._id))}return s},volume:function(){var e=this,o=arguments,s,_;if(o.length===0)return e._volume;if(o.length===1||o.length===2&&typeof o[1]>"u"){var h=e._getSoundIds(),g=h.indexOf(o[0]);g>=0?_=parseInt(o[0],10):s=parseFloat(o[0])}else o.length>=2&&(s=parseFloat(o[0]),_=parseInt(o[1],10));var m;if(typeof s<"u"&&s>=0&&s<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,o)}}),e;typeof _>"u"&&(e._volume=s),_=e._getSoundIds(_);for(var y=0;y<_.length;y++)m=e._soundById(_[y]),m&&(m._volume=s,o[2]||e._stopFade(_[y]),e._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(s,r.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=s*r.volume()),e._emit("volume",m._id))}else return m=_?e._soundById(_):e._sounds[0],m?m._volume:0;return e},fade:function(e,o,s,_){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"fade",action:function(){h.fade(e,o,s,_)}}),h;e=Math.min(Math.max(0,parseFloat(e)),1),o=Math.min(Math.max(0,parseFloat(o)),1),s=parseFloat(s),h.volume(e,_);for(var g=h._getSoundIds(_),m=0;m<g.length;m++){var y=h._soundById(g[m]);if(y){if(_||h._stopFade(g[m]),h._webAudio&&!y._muted){var k=r.ctx.currentTime,x=k+s/1e3;y._volume=e,y._node.gain.setValueAtTime(e,k),y._node.gain.linearRampToValueAtTime(o,x)}h._startFadeInterval(y,e,o,s,g[m],typeof _>"u")}}return h},_startFadeInterval:function(e,o,s,_,h,g){var m=this,y=o,k=s-o,x=Math.abs(k/.01),H=Math.max(4,x>0?_/x:_),T=Date.now();e._fadeTo=s,e._interval=setInterval(function(){var w=(Date.now()-T)/_;T=Date.now(),y+=k*w,y=Math.round(y*100)/100,k<0?y=Math.max(s,y):y=Math.min(s,y),m._webAudio?e._volume=y:m.volume(y,e._id,!0),g&&(m._volume=y),(s<o&&y<=s||s>o&&y>=s)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,m.volume(s,e._id),m._emit("fade",e._id))},H)},_stopFade:function(e){var o=this,s=o._soundById(e);return s&&s._interval&&(o._webAudio&&s._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(s._interval),s._interval=null,o.volume(s._fadeTo,e),s._fadeTo=null,o._emit("fade",e)),o},loop:function(){var e=this,o=arguments,s,_,h;if(o.length===0)return e._loop;if(o.length===1)if(typeof o[0]=="boolean")s=o[0],e._loop=s;else return h=e._soundById(parseInt(o[0],10)),h?h._loop:!1;else o.length===2&&(s=o[0],_=parseInt(o[1],10));for(var g=e._getSoundIds(_),m=0;m<g.length;m++)h=e._soundById(g[m]),h&&(h._loop=s,e._webAudio&&h._node&&h._node.bufferSource&&(h._node.bufferSource.loop=s,s&&(h._node.bufferSource.loopStart=h._start||0,h._node.bufferSource.loopEnd=h._stop,e.playing(g[m])&&(e.pause(g[m],!0),e.play(g[m],!0)))));return e},rate:function(){var e=this,o=arguments,s,_;if(o.length===0)_=e._sounds[0]._id;else if(o.length===1){var h=e._getSoundIds(),g=h.indexOf(o[0]);g>=0?_=parseInt(o[0],10):s=parseFloat(o[0])}else o.length===2&&(s=parseFloat(o[0]),_=parseInt(o[1],10));var m;if(typeof s=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,o)}}),e;typeof _>"u"&&(e._rate=s),_=e._getSoundIds(_);for(var y=0;y<_.length;y++)if(m=e._soundById(_[y]),m){e.playing(_[y])&&(m._rateSeek=e.seek(_[y]),m._playStart=e._webAudio?r.ctx.currentTime:m._playStart),m._rate=s,e._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.setValueAtTime(s,r.ctx.currentTime):m._node&&(m._node.playbackRate=s);var k=e.seek(_[y]),x=(e._sprite[m._sprite][0]+e._sprite[m._sprite][1])/1e3-k,H=x*1e3/Math.abs(m._rate);(e._endTimers[_[y]]||!m._paused)&&(e._clearTimer(_[y]),e._endTimers[_[y]]=setTimeout(e._ended.bind(e,m),H)),e._emit("rate",m._id)}}else return m=e._soundById(_),m?m._rate:e._rate;return e},seek:function(){var e=this,o=arguments,s,_;if(o.length===0)e._sounds.length&&(_=e._sounds[0]._id);else if(o.length===1){var h=e._getSoundIds(),g=h.indexOf(o[0]);g>=0?_=parseInt(o[0],10):e._sounds.length&&(_=e._sounds[0]._id,s=parseFloat(o[0]))}else o.length===2&&(s=parseFloat(o[0]),_=parseInt(o[1],10));if(typeof _>"u")return 0;if(typeof s=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,o)}}),e;var m=e._soundById(_);if(m)if(typeof s=="number"&&s>=0){var y=e.playing(_);y&&e.pause(_,!0),m._seek=s,m._ended=!1,e._clearTimer(_),!e._webAudio&&m._node&&!isNaN(m._node.duration)&&(m._node.currentTime=s);var k=function(){y&&e.play(_,!0),e._emit("seek",_)};if(y&&!e._webAudio){var x=function(){e._playLock?setTimeout(x,0):k()};setTimeout(x,0)}else k()}else if(e._webAudio){var H=e.playing(_)?r.ctx.currentTime-m._playStart:0,T=m._rateSeek?m._rateSeek-m._seek:0;return m._seek+(T+H*Math.abs(m._rate))}else return m._node.currentTime;return e},playing:function(e){var o=this;if(typeof e=="number"){var s=o._soundById(e);return s?!s._paused:!1}for(var _=0;_<o._sounds.length;_++)if(!o._sounds[_]._paused)return!0;return!1},duration:function(e){var o=this,s=o._duration,_=o._soundById(e);return _&&(s=o._sprite[_._sprite][1]/1e3),s},state:function(){return this._state},unload:function(){for(var e=this,o=e._sounds,s=0;s<o.length;s++)o[s]._paused||e.stop(o[s]._id),e._webAudio||(e._clearSound(o[s]._node),o[s]._node.removeEventListener("error",o[s]._errorFn,!1),o[s]._node.removeEventListener(r._canPlayEvent,o[s]._loadFn,!1),o[s]._node.removeEventListener("ended",o[s]._endFn,!1),r._releaseHtml5Audio(o[s]._node)),delete o[s]._node,e._clearTimer(o[s]._id);var _=r._howls.indexOf(e);_>=0&&r._howls.splice(_,1);var h=!0;for(s=0;s<r._howls.length;s++)if(r._howls[s]._src===e._src||e._src.indexOf(r._howls[s]._src)>=0){h=!1;break}return u&&h&&delete u[e._src],r.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,o,s,_){var h=this,g=h["_on"+e];return typeof o=="function"&&g.push(_?{id:s,fn:o,once:_}:{id:s,fn:o}),h},off:function(e,o,s){var _=this,h=_["_on"+e],g=0;if(typeof o=="number"&&(s=o,o=null),o||s)for(g=0;g<h.length;g++){var m=s===h[g].id;if(o===h[g].fn&&m||!o&&m){h.splice(g,1);break}}else if(e)_["_on"+e]=[];else{var y=Object.keys(_);for(g=0;g<y.length;g++)y[g].indexOf("_on")===0&&Array.isArray(_[y[g]])&&(_[y[g]]=[])}return _},once:function(e,o,s){var _=this;return _.on(e,o,s,1),_},_emit:function(e,o,s){for(var _=this,h=_["_on"+e],g=h.length-1;g>=0;g--)(!h[g].id||h[g].id===o||e==="load")&&(setTimeout(function(m){m.call(this,o,s)}.bind(_,h[g].fn),0),h[g].once&&_.off(e,h[g].fn,h[g].id));return _._loadQueue(e),_},_loadQueue:function(e){var o=this;if(o._queue.length>0){var s=o._queue[0];s.event===e&&(o._queue.shift(),o._loadQueue()),e||s.action()}return o},_ended:function(e){var o=this,s=e._sprite;if(!o._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(o._ended.bind(o,e),100),o;var _=!!(e._loop||o._sprite[s][2]);if(o._emit("end",e._id),!o._webAudio&&_&&o.stop(e._id,!0).play(e._id),o._webAudio&&_){o._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=r.ctx.currentTime;var h=(e._stop-e._start)*1e3/Math.abs(e._rate);o._endTimers[e._id]=setTimeout(o._ended.bind(o,e),h)}return o._webAudio&&!_&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,o._clearTimer(e._id),o._cleanBuffer(e._node),r._autoSuspend()),!o._webAudio&&!_&&o.stop(e._id,!0),o},_clearTimer:function(e){var o=this;if(o._endTimers[e]){if(typeof o._endTimers[e]!="function")clearTimeout(o._endTimers[e]);else{var s=o._soundById(e);s&&s._node&&s._node.removeEventListener("ended",o._endTimers[e],!1)}delete o._endTimers[e]}return o},_soundById:function(e){for(var o=this,s=0;s<o._sounds.length;s++)if(e===o._sounds[s]._id)return o._sounds[s];return null},_inactiveSound:function(){var e=this;e._drain();for(var o=0;o<e._sounds.length;o++)if(e._sounds[o]._ended)return e._sounds[o].reset();return new a(e)},_drain:function(){var e=this,o=e._pool,s=0,_=0;if(!(e._sounds.length<o)){for(_=0;_<e._sounds.length;_++)e._sounds[_]._ended&&s++;for(_=e._sounds.length-1;_>=0;_--){if(s<=o)return;e._sounds[_]._ended&&(e._webAudio&&e._sounds[_]._node&&e._sounds[_]._node.disconnect(0),e._sounds.splice(_,1),s--)}}},_getSoundIds:function(e){var o=this;if(typeof e>"u"){for(var s=[],_=0;_<o._sounds.length;_++)s.push(o._sounds[_]._id);return s}else return[e]},_refreshBuffer:function(e){var o=this;return e._node.bufferSource=r.ctx.createBufferSource(),e._node.bufferSource.buffer=u[o._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,r.ctx.currentTime),o},_cleanBuffer:function(e){var o=this,s=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),s))try{e.bufferSource.buffer=r._scratchBuffer}catch{}return e.bufferSource=null,o},_clearSound:function(e){var o=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);o||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this,o=e._parent;return e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,o._sounds.push(e),e.create(),e},create:function(){var e=this,o=e._parent,s=r._muted||e._muted||e._parent._muted?0:e._volume;return o._webAudio?(e._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),e._node.gain.setValueAtTime(s,r.ctx.currentTime),e._node.paused=!0,e._node.connect(r.masterGain)):r.noAudio||(e._node=r._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(r._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=o._src,e._node.preload=o._preload===!0?"auto":o._preload,e._node.volume=s*r.volume(),e._node.load()),e},reset:function(){var e=this,o=e._parent;return e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,o=e._parent;o._duration=Math.ceil(e._node.duration*10)/10,Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue()),e._node.removeEventListener(r._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,o=e._parent;o._duration===1/0&&(o._duration=Math.ceil(e._node.duration*10)/10,o._sprite.__default[1]===1/0&&(o._sprite.__default[1]=o._duration*1e3),o._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var u={},l=function(e){var o=e._src;if(u[o]){e._duration=u[o].duration,d(e);return}if(/^data:[^;]+;base64,/.test(o)){for(var s=atob(o.split(",")[1]),_=new Uint8Array(s.length),h=0;h<s.length;++h)_[h]=s.charCodeAt(h);c(_.buffer,e)}else{var g=new XMLHttpRequest;g.open(e._xhr.method,o,!0),g.withCredentials=e._xhr.withCredentials,g.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(m){g.setRequestHeader(m,e._xhr.headers[m])}),g.onload=function(){var m=(g.status+"")[0];if(m!=="0"&&m!=="2"&&m!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}c(g.response,e)},g.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete u[o],e.load())},f(g)}},f=function(e){try{e.send()}catch{e.onerror()}},c=function(e,o){var s=function(){o._emit("loaderror",null,"Decoding audio data failed.")},_=function(h){h&&o._sounds.length>0?(u[o._src]=h,d(o,h)):s()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(e).then(_).catch(s):r.ctx.decodeAudioData(e,_,s)},d=function(e,o){o&&!e._duration&&(e._duration=o.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),o=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),s=o?parseInt(o[1],10):null;if(e&&s&&s<9){var _=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!_&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};t.Howler=r,t.Howl=i,typeof J<"u"?(J.HowlerGlobal=n,J.Howler=r,J.Howl=i,J.Sound=a):typeof window<"u"&&(window.HowlerGlobal=n,window.Howler=r,window.Howl=i,window.Sound=a)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var a=i._howls.length-1;a>=0;a--)i._howls[a].stereo(r);return i},HowlerGlobal.prototype.pos=function(r,i,a){var u=this;if(!u.ctx||!u.ctx.listener)return u;if(i=typeof i!="number"?u._pos[1]:i,a=typeof a!="number"?u._pos[2]:a,typeof r=="number")u._pos=[r,i,a],typeof u.ctx.listener.positionX<"u"?(u.ctx.listener.positionX.setTargetAtTime(u._pos[0],Howler.ctx.currentTime,.1),u.ctx.listener.positionY.setTargetAtTime(u._pos[1],Howler.ctx.currentTime,.1),u.ctx.listener.positionZ.setTargetAtTime(u._pos[2],Howler.ctx.currentTime,.1)):u.ctx.listener.setPosition(u._pos[0],u._pos[1],u._pos[2]);else return u._pos;return u},HowlerGlobal.prototype.orientation=function(r,i,a,u,l,f){var c=this;if(!c.ctx||!c.ctx.listener)return c;var d=c._orientation;if(i=typeof i!="number"?d[1]:i,a=typeof a!="number"?d[2]:a,u=typeof u!="number"?d[3]:u,l=typeof l!="number"?d[4]:l,f=typeof f!="number"?d[5]:f,typeof r=="number")c._orientation=[r,i,a,u,l,f],typeof c.ctx.listener.forwardX<"u"?(c.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),c.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),c.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),c.ctx.listener.upX.setTargetAtTime(u,Howler.ctx.currentTime,.1),c.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),c.ctx.listener.upZ.setTargetAtTime(f,Howler.ctx.currentTime,.1)):c.ctx.listener.setOrientation(r,i,a,u,l,f);else return d;return c},Howl.prototype.init=function(r){return function(i){var a=this;return a._orientation=i.orientation||[1,0,0],a._stereo=i.stereo||null,a._pos=i.pos||null,a._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},a._onstereo=i.onstereo?[{fn:i.onstereo}]:[],a._onpos=i.onpos?[{fn:i.onpos}]:[],a._onorientation=i.onorientation?[{fn:i.onorientation}]:[],r.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,i){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(r,i)}}),a;var u=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof r=="number")a._stereo=r,a._pos=[r,0,0];else return a._stereo;for(var l=a._getSoundIds(i),f=0;f<l.length;f++){var c=a._soundById(l[f]);if(c)if(typeof r=="number")c._stereo=r,c._pos=[r,0,0],c._node&&(c._pannerAttr.panningModel="equalpower",(!c._panner||!c._panner.pan)&&n(c,u),u==="spatial"?typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):c._panner.setPosition(r,0,0):c._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),a._emit("stereo",c._id);else return c._stereo}return a},Howl.prototype.pos=function(r,i,a,u){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(r,i,a,u)}}),l;if(i=typeof i!="number"?0:i,a=typeof a!="number"?-.5:a,typeof u>"u")if(typeof r=="number")l._pos=[r,i,a];else return l._pos;for(var f=l._getSoundIds(u),c=0;c<f.length;c++){var d=l._soundById(f[c]);if(d)if(typeof r=="number")d._pos=[r,i,a],d._node&&((!d._panner||d._panner.pan)&&n(d,"spatial"),typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):d._panner.setPosition(r,i,a)),l._emit("pos",d._id);else return d._pos}return l},Howl.prototype.orientation=function(r,i,a,u){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(r,i,a,u)}}),l;if(i=typeof i!="number"?l._orientation[1]:i,a=typeof a!="number"?l._orientation[2]:a,typeof u>"u")if(typeof r=="number")l._orientation=[r,i,a];else return l._orientation;for(var f=l._getSoundIds(u),c=0;c<f.length;c++){var d=l._soundById(f[c]);if(d)if(typeof r=="number")d._orientation=[r,i,a],d._node&&(d._panner||(d._pos||(d._pos=l._pos||[0,0,-.5]),n(d,"spatial")),typeof d._panner.orientationX<"u"?(d._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):d._panner.setOrientation(r,i,a)),l._emit("orientation",d._id);else return d._orientation}return l},Howl.prototype.pannerAttr=function(){var r=this,i=arguments,a,u,l;if(!r._webAudio)return r;if(i.length===0)return r._pannerAttr;if(i.length===1)if(typeof i[0]=="object")a=i[0],typeof u>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),r._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:r._panningModel});else return l=r._soundById(parseInt(i[0],10)),l?l._pannerAttr:r._pannerAttr;else i.length===2&&(a=i[0],u=parseInt(i[1],10));for(var f=r._getSoundIds(u),c=0;c<f.length;c++)if(l=r._soundById(f[c]),l){var d=l._pannerAttr;d={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:d.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:d.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:d.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:d.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:d.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:d.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:d.panningModel};var p=l._panner;p?(p.coneInnerAngle=d.coneInnerAngle,p.coneOuterAngle=d.coneOuterAngle,p.coneOuterGain=d.coneOuterGain,p.distanceModel=d.distanceModel,p.maxDistance=d.maxDistance,p.refDistance=d.refDistance,p.rolloffFactor=d.rolloffFactor,p.panningModel=d.panningModel):(l._pos||(l._pos=r._pos||[0,0,-.5]),n(l,"spatial"))}return r},Sound.prototype.init=function(r){return function(){var i=this,a=i._parent;i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,r.call(this),i._stereo?a.stereo(i._stereo):i._pos&&a.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var i=this,a=i._parent;return i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,i._stereo?a.stereo(i._stereo):i._pos?a.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,a._refreshBuffer(i)),r.call(this)}}(Sound.prototype.reset);var n=function(r,i){i=i||"spatial",i==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(ge);function wn(t){const n=t-1;return n*n*n+1}function ot(t){return--t*t*t*t*t+1}function lt(t,{delay:n=0,duration:r=400,easing:i=on}={}){const a=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:u=>`opacity: ${u*a}`}}function st(t,{delay:n=0,duration:r=400,easing:i=wn}={}){const a=getComputedStyle(t),u=+a.opacity,l=parseFloat(a.height),f=parseFloat(a.paddingTop),c=parseFloat(a.paddingBottom),d=parseFloat(a.marginTop),p=parseFloat(a.marginBottom),e=parseFloat(a.borderTopWidth),o=parseFloat(a.borderBottomWidth);return{delay:n,duration:r,easing:i,css:s=>`overflow: hidden;opacity: ${Math.min(s*20,1)*u};height: ${s*l}px;padding-top: ${s*f}px;padding-bottom: ${s*c}px;margin-top: ${s*d}px;margin-bottom: ${s*p}px;border-top-width: ${s*e}px;border-bottom-width: ${s*o}px;`}}function kn(t){let n,r,i;return{c(){n=N("div"),this.h()},l(a){n=P(a,"DIV",{class:!0}),R(n).forEach(b),this.h()},h(){v(n,"class","svelte-6x11a4"),z(n,"played",t[4]>=t[0]-ut),z(n,"off-grid",t[5]),C(n,"height",`${t[2]}px`),C(n,"width",`${t[1]}px`),C(n,"left",`${t[3]}px`)},m(a,u){G(a,n,u),i=!0},p(a,[u]){(!i||u&17)&&z(n,"played",a[4]>=a[0]-ut),(!i||u&32)&&z(n,"off-grid",a[5]),u&4&&C(n,"height",`${a[2]}px`),u&2&&C(n,"width",`${a[1]}px`),u&8&&C(n,"left",`${a[3]}px`)},i(a){i||(Ke(()=>{r||(r=Ne(n,lt,{},!0)),r.run(1)}),i=!0)},o(a){r||(r=Ne(n,lt,{},!1)),r.run(0),i=!1},d(a){a&&b(n),a&&r&&r.end()}}}const ut=.05;function An(t,n,r){let i,a,u,{note:l}=n,{instrumentId:f}=n,{width:c}=n,{height:d}=n,{x:p}=n;const{getT:e,getInstrumentToggles:o}=Ge("song"),s=e();fe(t,s,h=>r(4,u=h));const _=o();return fe(t,_,h=>r(9,a=h)),new ge.Howl({src:["assets/sound/hihat.mp3"]}),new ge.Howl({src:["assets/sound/kick.mp3"]}),new ge.Howl({src:["assets/sound/snare.mp3"]}),t.$$set=h=>{"note"in h&&r(0,l=h.note),"instrumentId"in h&&r(8,f=h.instrumentId),"width"in h&&r(1,c=h.width),"height"in h&&r(2,d=h.height),"x"in h&&r(3,p=h.x)},t.$$.update=()=>{t.$$.dirty&1&&r(5,i=l%.0625!==0),t.$$.dirty&17,t.$$.dirty&768&&a[f]},[l,c,d,p,u,i,s,_,f,a]}class xn extends Y{constructor(n){super(),Q(this,n,An,kn,Z,{note:0,instrumentId:8,width:1,height:2,x:3})}}function Ee(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Qt(t){let n,r,i;t.length!==2?(n=Ee,r=(f,c)=>Ee(t(f),c),i=(f,c)=>t(f)-c):(n=t===Ee||t===_n?t:Tn,r=t,i=t);function a(f,c,d=0,p=f.length){if(d<p){if(n(c,c)!==0)return p;do{const e=d+p>>>1;r(f[e],c)<0?d=e+1:p=e}while(d<p)}return d}function u(f,c,d=0,p=f.length){if(d<p){if(n(c,c)!==0)return p;do{const e=d+p>>>1;r(f[e],c)<=0?d=e+1:p=e}while(d<p)}return d}function l(f,c,d=0,p=f.length){const e=a(f,c,d,p-1);return e>d&&i(f[e-1],c)>-i(f[e],c)?e-1:e}return{left:a,center:l,right:u}}function Tn(){return 0}function Mn(t){return t===null?NaN:+t}const Sn=Qt(Ee),In=Sn.right;Qt(Mn).center;const En=In,On=Math.sqrt(50),Nn=Math.sqrt(10),Pn=Math.sqrt(2);function Pe(t,n,r){const i=(n-t)/Math.max(0,r),a=Math.floor(Math.log10(i)),u=i/Math.pow(10,a),l=u>=On?10:u>=Nn?5:u>=Pn?2:1;let f,c,d;return a<0?(d=Math.pow(10,-a)/l,f=Math.round(t*d),c=Math.round(n*d),f/d<t&&++f,c/d>n&&--c,d=-d):(d=Math.pow(10,a)*l,f=Math.round(t/d),c=Math.round(n/d),f*d<t&&++f,c*d>n&&--c),c<f&&.5<=r&&r<2?Pe(t,n,r*2):[f,c,d]}function Hn(t,n,r){if(n=+n,t=+t,r=+r,!(r>0))return[];if(t===n)return[t];const i=n<t,[a,u,l]=i?Pe(n,t,r):Pe(t,n,r);if(!(u>=a))return[];const f=u-a+1,c=new Array(f);if(i)if(l<0)for(let d=0;d<f;++d)c[d]=(u-d)/-l;else for(let d=0;d<f;++d)c[d]=(u-d)*l;else if(l<0)for(let d=0;d<f;++d)c[d]=(a+d)/-l;else for(let d=0;d<f;++d)c[d]=(a+d)*l;return c}function We(t,n,r){return n=+n,t=+t,r=+r,Pe(t,n,r)[2]}function Bn(t,n,r){n=+n,t=+t,r=+r;const i=n<t,a=i?We(n,t,r):We(t,n,r);return(i?-1:1)*(a<0?1/-a:a)}function ye(t,n,r){t=+t,n=+n,r=(a=arguments.length)<2?(n=t,t=0,1):a<3?1:+r;for(var i=-1,a=Math.max(0,Math.ceil((n-t)/r))|0,u=new Array(a);++i<a;)u[i]=t+i*r;return u}function Je(t,n,r){t.prototype=n.prototype=r,r.constructor=t}function Zt(t,n){var r=Object.create(t.prototype);for(var i in n)r[i]=n[i];return r}function Ae(){}var be=.7,He=1/be,de="\\s*([+-]?\\d+)\\s*",we="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",X="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dn=/^#([0-9a-f]{3,8})$/,Ln=new RegExp(`^rgb\\(${de},${de},${de}\\)$`),Fn=new RegExp(`^rgb\\(${X},${X},${X}\\)$`),Rn=new RegExp(`^rgba\\(${de},${de},${de},${we}\\)$`),Gn=new RegExp(`^rgba\\(${X},${X},${X},${we}\\)$`),Vn=new RegExp(`^hsl\\(${we},${X},${X}\\)$`),Cn=new RegExp(`^hsla\\(${we},${X},${X},${we}\\)$`),ft={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Je(Ae,ke,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ct,formatHex:ct,formatHex8:$n,formatHsl:jn,formatRgb:dt,toString:dt});function ct(){return this.rgb().formatHex()}function $n(){return this.rgb().formatHex8()}function jn(){return Kt(this).formatHsl()}function dt(){return this.rgb().formatRgb()}function ke(t){var n,r;return t=(t+"").trim().toLowerCase(),(n=Dn.exec(t))?(r=n[1].length,n=parseInt(n[1],16),r===6?_t(n):r===3?new q(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Me(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Me(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Ln.exec(t))?new q(n[1],n[2],n[3],1):(n=Fn.exec(t))?new q(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Rn.exec(t))?Me(n[1],n[2],n[3],n[4]):(n=Gn.exec(t))?Me(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Vn.exec(t))?pt(n[1],n[2]/100,n[3]/100,1):(n=Cn.exec(t))?pt(n[1],n[2]/100,n[3]/100,n[4]):ft.hasOwnProperty(t)?_t(ft[t]):t==="transparent"?new q(NaN,NaN,NaN,0):null}function _t(t){return new q(t>>16&255,t>>8&255,t&255,1)}function Me(t,n,r,i){return i<=0&&(t=n=r=NaN),new q(t,n,r,i)}function qn(t){return t instanceof Ae||(t=ke(t)),t?(t=t.rgb(),new q(t.r,t.g,t.b,t.opacity)):new q}function Xe(t,n,r,i){return arguments.length===1?qn(t):new q(t,n,r,i??1)}function q(t,n,r,i){this.r=+t,this.g=+n,this.b=+r,this.opacity=+i}Je(q,Xe,Zt(Ae,{brighter(t){return t=t==null?He:Math.pow(He,t),new q(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?be:Math.pow(be,t),new q(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new q(ue(this.r),ue(this.g),ue(this.b),Be(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mt,formatHex:mt,formatHex8:Wn,formatRgb:ht,toString:ht}));function mt(){return`#${se(this.r)}${se(this.g)}${se(this.b)}`}function Wn(){return`#${se(this.r)}${se(this.g)}${se(this.b)}${se((isNaN(this.opacity)?1:this.opacity)*255)}`}function ht(){const t=Be(this.opacity);return`${t===1?"rgb(":"rgba("}${ue(this.r)}, ${ue(this.g)}, ${ue(this.b)}${t===1?")":`, ${t})`}`}function Be(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ue(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function se(t){return t=ue(t),(t<16?"0":"")+t.toString(16)}function pt(t,n,r,i){return i<=0?t=n=r=NaN:r<=0||r>=1?t=n=NaN:n<=0&&(t=NaN),new W(t,n,r,i)}function Kt(t){if(t instanceof W)return new W(t.h,t.s,t.l,t.opacity);if(t instanceof Ae||(t=ke(t)),!t)return new W;if(t instanceof W)return t;t=t.rgb();var n=t.r/255,r=t.g/255,i=t.b/255,a=Math.min(n,r,i),u=Math.max(n,r,i),l=NaN,f=u-a,c=(u+a)/2;return f?(n===u?l=(r-i)/f+(r<i)*6:r===u?l=(i-n)/f+2:l=(n-r)/f+4,f/=c<.5?u+a:2-u-a,l*=60):f=c>0&&c<1?0:l,new W(l,f,c,t.opacity)}function Xn(t,n,r,i){return arguments.length===1?Kt(t):new W(t,n,r,i??1)}function W(t,n,r,i){this.h=+t,this.s=+n,this.l=+r,this.opacity=+i}Je(W,Xn,Zt(Ae,{brighter(t){return t=t==null?He:Math.pow(He,t),new W(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?be:Math.pow(be,t),new W(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,a=2*r-i;return new q(Ce(t>=240?t-240:t+120,a,i),Ce(t,a,i),Ce(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new W(gt(this.h),Se(this.s),Se(this.l),Be(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Be(this.opacity);return`${t===1?"hsl(":"hsla("}${gt(this.h)}, ${Se(this.s)*100}%, ${Se(this.l)*100}%${t===1?")":`, ${t})`}`}}));function gt(t){return t=(t||0)%360,t<0?t+360:t}function Se(t){return Math.max(0,Math.min(1,t||0))}function Ce(t,n,r){return(t<60?n+(r-n)*t/60:t<180?r:t<240?n+(r-n)*(240-t)/60:n)*255}const ze=t=>()=>t;function Yn(t,n){return function(r){return t+r*n}}function Qn(t,n,r){return t=Math.pow(t,r),n=Math.pow(n,r)-t,r=1/r,function(i){return Math.pow(t+i*n,r)}}function Zn(t){return(t=+t)==1?Jt:function(n,r){return r-n?Qn(n,r,t):ze(isNaN(n)?r:n)}}function Jt(t,n){var r=n-t;return r?Yn(t,r):ze(isNaN(t)?n:t)}const vt=function t(n){var r=Zn(n);function i(a,u){var l=r((a=Xe(a)).r,(u=Xe(u)).r),f=r(a.g,u.g),c=r(a.b,u.b),d=Jt(a.opacity,u.opacity);return function(p){return a.r=l(p),a.g=f(p),a.b=c(p),a.opacity=d(p),a+""}}return i.gamma=t,i}(1);function Kn(t,n){n||(n=[]);var r=t?Math.min(n.length,t.length):0,i=n.slice(),a;return function(u){for(a=0;a<r;++a)i[a]=t[a]*(1-u)+n[a]*u;return i}}function Jn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zn(t,n){var r=n?n.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),u=new Array(r),l;for(l=0;l<i;++l)a[l]=Ue(t[l],n[l]);for(;l<r;++l)u[l]=n[l];return function(f){for(l=0;l<i;++l)u[l]=a[l](f);return u}}function Un(t,n){var r=new Date;return t=+t,n=+n,function(i){return r.setTime(t*(1-i)+n*i),r}}function De(t,n){return t=+t,n=+n,function(r){return t*(1-r)+n*r}}function er(t,n){var r={},i={},a;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(a in n)a in t?r[a]=Ue(t[a],n[a]):i[a]=n[a];return function(u){for(a in r)i[a]=r[a](u);return i}}var Ye=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$e=new RegExp(Ye.source,"g");function tr(t){return function(){return t}}function nr(t){return function(n){return t(n)+""}}function rr(t,n){var r=Ye.lastIndex=$e.lastIndex=0,i,a,u,l=-1,f=[],c=[];for(t=t+"",n=n+"";(i=Ye.exec(t))&&(a=$e.exec(n));)(u=a.index)>r&&(u=n.slice(r,u),f[l]?f[l]+=u:f[++l]=u),(i=i[0])===(a=a[0])?f[l]?f[l]+=a:f[++l]=a:(f[++l]=null,c.push({i:l,x:De(i,a)})),r=$e.lastIndex;return r<n.length&&(u=n.slice(r),f[l]?f[l]+=u:f[++l]=u),f.length<2?c[0]?nr(c[0].x):tr(n):(n=c.length,function(d){for(var p=0,e;p<n;++p)f[(e=c[p]).i]=e.x(d);return f.join("")})}function Ue(t,n){var r=typeof n,i;return n==null||r==="boolean"?ze(n):(r==="number"?De:r==="string"?(i=ke(n))?(n=i,vt):rr:n instanceof ke?vt:n instanceof Date?Un:Jn(n)?Kn:Array.isArray(n)?zn:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?er:De)(t,n)}function ir(t,n){return t=+t,n=+n,function(r){return Math.round(t*(1-r)+n*r)}}function ar(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Le(t,n){if((r=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var r,i=t.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+t.slice(r+1)]}function he(t){return t=Le(Math.abs(t)),t?t[1]:NaN}function or(t,n){return function(r,i){for(var a=r.length,u=[],l=0,f=t[0],c=0;a>0&&f>0&&(c+f+1>i&&(f=Math.max(1,i-c)),u.push(r.substring(a-=f,a+f)),!((c+=f+1)>i));)f=t[l=(l+1)%t.length];return u.reverse().join(n)}}function lr(t){return function(n){return n.replace(/[0-9]/g,function(r){return t[+r]})}}var sr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fe(t){if(!(n=sr.exec(t)))throw new Error("invalid format: "+t);var n;return new et({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Fe.prototype=et.prototype;function et(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}et.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ur(t){e:for(var n=t.length,r=1,i=-1,a;r<n;++r)switch(t[r]){case".":i=a=r;break;case"0":i===0&&(i=r),a=r;break;default:if(!+t[r])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(a+1):t}var zt;function fr(t,n){var r=Le(t,n);if(!r)return t+"";var i=r[0],a=r[1],u=a-(zt=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=i.length;return u===l?i:u>l?i+new Array(u-l+1).join("0"):u>0?i.slice(0,u)+"."+i.slice(u):"0."+new Array(1-u).join("0")+Le(t,Math.max(0,n+u-1))[0]}function yt(t,n){var r=Le(t,n);if(!r)return t+"";var i=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const bt={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ar,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>yt(t*100,n),r:yt,s:fr,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function wt(t){return t}var kt=Array.prototype.map,At=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function cr(t){var n=t.grouping===void 0||t.thousands===void 0?wt:or(kt.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",u=t.numerals===void 0?wt:lr(kt.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(e){e=Fe(e);var o=e.fill,s=e.align,_=e.sign,h=e.symbol,g=e.zero,m=e.width,y=e.comma,k=e.precision,x=e.trim,H=e.type;H==="n"?(y=!0,H="g"):bt[H]||(k===void 0&&(k=12),x=!0,H="g"),(g||o==="0"&&s==="=")&&(g=!0,o="0",s="=");var T=h==="$"?r:h==="#"&&/[boxX]/.test(H)?"0"+H.toLowerCase():"",w=h==="$"?i:/[%p]/.test(H)?l:"",S=bt[H],A=/[defgprs%]/.test(H);k=k===void 0?6:/[gprs]/.test(H)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function B(I){var D=T,O=w,M,L,le;if(H==="c")O=S(I)+O,I="";else{I=+I;var xe=I<0||1/I<0;if(I=isNaN(I)?c:S(Math.abs(I),k),x&&(I=ur(I)),xe&&+I==0&&_!=="+"&&(xe=!1),D=(xe?_==="("?_:f:_==="-"||_==="("?"":_)+D,O=(H==="s"?At[8+zt/3]:"")+O+(xe&&_==="("?")":""),A){for(M=-1,L=I.length;++M<L;)if(le=I.charCodeAt(M),48>le||le>57){O=(le===46?a+I.slice(M+1):I.slice(M))+O,I=I.slice(0,M);break}}}y&&!g&&(I=n(I,1/0));var Te=D.length+I.length+O.length,K=Te<m?new Array(m-Te+1).join(o):"";switch(y&&g&&(I=n(K+I,K.length?m-O.length:1/0),K=""),s){case"<":I=D+I+O+K;break;case"=":I=D+K+I+O;break;case"^":I=K.slice(0,Te=K.length>>1)+D+I+O+K.slice(Te);break;default:I=K+D+I+O;break}return u(I)}return B.toString=function(){return e+""},B}function p(e,o){var s=d((e=Fe(e),e.type="f",e)),_=Math.max(-8,Math.min(8,Math.floor(he(o)/3)))*3,h=Math.pow(10,-_),g=At[8+_/3];return function(m){return s(h*m)+g}}return{format:d,formatPrefix:p}}var Ie,Ut,en;dr({thousands:",",grouping:[3],currency:["$",""]});function dr(t){return Ie=cr(t),Ut=Ie.format,en=Ie.formatPrefix,Ie}function _r(t){return Math.max(0,-he(Math.abs(t)))}function mr(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(he(n)/3)))*3-he(Math.abs(t)))}function hr(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,he(n)-he(t))+1}function tt(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}const xt=Symbol("implicit");function tn(){var t=new nt,n=[],r=[],i=xt;function a(u){let l=t.get(u);if(l===void 0){if(i!==xt)return i;t.set(u,l=n.push(u)-1)}return r[l%r.length]}return a.domain=function(u){if(!arguments.length)return n.slice();n=[],t=new nt;for(const l of u)t.has(l)||t.set(l,n.push(l)-1);return a},a.range=function(u){return arguments.length?(r=Array.from(u),a):r.slice()},a.unknown=function(u){return arguments.length?(i=u,a):i},a.copy=function(){return tn(n,r).unknown(i)},tt.apply(a,arguments),a}function nn(){var t=tn().unknown(void 0),n=t.domain,r=t.range,i=0,a=1,u,l,f=!1,c=0,d=0,p=.5;delete t.unknown;function e(){var o=n().length,s=a<i,_=s?a:i,h=s?i:a;u=(h-_)/Math.max(1,o-c+d*2),f&&(u=Math.floor(u)),_+=(h-_-u*(o-c))*p,l=u*(1-c),f&&(_=Math.round(_),l=Math.round(l));var g=ye(o).map(function(m){return _+u*m});return r(s?g.reverse():g)}return t.domain=function(o){return arguments.length?(n(o),e()):n()},t.range=function(o){return arguments.length?([i,a]=o,i=+i,a=+a,e()):[i,a]},t.rangeRound=function(o){return[i,a]=o,i=+i,a=+a,f=!0,e()},t.bandwidth=function(){return l},t.step=function(){return u},t.round=function(o){return arguments.length?(f=!!o,e()):f},t.padding=function(o){return arguments.length?(c=Math.min(1,d=+o),e()):c},t.paddingInner=function(o){return arguments.length?(c=Math.min(1,o),e()):c},t.paddingOuter=function(o){return arguments.length?(d=+o,e()):d},t.align=function(o){return arguments.length?(p=Math.max(0,Math.min(1,o)),e()):p},t.copy=function(){return nn(n(),[i,a]).round(f).paddingInner(c).paddingOuter(d).align(p)},tt.apply(e(),arguments)}function pr(t){return function(){return t}}function gr(t){return+t}var Tt=[0,1];function ce(t){return t}function Qe(t,n){return(n-=t=+t)?function(r){return(r-t)/n}:pr(isNaN(n)?NaN:.5)}function vr(t,n){var r;return t>n&&(r=t,t=n,n=r),function(i){return Math.max(t,Math.min(n,i))}}function yr(t,n,r){var i=t[0],a=t[1],u=n[0],l=n[1];return a<i?(i=Qe(a,i),u=r(l,u)):(i=Qe(i,a),u=r(u,l)),function(f){return u(i(f))}}function br(t,n,r){var i=Math.min(t.length,n.length)-1,a=new Array(i),u=new Array(i),l=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++l<i;)a[l]=Qe(t[l],t[l+1]),u[l]=r(n[l],n[l+1]);return function(f){var c=En(t,f,1,i)-1;return u[c](a[c](f))}}function wr(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kr(){var t=Tt,n=Tt,r=Ue,i,a,u,l=ce,f,c,d;function p(){var o=Math.min(t.length,n.length);return l!==ce&&(l=vr(t[0],t[o-1])),f=o>2?br:yr,c=d=null,e}function e(o){return o==null||isNaN(o=+o)?u:(c||(c=f(t.map(i),n,r)))(i(l(o)))}return e.invert=function(o){return l(a((d||(d=f(n,t.map(i),De)))(o)))},e.domain=function(o){return arguments.length?(t=Array.from(o,gr),p()):t.slice()},e.range=function(o){return arguments.length?(n=Array.from(o),p()):n.slice()},e.rangeRound=function(o){return n=Array.from(o),r=ir,p()},e.clamp=function(o){return arguments.length?(l=o?!0:ce,p()):l!==ce},e.interpolate=function(o){return arguments.length?(r=o,p()):r},e.unknown=function(o){return arguments.length?(u=o,e):u},function(o,s){return i=o,a=s,p()}}function Ar(){return kr()(ce,ce)}function xr(t,n,r,i){var a=Bn(t,n,r),u;switch(i=Fe(i??",f"),i.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(n));return i.precision==null&&!isNaN(u=mr(a,l))&&(i.precision=u),en(i,l)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(u=hr(a,Math.max(Math.abs(t),Math.abs(n))))&&(i.precision=u-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(u=_r(a))&&(i.precision=u-(i.type==="%")*2);break}}return Ut(i)}function Tr(t){var n=t.domain;return t.ticks=function(r){var i=n();return Hn(i[0],i[i.length-1],r??10)},t.tickFormat=function(r,i){var a=n();return xr(a[0],a[a.length-1],r??10,i)},t.nice=function(r){r==null&&(r=10);var i=n(),a=0,u=i.length-1,l=i[a],f=i[u],c,d,p=10;for(f<l&&(d=l,l=f,f=d,d=a,a=u,u=d);p-- >0;){if(d=We(l,f,r),d===c)return i[a]=l,i[u]=f,n(i);if(d>0)l=Math.floor(l/d)*d,f=Math.ceil(f/d)*d;else if(d<0)l=Math.ceil(l*d)/d,f=Math.floor(f*d)/d;else break;c=d}return t},t}function Re(){var t=Ar();return t.copy=function(){return wr(t,Re())},tt.apply(t,arguments),Tr(t)}function Mt(t,n,r){const i=t.slice();i[4]=n[r];const a=i[4]%1===0;i[5]=a;const u=i[2](i[4]);return i[6]=u,i}function Mr(t){let n,r=t[4]%4+1+"",i;return{c(){n=N("div"),i=ae(r),this.h()},l(a){n=P(a,"DIV",{class:!0});var u=R(n);i=oe(u,r),u.forEach(b),this.h()},h(){v(n,"class","number svelte-14i3nd7")},m(a,u){G(a,n,u),E(n,i)},p:U,d(a){a&&b(n)}}}function St(t){let n,r,i,a,u=t[4]%1===0&&Mr(t);return{c(){n=N("div"),u&&u.c(),r=$(),i=N("div"),a=$(),this.h()},l(l){n=P(l,"DIV",{class:!0});var f=R(n);u&&u.l(f),r=j(f),i=P(f,"DIV",{class:!0}),R(i).forEach(b),a=j(f),f.forEach(b),this.h()},h(){v(i,"class","line svelte-14i3nd7"),z(i,"thick",t[5]),v(n,"class","group svelte-14i3nd7"),C(n,"left",`${t[6]}px`)},m(l,f){G(l,n,f),u&&u.m(n,null),E(n,r),E(n,i),E(n,a)},p(l,f){l[4]%1===0&&u.p(l,f)},d(l){l&&b(n),u&&u.d()}}}function Sr(t){let n,r,i,a=ye(0,t[0],1/t[1]),u=[];for(let l=0;l<a.length;l+=1)u[l]=St(Mt(t,a,l));return{c(){n=N("div");for(let l=0;l<u.length;l+=1)u[l].c();this.h()},l(l){n=P(l,"DIV",{class:!0});var f=R(n);for(let c=0;c<u.length;c+=1)u[c].l(f);f.forEach(b),this.h()},h(){v(n,"class","grid svelte-14i3nd7")},m(l,f){G(l,n,f);for(let c=0;c<u.length;c+=1)u[c].m(n,null);i=!0},p(l,[f]){if(t=l,f&7){a=ye(0,t[0],1/t[1]);let c;for(c=0;c<a.length;c+=1){const d=Mt(t,a,c);u[c]?u[c].p(d,f):(u[c]=St(d),u[c].c(),u[c].m(n,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=a.length}},i(l){i||(Ke(()=>{r||(r=Ne(n,st,{delay:100,duration:400,easing:ot},!0)),r.run(1)}),i=!0)},o(l){r||(r=Ne(n,st,{delay:100,duration:400,easing:ot},!1)),r.run(0),i=!1},d(l){l&&b(n),pe(u,l),l&&r&&r.end()}}}function Ir(t){const{beatsPerRotation:n,division:r,getXScale:i}=Ge("song"),a=i();return[n,r,a]}class Er extends Y{constructor(n){super(),Q(this,n,Ir,Sr,Z,{})}}function It(t,n,r){const i=t.slice();i[14]=n[r],i[17]=r;const a=i[5](i[14]);return i[15]=a,i}function Et(t){let n,r;return n=new Er({}),{c(){ee(n.$$.fragment)},l(i){te(n.$$.fragment,i)},m(i,a){ne(n,i,a),r=!0},i(i){r||(F(n.$$.fragment,i),r=!0)},o(i){V(n.$$.fragment,i),r=!1},d(i){re(n,i)}}}function Ot(t,n){let r,i,a;return i=new xn({props:{note:n[14],instrumentId:n[1],height:n[2],width:Nr,x:n[15]}}),{key:t,first:null,c(){r=ie(),ee(i.$$.fragment),this.h()},l(u){r=ie(),te(i.$$.fragment,u),this.h()},h(){this.first=r},m(u,l){G(u,r,l),ne(i,u,l),a=!0},p(u,l){n=u;const f={};l&1&&(f.note=n[14]),l&2&&(f.instrumentId=n[1]),l&4&&(f.height=n[2]),l&1&&(f.x=n[15]),i.$set(f)},i(u){a||(F(i.$$.fragment,u),a=!0)},o(u){V(i.$$.fragment,u),a=!1},d(u){u&&b(r),re(i,u)}}}function Or(t){let n,r,i,a=[],u=new Map,l,f,c,d=t[4][t[1]]==="on"&&Et(),p=t[0];const e=o=>`${o[1]}-${o[17]}`;for(let o=0;o<p.length;o+=1){let s=It(t,p,o),_=e(s);u.set(_,a[o]=Ot(_,s))}return{c(){n=N("div"),d&&d.c(),r=$(),i=N("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){n=P(o,"DIV",{class:!0});var s=R(n);d&&d.l(s),r=j(s),i=P(s,"DIV",{class:!0});var _=R(i);for(let h=0;h<a.length;h+=1)a[h].l(_);_.forEach(b),s.forEach(b),this.h()},h(){v(i,"class","notes svelte-1hpvbjn"),v(n,"class","instrument svelte-1hpvbjn"),z(n,"muted",t[3][t[1]]==="off"),C(n,"height",`${t[2]}px`)},m(o,s){G(o,n,s),d&&d.m(n,null),E(n,r),E(n,i);for(let _=0;_<a.length;_+=1)a[_].m(i,null);l=!0,f||(c=[ve(n,"click",t[9]),ve(n,"keydown",t[10])],f=!0)},p(o,[s]){o[4][o[1]]==="on"?d?s&18&&F(d,1):(d=Et(),d.c(),F(d,1),d.m(n,r)):d&&(_e(),V(d,1,1,()=>{d=null}),me()),s&39&&(p=o[0],_e(),a=ln(a,s,e,1,o,p,u,i,sn,Ot,null,It),me()),(!l||s&10)&&z(n,"muted",o[3][o[1]]==="off"),s&4&&C(n,"height",`${o[2]}px`)},i(o){if(!l){F(d);for(let s=0;s<p.length;s+=1)F(a[s]);l=!0}},o(o){V(d);for(let s=0;s<a.length;s+=1)V(a[s]);l=!1},d(o){o&&b(n),d&&d.d();for(let s=0;s<a.length;s+=1)a[s].d();f=!1,qt(c)}}}const Nr=10;function Pr(t,n,r){let i,a,{data:u}=n,{id:l}=n,{height:f}=n;const{getXScale:c,getInstrumentToggles:d,getGridToggles:p}=Ge("song"),e=c(),o=d();fe(t,o,m=>r(3,i=m));const s=p();fe(t,s,m=>r(4,a=m));const _=m=>{Wt(o,i[m]=i[m]==="on"?"off":"on",i)},h=()=>_(l),g=()=>_(l);return t.$$set=m=>{"data"in m&&r(0,u=m.data),"id"in m&&r(1,l=m.id),"height"in m&&r(2,f=m.height)},[u,l,f,i,a,e,o,s,_,h,g]}class Hr extends Y{constructor(n){super(),Q(this,n,Pr,Or,Z,{data:0,id:1,height:2})}}function Nt(t,n,r){const i=t.slice();i[7]=n[r];const a=Math.random()*Dr;i[8]=a;const u=Math.random()*Lr;i[9]=u;const l=i[4][i[1]];i[10]=l;const f=i[5][i[1]];return i[11]=f,i}function Pt(t){let n,r,i;return{c(){n=Xt("circle"),this.h()},l(a){n=Yt(a,"circle",{stroke:!0,cx:!0,cy:!0,r:!0,style:!0,class:!0}),R(n).forEach(b),this.h()},h(){v(n,"stroke",r=t[10]),v(n,"cx",t[8]),v(n,"cy",t[9]),v(n,"r",i=t[11]),v(n,"style",`--duration: ${Fr}ms`),v(n,"class","svelte-109441o"),z(n,"played",t[2]>=t[7]-Ht)},m(a,u){G(a,n,u)},p(a,u){u&2&&r!==(r=a[10])&&v(n,"stroke",r),u&2&&i!==(i=a[11])&&v(n,"r",i),u&5&&z(n,"played",a[2]>=a[7]-Ht)},d(a){a&&b(n)}}}function Br(t){let n,r=t[0],i=[];for(let a=0;a<r.length;a+=1)i[a]=Pt(Nt(t,r,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();n=ie()},l(a){for(let u=0;u<i.length;u+=1)i[u].l(a);n=ie()},m(a,u){for(let l=0;l<i.length;l+=1)i[l].m(a,u);G(a,n,u)},p(a,[u]){if(u&55){r=a[0];let l;for(l=0;l<r.length;l+=1){const f=Nt(a,r,l);i[l]?i[l].p(f,u):(i[l]=Pt(f),i[l].c(),i[l].m(n.parentNode,n))}for(;l<i.length;l+=1)i[l].d(1);i.length=r.length}},i:U,o:U,d(a){pe(i,a),a&&b(n)}}}const Dr=1e3,Lr=800,Fr=3e3,Ht=.05;function Rr(t,n,r){let i,{notes:a}=n,{instrument:u}=n;const{getT:l}=Ge("song"),f=l();fe(t,f,p=>r(2,i=p));const c={hihat:"cyan",snare:"orange",kick:"lime"},d={hihat:30,snare:50,kick:120};return t.$$set=p=>{"notes"in p&&r(0,a=p.notes),"instrument"in p&&r(1,u=p.instrument)},[a,u,i,f,c,d]}class Gr extends Y{constructor(n){super(),Q(this,n,Rr,Br,Z,{notes:0,instrument:1})}}function Bt(t,n,r){const i=t.slice();return i[1]=n[r],i}function Dt(t){let n,r;return n=new Gr({props:{instrument:t[1],notes:t[0][t[1]]}}),{c(){ee(n.$$.fragment)},l(i){te(n.$$.fragment,i)},m(i,a){ne(n,i,a),r=!0},p(i,a){const u={};a&1&&(u.instrument=i[1]),a&1&&(u.notes=i[0][i[1]]),n.$set(u)},i(i){r||(F(n.$$.fragment,i),r=!0)},o(i){V(n.$$.fragment,i),r=!1},d(i){re(n,i)}}}function Vr(t){let n,r,i=Object.keys(t[0]),a=[];for(let l=0;l<i.length;l+=1)a[l]=Dt(Bt(t,i,l));const u=l=>V(a[l],1,1,()=>{a[l]=null});return{c(){n=Xt("svg");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){n=Yt(l,"svg",{height:!0,width:!0,class:!0});var f=R(n);for(let c=0;c<a.length;c+=1)a[c].l(f);f.forEach(b),this.h()},h(){v(n,"height",800),v(n,"width","100%"),v(n,"class","svelte-15s6tbl")},m(l,f){G(l,n,f);for(let c=0;c<a.length;c+=1)a[c].m(n,null);r=!0},p(l,[f]){if(f&1){i=Object.keys(l[0]);let c;for(c=0;c<i.length;c+=1){const d=Bt(l,i,c);a[c]?(a[c].p(d,f),F(a[c],1)):(a[c]=Dt(d),a[c].c(),F(a[c],1),a[c].m(n,null))}for(_e(),c=i.length;c<a.length;c+=1)u(c);me()}},i(l){if(!r){for(let f=0;f<i.length;f+=1)F(a[f]);r=!0}},o(l){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)V(a[f]);r=!1},d(l){l&&b(n),pe(a,l)}}}function Cr(t,n,r){let{data:i}=n;return t.$$set=a=>{"data"in a&&r(0,i=a.data)},[i]}class $r extends Y{constructor(n){super(),Q(this,n,Cr,Vr,Z,{data:0})}}function Lt(t,n,r){const i=t.slice();return i[22]=n[r],i[24]=r,i}function Ft(t,n,r){const i=t.slice();return i[22]=n[r],i[25]=n,i[24]=r,i}function Rt(t){let n,r,i=t[22]+"",a,u,l,f,c,d,p;function e(s){t[16](s,t[22])}let o={label:"Show grid",style:"inner"};return t[5][t[22]]!==void 0&&(o.value=t[5][t[22]]),f=new bn({props:o}),fn.push(()=>cn(f,"value",e)),{c(){n=N("div"),r=N("div"),a=ae(i),u=$(),l=N("div"),ee(f.$$.fragment),d=$(),this.h()},l(s){n=P(s,"DIV",{class:!0});var _=R(n);r=P(_,"DIV",{class:!0});var h=R(r);a=oe(h,i),h.forEach(b),u=j(_),l=P(_,"DIV",{class:!0});var g=R(l);te(f.$$.fragment,g),g.forEach(b),d=j(_),_.forEach(b),this.h()},h(){v(r,"class","label svelte-eroy2c"),v(l,"class","toggle svelte-eroy2c"),v(n,"class","sidebar svelte-eroy2c"),C(n,"height",`${t[2]}px`)},m(s,_){G(s,n,_),E(n,r),E(r,a),E(n,u),E(n,l),ne(f,l,null),E(n,d),p=!0},p(s,_){t=s,(!p||_&1)&&i!==(i=t[22]+"")&&Oe(a,i);const h={};!c&&_&33&&(c=!0,h.value=t[5][t[22]],dn(()=>c=!1)),f.$set(h),_&4&&C(n,"height",`${t[2]}px`)},i(s){p||(F(f.$$.fragment,s),p=!0)},o(s){V(f.$$.fragment,s),p=!1},d(s){s&&b(n),re(f)}}}function Gt(t){let n,r,i=Object.keys(t[0]),a=[];for(let l=0;l<i.length;l+=1)a[l]=Vt(Lt(t,i,l));const u=l=>V(a[l],1,1,()=>{a[l]=null});return{c(){for(let l=0;l<a.length;l+=1)a[l].c();n=ie()},l(l){for(let f=0;f<a.length;f+=1)a[f].l(l);n=ie()},m(l,f){for(let c=0;c<a.length;c+=1)a[c].m(l,f);G(l,n,f),r=!0},p(l,f){if(f&5){i=Object.keys(l[0]);let c;for(c=0;c<i.length;c+=1){const d=Lt(l,i,c);a[c]?(a[c].p(d,f),F(a[c],1)):(a[c]=Vt(d),a[c].c(),F(a[c],1),a[c].m(n.parentNode,n))}for(_e(),c=i.length;c<a.length;c+=1)u(c);me()}},i(l){if(!r){for(let f=0;f<i.length;f+=1)F(a[f]);r=!0}},o(l){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)V(a[f]);r=!1},d(l){pe(a,l),l&&b(n)}}}function Vt(t){let n,r;return n=new Hr({props:{data:t[0][t[22]],id:t[22],height:t[2]}}),{c(){ee(n.$$.fragment)},l(i){te(n.$$.fragment,i)},m(i,a){ne(n,i,a),r=!0},p(i,a){const u={};a&1&&(u.data=i[0][i[22]]),a&1&&(u.id=i[22]),a&4&&(u.height=i[2]),n.$set(u)},i(i){r||(F(n.$$.fragment,i),r=!0)},o(i){V(n.$$.fragment,i),r=!1},d(i){re(n,i)}}}function jr(t){let n,r,i,a,u,l,f,c,d,p,e,o,s,_,h,g,m,y;r=new $r({props:{data:t[0]}});let k=Object.keys(t[0]),x=[];for(let w=0;w<k.length;w+=1)x[w]=Rt(Ft(t,k,w));const H=w=>V(x[w],1,1,()=>{x[w]=null});let T=t[1]&&Gt(t);return{c(){n=N("div"),ee(r.$$.fragment),i=$(),a=N("div");for(let w=0;w<x.length;w+=1)x[w].c();u=$(),l=N("div"),f=N("div"),c=$(),T&&T.c(),p=$(),e=N("button"),o=ae("play"),s=$(),_=N("button"),h=ae("pause"),this.h()},l(w){n=P(w,"DIV",{class:!0});var S=R(n);te(r.$$.fragment,S),i=j(S),a=P(S,"DIV",{class:!0});var A=R(a);for(let O=0;O<x.length;O+=1)x[O].l(A);A.forEach(b),u=j(S),l=P(S,"DIV",{class:!0});var B=R(l);f=P(B,"DIV",{class:!0}),R(f).forEach(b),c=j(B),T&&T.l(B),B.forEach(b),S.forEach(b),p=j(w),e=P(w,"BUTTON",{});var I=R(e);o=oe(I,"play"),I.forEach(b),s=j(w),_=P(w,"BUTTON",{});var D=R(_);h=oe(D,"pause"),D.forEach(b),this.h()},h(){v(a,"class","labels svelte-eroy2c"),v(f,"class","marker svelte-eroy2c"),C(f,"left",`${t[3](t[4])}px`),v(l,"class","instruments svelte-eroy2c"),Ke(()=>t[17].call(l)),v(n,"class","container svelte-eroy2c"),C(n,"height",`${rn}px`)},m(w,S){G(w,n,S),ne(r,n,null),E(n,i),E(n,a);for(let A=0;A<x.length;A+=1)x[A].m(a,null);E(n,u),E(n,l),E(l,f),E(l,c),T&&T.m(l,null),d=un(l,t[17].bind(l)),G(w,p,S),G(w,e,S),E(e,o),G(w,s,S),G(w,_,S),E(_,h),g=!0,m||(y=[ve(e,"click",t[8]),ve(_,"click",t[9])],m=!0)},p(w,[S]){const A={};if(S&1&&(A.data=w[0]),r.$set(A),S&37){k=Object.keys(w[0]);let B;for(B=0;B<k.length;B+=1){const I=Ft(w,k,B);x[B]?(x[B].p(I,S),F(x[B],1)):(x[B]=Rt(I),x[B].c(),F(x[B],1),x[B].m(a,null))}for(_e(),B=k.length;B<x.length;B+=1)H(B);me()}S&24&&C(f,"left",`${w[3](w[4])}px`),w[1]?T?(T.p(w,S),S&2&&F(T,1)):(T=Gt(w),T.c(),F(T,1),T.m(l,null)):T&&(_e(),V(T,1,1,()=>{T=null}),me())},i(w){if(!g){F(r.$$.fragment,w);for(let S=0;S<k.length;S+=1)F(x[S]);F(T),g=!0}},o(w){V(r.$$.fragment,w),x=x.filter(Boolean);for(let S=0;S<x.length;S+=1)V(x[S]);V(T),g=!1},d(w){w&&b(n),re(r),pe(x,w),T&&T.d(),d(),w&&b(p),w&&b(e),w&&b(s),w&&b(_),m=!1,qt(y)}}}const rn=800;function qr(t,n,r){let i,a,u,l,f,c,{data:d}=n,{audio:p}=n,{beatsPerRotation:e}=n,{division:o}=n;qe("song",{beatsPerRotation:e,division:o,getT:()=>s,getXScale:()=>a,getInstrumentToggles:()=>g,getGridToggles:()=>m,getCycleDuration:()=>i});const s=Ve(0);fe(t,s,A=>r(4,f=A));let _,h=0;const g=Ve({hihat:"on",snare:"on",kick:"on"}),m=Ve({hihat:"off",snare:"off",kick:"off"});fe(t,m,A=>r(5,c=A));let y,k=()=>0;p.on("load",()=>{r(14,k=Re().domain([0,p.duration()*1e3]).range([0,e]))}),p.on("end",()=>{x()});const x=()=>{p.play(),_=requestAnimationFrame(T)},H=()=>{cancelAnimationFrame(_),p.pause()},T=()=>{r(13,h=p.seek()),_=requestAnimationFrame(T)};function w(A,B){t.$$.not_equal(c[B],A)&&(c[B]=A,m.set(c))}function S(){y=this.clientWidth,r(1,y)}return t.$$set=A=>{"data"in A&&r(0,d=A.data),"audio"in A&&r(10,p=A.audio),"beatsPerRotation"in A&&r(11,e=A.beatsPerRotation),"division"in A&&r(12,o=A.division)},t.$$.update=()=>{t.$$.dirty&1024&&(i=p.duration()*1e3),t.$$.dirty&24576&&Wt(s,f=h===0?0:k(h*1e3),f),t.$$.dirty&2050&&r(3,a=Re().domain([0,e]).range([0,y])),t.$$.dirty&1&&r(15,u=nn().domain(Object.keys(d)).range([0,rn]).padding(.45)),t.$$.dirty&32768&&r(2,l=u.bandwidth())},[d,y,l,a,f,c,s,m,x,H,p,e,o,h,k,u,w,S]}class Wr extends Y{constructor(n){super(),Q(this,n,qr,jr,Z,{data:0,audio:10,beatsPerRotation:11,division:12})}}const Xr="The math and the magic of wonky grooves",Yr="Visualizing wonky grooves",Qr="By <a href=https://pudding.cool/author/michelle-mcghee/ target=_blank>Michelle McGhee</a>",Zr=[{type:"text",value:"Youre the drummer. The backbone of the band. Your job is to keep a steady rhythm. Here, try it."},{type:"text",value:"[imagine] You try to tap a rhythm on your keyboard."},{type:"text",value:"Nice job. Sometimes you were a <span class=off>little late</span> or a <span class=off>little early</span>."},{type:"text",value:"With quantizing, we can snap it all into perfect place."},{type:"text",value:"Now listen to this (TBD, but <a href=https://www.youtube.com/watch?v=YCQHs79C_a8&ab_channel=NodtomyBEats target=_blank>example</a>)."},{type:"text",value:"The beat is wonky, its irregular. some beats are *slightly* late, others are early. Its not exactly perfect. But its groovy. Its laid back, sort of off-kilter, which some people love. It shows up everywhere in popular music if you listen closely. Why does being off the grid, out of time, the rhythmic equivalent of playing out of tune, work?"},{type:"text",value:"This is a beat made by the hit-less, yet revered producer JDilla. Dan Charnas wrote a whole <a href=https://dillati.me/ target=_blank>book</a> about it that I just read. It talks about JDillas life and his enormous contribution to music - a brand new way of conceiving of time. But even after reading it, I wanted visuals I could see, hear, and play with (at the same time) to really get an understanding of how Dilla changed music."}],Kr=[{type:"text",value:"<strong>Part 1: Straight</strong>"},{type:"text",value:"The beat you made, once quantized, is called <strong>straight</strong>. Press play to hear it."},{type:"text",value:"Now lets bring in the other parts of the drums. In this visual, every little rectangle is a note played by one of the 3 parts of the drum kit: hi-hat, snare, and kick drum. The full bar represents 4 beats, or 1 measure. A straight groove has evenly spaced beats."},{type:"text",value:"Heres a song with a straight groove (TBD, but <a href=https://www.youtube.com/watch?v=03XCQCS_w4M target=_blank>example</a>. Will show on viz as it plays)"}],Jr=[{type:"text",value:"<strong>Part 2: Swing</strong>"},{type:"text",value:"Sometimes straight can be a little boring. If we move every other note on the hihat a little bit later, we get whats called <strong>swing</strong>. This is very common in jazz."},{type:"text",value:"Heres a song with a swung groove (TBD, but <a href=https://www.youtube.com/watch?v=p9JezItjWIU&feature=youtu.be&ab_channel=Manosproposes target=_blank>example</a>. Will show it on viz as it plays)"},{type:"text",value:"Swing can get really interesting. You can delay that hihat note different amounts and get very different feels. Listen to this song [show on viz]. Every other hihat is late, but not as late as the last example."},{type:"text",value:"[viz] slider where you can change the swing percentage"}],zr=[{type:"text",value:"<strong>Part 3: Dilla</strong>"},{type:"text",value:"Straight and swung used to be the only two ways. A Dilla timefeel is one that combines straight, swung, and shifted elements to create an all-new funky timefeel."},{type:"text",value:"Lets take your groove and Dilla-ify it."},{type:"text",value:"1) The kick is straight. 2) The hihat is swung slightly. 3) The snare is shifted slightly early to create a flam against the hihat."},{type:"text",value:"Each instrument is on their own grid, and the way they interplay is really satisfying."},{type:"text",value:"Heres another JDilla groove."},{type:"text",value:"Heres a song by [modern artist] with a Dilla groove (<a href=https://www.youtube.com/watch?t=41&v=1K93ioXL63c&feature=youtu.be target=_blank>example</a>."}],Ct={hed:Xr,dek:Yr,byline:Qr,intro:Zr,straight:Kr,swing:Jr,dilla:zr};var Ur="Expected a function",$t=0/0,ei="[object Symbol]",ti=/^\s+|\s+$/g,ni=/^[-+]0x[0-9a-f]+$/i,ri=/^0b[01]+$/i,ii=/^0o[0-7]+$/i,ai=parseInt,oi=typeof J=="object"&&J&&J.Object===Object&&J,li=typeof self=="object"&&self&&self.Object===Object&&self,si=oi||li||Function("return this")(),ui=Object.prototype,fi=ui.toString,ci=Math.max,di=Math.min,je=function(){return si.Date.now()};function _i(t,n,r){var i,a,u,l,f,c,d=0,p=!1,e=!1,o=!0;if(typeof t!="function")throw new TypeError(Ur);n=jt(n)||0,Ze(r)&&(p=!!r.leading,e="maxWait"in r,u=e?ci(jt(r.maxWait)||0,n):u,o="trailing"in r?!!r.trailing:o);function s(T){var w=i,S=a;return i=a=void 0,d=T,l=t.apply(S,w),l}function _(T){return d=T,f=setTimeout(m,n),p?s(T):l}function h(T){var w=T-c,S=T-d,A=n-w;return e?di(A,u-S):A}function g(T){var w=T-c,S=T-d;return c===void 0||w>=n||w<0||e&&S>=u}function m(){var T=je();if(g(T))return y(T);f=setTimeout(m,h(T))}function y(T){return f=void 0,o&&i?s(T):(i=a=void 0,l)}function k(){f!==void 0&&clearTimeout(f),d=0,i=c=a=f=void 0}function x(){return f===void 0?l:y(je())}function H(){var T=je(),w=g(T);if(i=arguments,a=this,c=T,w){if(f===void 0)return _(c);if(e)return f=setTimeout(m,n),s(c)}return f===void 0&&(f=setTimeout(m,n)),l}return H.cancel=k,H.flush=x,H}function Ze(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function mi(t){return!!t&&typeof t=="object"}function hi(t){return typeof t=="symbol"||mi(t)&&fi.call(t)==ei}function jt(t){if(typeof t=="number")return t;if(hi(t))return $t;if(Ze(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=Ze(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=t.replace(ti,"");var r=ri.test(t);return r||ii.test(t)?ai(t.slice(2),r?2:8):ni.test(t)?$t:+t}var pi=_i;mn({width:0,height:0},t=>{const n=()=>t({width:window.innerWidth,height:window.innerHeight});return n(),window.addEventListener("resize",pi(n,250)),()=>{window.removeEventListener("resize",n)}});const gi={keySignatures:[{key:"C",scale:"major",ticks:0}],meta:[],name:"kick",ppq:480,tempos:[{bpm:120,ticks:0}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}]},vi=[{channel:0,controlChanges:{},pitchBends:[],instrument:{family:"piano",number:0,name:"acoustic grand piano"},name:"kick",notes:[{duration:.09270833333333334,durationTicks:89,midi:45,name:"A2",ticks:0,time:0,velocity:.6929133858267716},{duration:.11145833333333334,durationTicks:107,midi:55,name:"G3",ticks:0,time:0,velocity:.6929133858267716},{duration:.11875000000000002,durationTicks:114,midi:45,name:"A2",ticks:420,time:.4375,velocity:.6929133858267716},{duration:.10729166666666667,durationTicks:103,midi:52,name:"E3",ticks:647,time:.6739583333333333,velocity:.6929133858267716},{duration:.09270833333333328,durationTicks:89,midi:45,name:"A2",ticks:720,time:.75,velocity:.6929133858267716},{duration:.10729166666666656,durationTicks:103,midi:45,name:"A2",ticks:1e3,time:1.0416666666666667,velocity:.6929133858267716},{duration:.08437499999999987,durationTicks:81,midi:45,name:"A2",ticks:1334,time:1.3895833333333334,velocity:.6929133858267716},{duration:.13854166666666656,durationTicks:133,midi:45,name:"A2",ticks:1680,time:1.75,velocity:.6929133858267716},{duration:.1708333333333334,durationTicks:164,midi:52,name:"E3",ticks:1920,time:2,velocity:.6929133858267716},{duration:.08437500000000009,durationTicks:81,midi:45,name:"A2",ticks:1980,time:2.0625,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:2320,time:2.4166666666666665,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:2551,time:2.6572916666666666,velocity:.6929133858267716},{duration:.1791666666666667,durationTicks:172,midi:55,name:"G3",ticks:2571,time:2.678125,velocity:.6929133858267716},{duration:.11875000000000036,durationTicks:114,midi:45,name:"A2",ticks:2920,time:3.0416666666666665,velocity:.6929133858267716},{duration:.1552083333333334,durationTicks:149,midi:52,name:"E3",ticks:3175,time:3.3072916666666665,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:3220,time:3.3541666666666665,velocity:.6929133858267716},{duration:.10729166666666634,durationTicks:103,midi:45,name:"A2",ticks:3500,time:3.6458333333333335,velocity:.6929133858267716},{duration:.08437500000000009,durationTicks:81,midi:45,name:"A2",ticks:3834,time:3.99375,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:4180,time:4.354166666666667,velocity:.6929133858267716},{duration:.13229166666666625,durationTicks:127,midi:52,name:"E3",ticks:4440,time:4.625,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:4480,time:4.666666666666667,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:4820,time:5.020833333333333,velocity:.6929133858267716},{duration:.1552083333333334,durationTicks:149,midi:55,name:"G3",ticks:5055,time:5.265625,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:5100,time:5.3125,velocity:.6929133858267716},{duration:.11874999999999947,durationTicks:114,midi:45,name:"A2",ticks:5470,time:5.697916666666667,velocity:.6929133858267716},{duration:.09583333333333321,durationTicks:92,midi:52,name:"E3",ticks:5714,time:5.952083333333333,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:5770,time:6.010416666666667,velocity:.6929133858267716},{duration:.10729166666666679,durationTicks:103,midi:45,name:"A2",ticks:6050,time:6.302083333333333,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:6384,time:6.65,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:6730,time:7.010416666666667,velocity:.6929133858267716},{duration:.1552083333333334,durationTicks:149,midi:52,name:"E3",ticks:6980,time:7.270833333333333,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:7030,time:7.322916666666667,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:7370,time:7.677083333333333,velocity:.6929133858267716},{duration:.0927083333333325,durationTicks:89,midi:45,name:"A2",ticks:7601,time:7.917708333333334,velocity:.6929133858267716},{duration:.13437500000000036,durationTicks:129,midi:55,name:"G3",ticks:7626,time:7.94375,velocity:.6929133858267716},{duration:.11874999999999858,durationTicks:114,midi:45,name:"A2",ticks:7970,time:8.302083333333334,velocity:.6929133858267716},{duration:.14583333333333215,durationTicks:140,midi:52,name:"E3",ticks:8240,time:8.583333333333334,velocity:.6929133858267716},{duration:.0927083333333325,durationTicks:89,midi:45,name:"A2",ticks:8270,time:8.614583333333334,velocity:.6929133858267716},{duration:.10729166666666679,durationTicks:103,midi:45,name:"A2",ticks:8550,time:8.90625,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:8884,time:9.254166666666666,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:9230,time:9.614583333333334,velocity:.6929133858267716},{duration:.1437500000000007,durationTicks:138,midi:52,name:"E3",ticks:9507,time:9.903125,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:9530,time:9.927083333333334,velocity:.6929133858267716},{duration:.14374999999999893,durationTicks:138,midi:52,name:"E3",ticks:9740,time:10.145833333333334,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:9870,time:10.28125,velocity:.6929133858267716}],endOfTrackTicks:10200}],yi={header:gi,tracks:vi};function bi(t){let n,r,i,a,u;return a=new Wr({props:{audio:t[0],data:t[1],beatsPerRotation:16,division:2}}),{c(){n=N("h3"),r=ae("Sincerity is Scary - The 1975"),i=$(),ee(a.$$.fragment)},l(l){n=P(l,"H3",{});var f=R(n);r=oe(f,"Sincerity is Scary - The 1975"),f.forEach(b),i=j(l),te(a.$$.fragment,l)},m(l,f){G(l,n,f),E(n,r),G(l,i,f),ne(a,l,f),u=!0},p:U,i(l){u||(F(a.$$.fragment,l),u=!0)},o(l){V(a.$$.fragment,l),u=!1},d(l){l&&b(n),l&&b(i),re(a,l)}}}function wi(t){const n=(u,l)=>ye(l).map(f=>[f,f+u]).flat(),r=(u,l,f)=>{u.header.tempos[0].bpm,u.header.ppq;const c=Re().domain([0,10.698229166666666]).range([0,l]),d=u.tracks[0].notes.map(p=>({beat:c(p.time),instrument:p.midi}));return{hihat:d.filter(p=>p.instrument===f.hihat).map(p=>p.beat),snare:d.filter(p=>p.instrument===f.snare).map(p=>p.beat),kick:d.filter(p=>p.instrument===f.kick).map(p=>p.beat)}};ye(0,4,.5),n(2/3,4),n(3/5,4),n(4/7,4);const i=new ge.Howl({src:["assets/sound/sincerity_audio.mp3"]}),a=r(yi,16,{hihat:45,snare:52,kick:55});return[i,a]}class ki extends Y{constructor(n){super(),Q(this,n,wi,bi,Z,{})}}function Ai(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.1.0"),console.log("build: 2023-03-29-18:21"),console.log("--- --- --- --- --- ---")}function xi(t){let n,r,i,a;return n=new gn({props:{title:t[1],description:t[2],url:t[3],preloadFont:t[0],keywords:t[4]}}),i=new ki({}),{c(){ee(n.$$.fragment),r=$(),ee(i.$$.fragment)},l(u){te(n.$$.fragment,u),r=j(u),te(i.$$.fragment,u)},m(u,l){ne(n,u,l),G(u,r,l),ne(i,u,l),a=!0},p:U,i(u){a||(F(n.$$.fragment,u),F(i.$$.fragment,u),a=!0)},o(u){V(n.$$.fragment,u),V(i.$$.fragment,u),a=!1},d(u){re(n,u),u&&b(r),re(i,u)}}}function Ti(t,n,r){let{data:i}=n;Ai();const a=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2","https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2"],{title:u,description:l,url:f,keywords:c}=Ct;return qe("copy",Ct),qe("data",i.data),t.$$set=d=>{"data"in d&&r(5,i=d.data)},[a,u,l,f,c,i]}class Ei extends Y{constructor(n){super(),Q(this,n,Ti,xi,Z,{data:5})}}export{Ei as default};

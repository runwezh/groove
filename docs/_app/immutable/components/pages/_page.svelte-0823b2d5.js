import{S as pe,i as ge,s as de,k as $,e as ae,J as Hn,l as B,h as T,n as v,D as N,C as ue,K as Be,b as D,L as Rt,M as Fn,N as Dn,O as Ln,P as ye,Q as be,m as j,R as tt,T as kn,I as Ee,a as Y,c as K,f as W,g as ft,d as ct,t as Z,x as U,y as z,z as ee,A as te,q as X,r as Q,U as je,u as Ae,v as xe,V as Me,p as St,W as Se,X as Tn,Y as gt,Z as $n,_ as Ht,$ as Bn}from"../../chunks/index-c41b8c61.js";import{w as xn,r as Cn}from"../../chunks/index-945bb77f.js";import{d as Gn}from"../../chunks/transform-5bf7892f.js";function Ft(e,r,n){const i=e.slice();return i[5]=r[n],i}function Dt(e){let r,n;return{c(){r=$("link"),this.h()},l(i){r=B(i,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){v(r,"rel","preload"),v(r,"href",n=e[5]),v(r,"as","font"),v(r,"type","font/woff2"),v(r,"crossorigin","")},m(i,a){D(i,r,a)},p(i,a){a&16&&n!==(n=i[5])&&v(r,"href",n)},d(i){i&&T(r)}}}function qn(e){let r,n,i,a,l,u,d,c,f,m,t,o,s,_,p,g,h,y,w,S,P,I,F,L,E,q;document.title=r=e[0];let M=e[4],R=[];for(let b=0;b<M.length;b+=1)R[b]=Dt(Ft(e,M,b));return{c(){n=$("meta"),i=$("meta"),a=$("meta"),l=$("meta"),u=$("meta"),d=$("meta"),c=$("meta"),f=$("meta"),m=$("meta"),t=$("meta"),s=$("meta"),_=$("meta"),p=$("meta"),g=$("meta"),h=$("meta"),y=$("meta"),w=$("meta"),S=$("meta"),P=$("meta"),F=$("meta"),L=$("link");for(let b=0;b<R.length;b+=1)R[b].c();q=ae(),this.h()},l(b){const A=Hn("svelte-1htu80s",document.head);n=B(A,"META",{name:!0,content:!0}),i=B(A,"META",{name:!0,content:!0}),a=B(A,"META",{name:!0,content:!0}),l=B(A,"META",{property:!0,content:!0}),u=B(A,"META",{property:!0,content:!0}),d=B(A,"META",{property:!0,content:!0}),c=B(A,"META",{property:!0,content:!0}),f=B(A,"META",{property:!0,content:!0}),m=B(A,"META",{property:!0,content:!0}),t=B(A,"META",{property:!0,content:!0}),s=B(A,"META",{property:!0,content:!0}),_=B(A,"META",{property:!0,content:!0}),p=B(A,"META",{property:!0,content:!0}),g=B(A,"META",{name:!0,content:!0}),h=B(A,"META",{name:!0,content:!0}),y=B(A,"META",{name:!0,content:!0}),w=B(A,"META",{name:!0,content:!0}),S=B(A,"META",{name:!0,content:!0}),P=B(A,"META",{name:!0,content:!0}),F=B(A,"META",{name:!0,content:!0}),L=B(A,"LINK",{rel:!0,href:!0});for(let O=0;O<R.length;O+=1)R[O].l(A);q=ae(),A.forEach(T),this.h()},h(){v(n,"name","description"),v(n,"content",e[1]),v(i,"name","author"),v(i,"content","The Pudding"),v(a,"name","news_keywords"),v(a,"content",e[3]),v(l,"property","og:title"),v(l,"content",e[0]),v(u,"property","og:site_name"),v(u,"content","The Pudding"),v(d,"property","og:url"),v(d,"content",e[2]),v(c,"property","og:description"),v(c,"content",e[1]),v(f,"property","og:type"),v(f,"content","article"),v(m,"property","og:locale"),v(m,"content","en_US"),v(t,"property","og:image"),v(t,"content",o=e[2]+"/assets/social-facebook.jpg"),v(s,"property","og:image:type"),v(s,"content","image/jpeg"),v(_,"property","og:image:width"),v(_,"content","1200"),v(p,"property","og:image:height"),v(p,"content","600"),v(g,"name","twitter:card"),v(g,"content","summary_large_image"),v(h,"name","twitter:site"),v(h,"content","https://pudding.cool"),v(y,"name","twitter:creator"),v(y,"content","@puddingviz"),v(w,"name","twitter:title"),v(w,"content",e[0]),v(S,"name","twitter:description"),v(S,"content",e[1]),v(P,"name","twitter:image:src"),v(P,"content",I=e[2]+"/assets/social-twitter.jpg"),v(F,"name","robots"),v(F,"content","max-image-preview:large"),v(L,"rel","canonical"),v(L,"href",E=e[2]+"/")},m(b,A){N(document.head,n),N(document.head,i),N(document.head,a),N(document.head,l),N(document.head,u),N(document.head,d),N(document.head,c),N(document.head,f),N(document.head,m),N(document.head,t),N(document.head,s),N(document.head,_),N(document.head,p),N(document.head,g),N(document.head,h),N(document.head,y),N(document.head,w),N(document.head,S),N(document.head,P),N(document.head,F),N(document.head,L);for(let O=0;O<R.length;O+=1)R[O].m(document.head,null);N(document.head,q)},p(b,[A]){if(A&1&&r!==(r=b[0])&&(document.title=r),A&2&&v(n,"content",b[1]),A&8&&v(a,"content",b[3]),A&1&&v(l,"content",b[0]),A&4&&v(d,"content",b[2]),A&2&&v(c,"content",b[1]),A&4&&o!==(o=b[2]+"/assets/social-facebook.jpg")&&v(t,"content",o),A&1&&v(w,"content",b[0]),A&2&&v(S,"content",b[1]),A&4&&I!==(I=b[2]+"/assets/social-twitter.jpg")&&v(P,"content",I),A&4&&E!==(E=b[2]+"/")&&v(L,"href",E),A&16){M=b[4];let O;for(O=0;O<M.length;O+=1){const H=Ft(b,M,O);R[O]?R[O].p(H,A):(R[O]=Dt(H),R[O].c(),R[O].m(q.parentNode,q))}for(;O<R.length;O+=1)R[O].d(1);R.length=M.length}},i:ue,o:ue,d(b){T(n),T(i),T(a),T(l),T(u),T(d),T(c),T(f),T(m),T(t),T(s),T(_),T(p),T(g),T(h),T(y),T(w),T(S),T(P),T(F),T(L),Be(R,b),T(q)}}}function jn(e,r,n){let{title:i="Title TK"}=r,{description:a="Description TK"}=r,{url:l="https://pudding.cool"}=r,{keywords:u=""}=r,{preloadFont:d=[]}=r;return e.$$set=c=>{"title"in c&&n(0,i=c.title),"description"in c&&n(1,a=c.description),"url"in c&&n(2,l=c.url),"keywords"in c&&n(3,u=c.keywords),"preloadFont"in c&&n(4,d=c.preloadFont)},[i,a,l,u,d]}class Vn extends pe{constructor(r){super(),ge(this,r,jn,qn,de,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}var me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ze={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(e){(function(){var r=function(){this.init()};r.prototype={init:function(){var t=this||n;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator=typeof window<"u"&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var o=this||n;if(t=parseFloat(t),o.ctx||m(),typeof t<"u"&&t>=0&&t<=1){if(o._volume=t,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(t,n.ctx.currentTime);for(var s=0;s<o._howls.length;s++)if(!o._howls[s]._webAudio)for(var _=o._howls[s]._getSoundIds(),p=0;p<_.length;p++){var g=o._howls[s]._soundById(_[p]);g&&g._node&&(g._node.volume=g._volume*t)}return o}return o._volume},mute:function(t){var o=this||n;o.ctx||m(),o._muted=t,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(t?0:o._volume,n.ctx.currentTime);for(var s=0;s<o._howls.length;s++)if(!o._howls[s]._webAudio)for(var _=o._howls[s]._getSoundIds(),p=0;p<_.length;p++){var g=o._howls[s]._soundById(_[p]);g&&g._node&&(g._node.muted=t?!0:g._muted)}return o},stop:function(){for(var t=this||n,o=0;o<t._howls.length;o++)t._howls[o].stop();return t},unload:function(){for(var t=this||n,o=t._howls.length-1;o>=0;o--)t._howls[o].unload();return t.usingWebAudio&&t.ctx&&typeof t.ctx.close<"u"&&(t.ctx.close(),t.ctx=null,m()),t},codecs:function(t){return(this||n)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||n;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if(typeof Audio<"u")try{var o=new Audio;typeof o.oncanplaythrough>"u"&&(t._canPlayEvent="canplay")}catch{t.noAudio=!0}else t.noAudio=!0;try{var o=new Audio;o.muted&&(t.noAudio=!0)}catch{}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||n,o=null;try{o=typeof Audio<"u"?new Audio:null}catch{return t}if(!o||typeof o.canPlayType!="function")return t;var s=o.canPlayType("audio/mpeg;").replace(/^no$/,""),_=t._navigator?t._navigator.userAgent:"",p=_.match(/OPR\/([0-6].)/g),g=p&&parseInt(p[0].split("/")[1],10)<33,h=_.indexOf("Safari")!==-1&&_.indexOf("Chrome")===-1,y=_.match(/Version\/(.*?) /),w=h&&y&&parseInt(y[1],10)<15;return t._codecs={mp3:!!(!g&&(s||o.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!s,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(o.canPlayType('audio/wav; codecs="1"')||o.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(o.canPlayType("audio/x-m4b;")||o.canPlayType("audio/m4b;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!w&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!w&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||n;if(!(t._audioUnlocked||!t.ctx)){t._audioUnlocked=!1,t.autoUnlock=!1,!t._mobileUnloaded&&t.ctx.sampleRate!==44100&&(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var o=function(s){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var _=new Audio;_._unlocked=!0,t._releaseHtml5Audio(_)}catch{t.noAudio=!0;break}for(var p=0;p<t._howls.length;p++)if(!t._howls[p]._webAudio)for(var g=t._howls[p]._getSoundIds(),h=0;h<g.length;h++){var y=t._howls[p]._soundById(g[h]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}t._autoResume();var w=t.ctx.createBufferSource();w.buffer=t._scratchBuffer,w.connect(t.ctx.destination),typeof w.start>"u"?w.noteOn(0):w.start(0),typeof t.ctx.resume=="function"&&t.ctx.resume(),w.onended=function(){w.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0),document.removeEventListener("keydown",o,!0);for(var S=0;S<t._howls.length;S++)t._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),document.addEventListener("keydown",o,!0),t}},_obtainHtml5Audio:function(){var t=this||n;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var o=new Audio().play();return o&&typeof Promise<"u"&&(o instanceof Promise||typeof o.then=="function")&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var o=this||n;return t._unlocked&&o._html5AudioPool.push(t),o},_autoSuspend:function(){var t=this;if(!(!t.autoSuspend||!t.ctx||typeof t.ctx.suspend>"u"||!n.usingWebAudio)){for(var o=0;o<t._howls.length;o++)if(t._howls[o]._webAudio){for(var s=0;s<t._howls[o]._sounds.length;s++)if(!t._howls[o]._sounds[s]._paused)return t}return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var _=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(_,_)}},3e4),t}},_autoResume:function(){var t=this;if(!(!t.ctx||typeof t.ctx.resume>"u"||!n.usingWebAudio))return t.state==="running"&&t.ctx.state!=="interrupted"&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):t.state==="suspended"||t.state==="running"&&t.ctx.state==="interrupted"?(t.ctx.resume().then(function(){t.state="running";for(var o=0;o<t._howls.length;o++)t._howls[o]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):t.state==="suspending"&&(t._resumeAfterSuspend=!0),t}};var n=new r,i=function(t){var o=this;if(!t.src||t.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}o.init(t)};i.prototype={init:function(t){var o=this;return n.ctx||m(),o._autoplay=t.autoplay||!1,o._format=typeof t.format!="string"?t.format:[t.format],o._html5=t.html5||!1,o._muted=t.mute||!1,o._loop=t.loop||!1,o._pool=t.pool||5,o._preload=typeof t.preload=="boolean"||t.preload==="metadata"?t.preload:!0,o._rate=t.rate||1,o._sprite=t.sprite||{},o._src=typeof t.src!="string"?t.src:[t.src],o._volume=t.volume!==void 0?t.volume:1,o._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:t.xhr&&t.xhr.withCredentials?t.xhr.withCredentials:!1},o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=t.onend?[{fn:t.onend}]:[],o._onfade=t.onfade?[{fn:t.onfade}]:[],o._onload=t.onload?[{fn:t.onload}]:[],o._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],o._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],o._onpause=t.onpause?[{fn:t.onpause}]:[],o._onplay=t.onplay?[{fn:t.onplay}]:[],o._onstop=t.onstop?[{fn:t.onstop}]:[],o._onmute=t.onmute?[{fn:t.onmute}]:[],o._onvolume=t.onvolume?[{fn:t.onvolume}]:[],o._onrate=t.onrate?[{fn:t.onrate}]:[],o._onseek=t.onseek?[{fn:t.onseek}]:[],o._onunlock=t.onunlock?[{fn:t.onunlock}]:[],o._onresume=[],o._webAudio=n.usingWebAudio&&!o._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o._preload!=="none"&&o.load(),o},load:function(){var t=this,o=null;if(n.noAudio){t._emit("loaderror",null,"No audio support.");return}typeof t._src=="string"&&(t._src=[t._src]);for(var s=0;s<t._src.length;s++){var _,p;if(t._format&&t._format[s])_=t._format[s];else{if(p=t._src[s],typeof p!="string"){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}_=/^data:audio\/([^;,]+);/i.exec(p),_||(_=/\.([^.]+)$/.exec(p.split("?",1)[0])),_&&(_=_[1].toLowerCase())}if(_||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),_&&n.codecs(_)){o=t._src[s];break}}if(!o){t._emit("loaderror",null,"No codec support for selected audio sources.");return}return t._src=o,t._state="loading",window.location.protocol==="https:"&&o.slice(0,5)==="http:"&&(t._html5=!0,t._webAudio=!1),new a(t),t._webAudio&&u(t),t},play:function(t,o){var s=this,_=null;if(typeof t=="number")_=t,t=null;else{if(typeof t=="string"&&s._state==="loaded"&&!s._sprite[t])return null;if(typeof t>"u"&&(t="__default",!s._playLock)){for(var p=0,g=0;g<s._sounds.length;g++)s._sounds[g]._paused&&!s._sounds[g]._ended&&(p++,_=s._sounds[g]._id);p===1?t=null:_=null}}var h=_?s._soundById(_):s._inactiveSound();if(!h)return null;if(_&&!t&&(t=h._sprite||"__default"),s._state!=="loaded"){h._sprite=t,h._ended=!1;var y=h._id;return s._queue.push({event:"play",action:function(){s.play(y)}}),y}if(_&&!h._paused)return o||s._loadQueue("play"),h._id;s._webAudio&&n._autoResume();var w=Math.max(0,h._seek>0?h._seek:s._sprite[t][0]/1e3),S=Math.max(0,(s._sprite[t][0]+s._sprite[t][1])/1e3-w),P=S*1e3/Math.abs(h._rate),I=s._sprite[t][0]/1e3,F=(s._sprite[t][0]+s._sprite[t][1])/1e3;h._sprite=t,h._ended=!1;var L=function(){h._paused=!1,h._seek=w,h._start=I,h._stop=F,h._loop=!!(h._loop||s._sprite[t][2])};if(w>=F){s._ended(h);return}var E=h._node;if(s._webAudio){var q=function(){s._playLock=!1,L(),s._refreshBuffer(h);var A=h._muted||s._muted?0:h._volume;E.gain.setValueAtTime(A,n.ctx.currentTime),h._playStart=n.ctx.currentTime,typeof E.bufferSource.start>"u"?h._loop?E.bufferSource.noteGrainOn(0,w,86400):E.bufferSource.noteGrainOn(0,w,S):h._loop?E.bufferSource.start(0,w,86400):E.bufferSource.start(0,w,S),P!==1/0&&(s._endTimers[h._id]=setTimeout(s._ended.bind(s,h),P)),o||setTimeout(function(){s._emit("play",h._id),s._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?q():(s._playLock=!0,s.once("resume",q),s._clearTimer(h._id))}else{var M=function(){E.currentTime=w,E.muted=h._muted||s._muted||n._muted||E.muted,E.volume=h._volume*n.volume(),E.playbackRate=h._rate;try{var A=E.play();if(A&&typeof Promise<"u"&&(A instanceof Promise||typeof A.then=="function")?(s._playLock=!0,L(),A.then(function(){s._playLock=!1,E._unlocked=!0,o?s._loadQueue():s._emit("play",h._id)}).catch(function(){s._playLock=!1,s._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),h._ended=!0,h._paused=!0})):o||(s._playLock=!1,L(),s._emit("play",h._id)),E.playbackRate=h._rate,E.paused){s._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}t!=="__default"||h._loop?s._endTimers[h._id]=setTimeout(s._ended.bind(s,h),P):(s._endTimers[h._id]=function(){s._ended(h),E.removeEventListener("ended",s._endTimers[h._id],!1)},E.addEventListener("ended",s._endTimers[h._id],!1))}catch(O){s._emit("playerror",h._id,O)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=s._src,E.load());var R=window&&window.ejecta||!E.readyState&&n._navigator.isCocoonJS;if(E.readyState>=3||R)M();else{s._playLock=!0,s._state="loading";var b=function(){s._state="loaded",M(),E.removeEventListener(n._canPlayEvent,b,!1)};E.addEventListener(n._canPlayEvent,b,!1),s._clearTimer(h._id)}}return h._id},pause:function(t){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"pause",action:function(){o.pause(t)}}),o;for(var s=o._getSoundIds(t),_=0;_<s.length;_++){o._clearTimer(s[_]);var p=o._soundById(s[_]);if(p&&!p._paused&&(p._seek=o.seek(s[_]),p._rateSeek=0,p._paused=!0,o._stopFade(s[_]),p._node))if(o._webAudio){if(!p._node.bufferSource)continue;typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),o._cleanBuffer(p._node)}else(!isNaN(p._node.duration)||p._node.duration===1/0)&&p._node.pause();arguments[1]||o._emit("pause",p?p._id:null)}return o},stop:function(t,o){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"stop",action:function(){s.stop(t)}}),s;for(var _=s._getSoundIds(t),p=0;p<_.length;p++){s._clearTimer(_[p]);var g=s._soundById(_[p]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,s._stopFade(_[p]),g._node&&(s._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),s._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&s._clearSound(g._node))),o||s._emit("stop",g._id))}return s},mute:function(t,o){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"mute",action:function(){s.mute(t,o)}}),s;if(typeof o>"u")if(typeof t=="boolean")s._muted=t;else return s._muted;for(var _=s._getSoundIds(o),p=0;p<_.length;p++){var g=s._soundById(_[p]);g&&(g._muted=t,g._interval&&s._stopFade(g._id),s._webAudio&&g._node?g._node.gain.setValueAtTime(t?0:g._volume,n.ctx.currentTime):g._node&&(g._node.muted=n._muted?!0:t),s._emit("mute",g._id))}return s},volume:function(){var t=this,o=arguments,s,_;if(o.length===0)return t._volume;if(o.length===1||o.length===2&&typeof o[1]>"u"){var p=t._getSoundIds(),g=p.indexOf(o[0]);g>=0?_=parseInt(o[0],10):s=parseFloat(o[0])}else o.length>=2&&(s=parseFloat(o[0]),_=parseInt(o[1],10));var h;if(typeof s<"u"&&s>=0&&s<=1){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,o)}}),t;typeof _>"u"&&(t._volume=s),_=t._getSoundIds(_);for(var y=0;y<_.length;y++)h=t._soundById(_[y]),h&&(h._volume=s,o[2]||t._stopFade(_[y]),t._webAudio&&h._node&&!h._muted?h._node.gain.setValueAtTime(s,n.ctx.currentTime):h._node&&!h._muted&&(h._node.volume=s*n.volume()),t._emit("volume",h._id))}else return h=_?t._soundById(_):t._sounds[0],h?h._volume:0;return t},fade:function(t,o,s,_){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(t,o,s,_)}}),p;t=Math.min(Math.max(0,parseFloat(t)),1),o=Math.min(Math.max(0,parseFloat(o)),1),s=parseFloat(s),p.volume(t,_);for(var g=p._getSoundIds(_),h=0;h<g.length;h++){var y=p._soundById(g[h]);if(y){if(_||p._stopFade(g[h]),p._webAudio&&!y._muted){var w=n.ctx.currentTime,S=w+s/1e3;y._volume=t,y._node.gain.setValueAtTime(t,w),y._node.gain.linearRampToValueAtTime(o,S)}p._startFadeInterval(y,t,o,s,g[h],typeof _>"u")}}return p},_startFadeInterval:function(t,o,s,_,p,g){var h=this,y=o,w=s-o,S=Math.abs(w/.01),P=Math.max(4,S>0?_/S:_),I=Date.now();t._fadeTo=s,t._interval=setInterval(function(){var F=(Date.now()-I)/_;I=Date.now(),y+=w*F,y=Math.round(y*100)/100,w<0?y=Math.max(s,y):y=Math.min(s,y),h._webAudio?t._volume=y:h.volume(y,t._id,!0),g&&(h._volume=y),(s<o&&y<=s||s>o&&y>=s)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,h.volume(s,t._id),h._emit("fade",t._id))},P)},_stopFade:function(t){var o=this,s=o._soundById(t);return s&&s._interval&&(o._webAudio&&s._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(s._interval),s._interval=null,o.volume(s._fadeTo,t),s._fadeTo=null,o._emit("fade",t)),o},loop:function(){var t=this,o=arguments,s,_,p;if(o.length===0)return t._loop;if(o.length===1)if(typeof o[0]=="boolean")s=o[0],t._loop=s;else return p=t._soundById(parseInt(o[0],10)),p?p._loop:!1;else o.length===2&&(s=o[0],_=parseInt(o[1],10));for(var g=t._getSoundIds(_),h=0;h<g.length;h++)p=t._soundById(g[h]),p&&(p._loop=s,t._webAudio&&p._node&&p._node.bufferSource&&(p._node.bufferSource.loop=s,s&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop,t.playing(g[h])&&(t.pause(g[h],!0),t.play(g[h],!0)))));return t},rate:function(){var t=this,o=arguments,s,_;if(o.length===0)_=t._sounds[0]._id;else if(o.length===1){var p=t._getSoundIds(),g=p.indexOf(o[0]);g>=0?_=parseInt(o[0],10):s=parseFloat(o[0])}else o.length===2&&(s=parseFloat(o[0]),_=parseInt(o[1],10));var h;if(typeof s=="number"){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,o)}}),t;typeof _>"u"&&(t._rate=s),_=t._getSoundIds(_);for(var y=0;y<_.length;y++)if(h=t._soundById(_[y]),h){t.playing(_[y])&&(h._rateSeek=t.seek(_[y]),h._playStart=t._webAudio?n.ctx.currentTime:h._playStart),h._rate=s,t._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.setValueAtTime(s,n.ctx.currentTime):h._node&&(h._node.playbackRate=s);var w=t.seek(_[y]),S=(t._sprite[h._sprite][0]+t._sprite[h._sprite][1])/1e3-w,P=S*1e3/Math.abs(h._rate);(t._endTimers[_[y]]||!h._paused)&&(t._clearTimer(_[y]),t._endTimers[_[y]]=setTimeout(t._ended.bind(t,h),P)),t._emit("rate",h._id)}}else return h=t._soundById(_),h?h._rate:t._rate;return t},seek:function(){var t=this,o=arguments,s,_;if(o.length===0)t._sounds.length&&(_=t._sounds[0]._id);else if(o.length===1){var p=t._getSoundIds(),g=p.indexOf(o[0]);g>=0?_=parseInt(o[0],10):t._sounds.length&&(_=t._sounds[0]._id,s=parseFloat(o[0]))}else o.length===2&&(s=parseFloat(o[0]),_=parseInt(o[1],10));if(typeof _>"u")return 0;if(typeof s=="number"&&(t._state!=="loaded"||t._playLock))return t._queue.push({event:"seek",action:function(){t.seek.apply(t,o)}}),t;var h=t._soundById(_);if(h)if(typeof s=="number"&&s>=0){var y=t.playing(_);y&&t.pause(_,!0),h._seek=s,h._ended=!1,t._clearTimer(_),!t._webAudio&&h._node&&!isNaN(h._node.duration)&&(h._node.currentTime=s);var w=function(){y&&t.play(_,!0),t._emit("seek",_)};if(y&&!t._webAudio){var S=function(){t._playLock?setTimeout(S,0):w()};setTimeout(S,0)}else w()}else if(t._webAudio){var P=t.playing(_)?n.ctx.currentTime-h._playStart:0,I=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(I+P*Math.abs(h._rate))}else return h._node.currentTime;return t},playing:function(t){var o=this;if(typeof t=="number"){var s=o._soundById(t);return s?!s._paused:!1}for(var _=0;_<o._sounds.length;_++)if(!o._sounds[_]._paused)return!0;return!1},duration:function(t){var o=this,s=o._duration,_=o._soundById(t);return _&&(s=o._sprite[_._sprite][1]/1e3),s},state:function(){return this._state},unload:function(){for(var t=this,o=t._sounds,s=0;s<o.length;s++)o[s]._paused||t.stop(o[s]._id),t._webAudio||(t._clearSound(o[s]._node),o[s]._node.removeEventListener("error",o[s]._errorFn,!1),o[s]._node.removeEventListener(n._canPlayEvent,o[s]._loadFn,!1),o[s]._node.removeEventListener("ended",o[s]._endFn,!1),n._releaseHtml5Audio(o[s]._node)),delete o[s]._node,t._clearTimer(o[s]._id);var _=n._howls.indexOf(t);_>=0&&n._howls.splice(_,1);var p=!0;for(s=0;s<n._howls.length;s++)if(n._howls[s]._src===t._src||t._src.indexOf(n._howls[s]._src)>=0){p=!1;break}return l&&p&&delete l[t._src],n.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,o,s,_){var p=this,g=p["_on"+t];return typeof o=="function"&&g.push(_?{id:s,fn:o,once:_}:{id:s,fn:o}),p},off:function(t,o,s){var _=this,p=_["_on"+t],g=0;if(typeof o=="number"&&(s=o,o=null),o||s)for(g=0;g<p.length;g++){var h=s===p[g].id;if(o===p[g].fn&&h||!o&&h){p.splice(g,1);break}}else if(t)_["_on"+t]=[];else{var y=Object.keys(_);for(g=0;g<y.length;g++)y[g].indexOf("_on")===0&&Array.isArray(_[y[g]])&&(_[y[g]]=[])}return _},once:function(t,o,s){var _=this;return _.on(t,o,s,1),_},_emit:function(t,o,s){for(var _=this,p=_["_on"+t],g=p.length-1;g>=0;g--)(!p[g].id||p[g].id===o||t==="load")&&(setTimeout(function(h){h.call(this,o,s)}.bind(_,p[g].fn),0),p[g].once&&_.off(t,p[g].fn,p[g].id));return _._loadQueue(t),_},_loadQueue:function(t){var o=this;if(o._queue.length>0){var s=o._queue[0];s.event===t&&(o._queue.shift(),o._loadQueue()),t||s.action()}return o},_ended:function(t){var o=this,s=t._sprite;if(!o._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(o._ended.bind(o,t),100),o;var _=!!(t._loop||o._sprite[s][2]);if(o._emit("end",t._id),!o._webAudio&&_&&o.stop(t._id,!0).play(t._id),o._webAudio&&_){o._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=n.ctx.currentTime;var p=(t._stop-t._start)*1e3/Math.abs(t._rate);o._endTimers[t._id]=setTimeout(o._ended.bind(o,t),p)}return o._webAudio&&!_&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,o._clearTimer(t._id),o._cleanBuffer(t._node),n._autoSuspend()),!o._webAudio&&!_&&o.stop(t._id,!0),o},_clearTimer:function(t){var o=this;if(o._endTimers[t]){if(typeof o._endTimers[t]!="function")clearTimeout(o._endTimers[t]);else{var s=o._soundById(t);s&&s._node&&s._node.removeEventListener("ended",o._endTimers[t],!1)}delete o._endTimers[t]}return o},_soundById:function(t){for(var o=this,s=0;s<o._sounds.length;s++)if(t===o._sounds[s]._id)return o._sounds[s];return null},_inactiveSound:function(){var t=this;t._drain();for(var o=0;o<t._sounds.length;o++)if(t._sounds[o]._ended)return t._sounds[o].reset();return new a(t)},_drain:function(){var t=this,o=t._pool,s=0,_=0;if(!(t._sounds.length<o)){for(_=0;_<t._sounds.length;_++)t._sounds[_]._ended&&s++;for(_=t._sounds.length-1;_>=0;_--){if(s<=o)return;t._sounds[_]._ended&&(t._webAudio&&t._sounds[_]._node&&t._sounds[_]._node.disconnect(0),t._sounds.splice(_,1),s--)}}},_getSoundIds:function(t){var o=this;if(typeof t>"u"){for(var s=[],_=0;_<o._sounds.length;_++)s.push(o._sounds[_]._id);return s}else return[t]},_refreshBuffer:function(t){var o=this;return t._node.bufferSource=n.ctx.createBufferSource(),t._node.bufferSource.buffer=l[o._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,n.ctx.currentTime),o},_cleanBuffer:function(t){var o=this,s=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),s))try{t.bufferSource.buffer=n._scratchBuffer}catch{}return t.bufferSource=null,o},_clearSound:function(t){var o=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);o||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this,o=t._parent;return t._muted=o._muted,t._loop=o._loop,t._volume=o._volume,t._rate=o._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++n._counter,o._sounds.push(t),t.create(),t},create:function(){var t=this,o=t._parent,s=n._muted||t._muted||t._parent._muted?0:t._volume;return o._webAudio?(t._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),t._node.gain.setValueAtTime(s,n.ctx.currentTime),t._node.paused=!0,t._node.connect(n.masterGain)):n.noAudio||(t._node=n._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(n._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=o._src,t._node.preload=o._preload===!0?"auto":o._preload,t._node.volume=s*n.volume(),t._node.load()),t},reset:function(){var t=this,o=t._parent;return t._muted=o._muted,t._loop=o._loop,t._volume=o._volume,t._rate=o._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++n._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,o=t._parent;o._duration=Math.ceil(t._node.duration*10)/10,Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue()),t._node.removeEventListener(n._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,o=t._parent;o._duration===1/0&&(o._duration=Math.ceil(t._node.duration*10)/10,o._sprite.__default[1]===1/0&&(o._sprite.__default[1]=o._duration*1e3),o._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var l={},u=function(t){var o=t._src;if(l[o]){t._duration=l[o].duration,f(t);return}if(/^data:[^;]+;base64,/.test(o)){for(var s=atob(o.split(",")[1]),_=new Uint8Array(s.length),p=0;p<s.length;++p)_[p]=s.charCodeAt(p);c(_.buffer,t)}else{var g=new XMLHttpRequest;g.open(t._xhr.method,o,!0),g.withCredentials=t._xhr.withCredentials,g.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(h){g.setRequestHeader(h,t._xhr.headers[h])}),g.onload=function(){var h=(g.status+"")[0];if(h!=="0"&&h!=="2"&&h!=="3"){t._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}c(g.response,t)},g.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete l[o],t.load())},d(g)}},d=function(t){try{t.send()}catch{t.onerror()}},c=function(t,o){var s=function(){o._emit("loaderror",null,"Decoding audio data failed.")},_=function(p){p&&o._sounds.length>0?(l[o._src]=p,f(o,p)):s()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(t).then(_).catch(s):n.ctx.decodeAudioData(t,_,s)},f=function(t,o){o&&!t._duration&&(t._duration=o.duration),Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue())},m=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),o=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),s=o?parseInt(o[1],10):null;if(t&&s&&s<9){var _=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!_&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};e.Howler=n,e.Howl=i,typeof me<"u"?(me.HowlerGlobal=r,me.Howler=n,me.Howl=i,me.Sound=a):typeof window<"u"&&(window.HowlerGlobal=r,window.Howler=n,window.Howl=i,window.Sound=a)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var a=i._howls.length-1;a>=0;a--)i._howls[a].stereo(n);return i},HowlerGlobal.prototype.pos=function(n,i,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;if(i=typeof i!="number"?l._pos[1]:i,a=typeof a!="number"?l._pos[2]:a,typeof n=="number")l._pos=[n,i,a],typeof l.ctx.listener.positionX<"u"?(l.ctx.listener.positionX.setTargetAtTime(l._pos[0],Howler.ctx.currentTime,.1),l.ctx.listener.positionY.setTargetAtTime(l._pos[1],Howler.ctx.currentTime,.1),l.ctx.listener.positionZ.setTargetAtTime(l._pos[2],Howler.ctx.currentTime,.1)):l.ctx.listener.setPosition(l._pos[0],l._pos[1],l._pos[2]);else return l._pos;return l},HowlerGlobal.prototype.orientation=function(n,i,a,l,u,d){var c=this;if(!c.ctx||!c.ctx.listener)return c;var f=c._orientation;if(i=typeof i!="number"?f[1]:i,a=typeof a!="number"?f[2]:a,l=typeof l!="number"?f[3]:l,u=typeof u!="number"?f[4]:u,d=typeof d!="number"?f[5]:d,typeof n=="number")c._orientation=[n,i,a,l,u,d],typeof c.ctx.listener.forwardX<"u"?(c.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),c.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),c.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),c.ctx.listener.upX.setTargetAtTime(l,Howler.ctx.currentTime,.1),c.ctx.listener.upY.setTargetAtTime(u,Howler.ctx.currentTime,.1),c.ctx.listener.upZ.setTargetAtTime(d,Howler.ctx.currentTime,.1)):c.ctx.listener.setOrientation(n,i,a,l,u,d);else return f;return c},Howl.prototype.init=function(n){return function(i){var a=this;return a._orientation=i.orientation||[1,0,0],a._stereo=i.stereo||null,a._pos=i.pos||null,a._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},a._onstereo=i.onstereo?[{fn:i.onstereo}]:[],a._onpos=i.onpos?[{fn:i.onpos}]:[],a._onorientation=i.onorientation?[{fn:i.onorientation}]:[],n.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,i){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(n,i)}}),a;var l=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof n=="number")a._stereo=n,a._pos=[n,0,0];else return a._stereo;for(var u=a._getSoundIds(i),d=0;d<u.length;d++){var c=a._soundById(u[d]);if(c)if(typeof n=="number")c._stereo=n,c._pos=[n,0,0],c._node&&(c._pannerAttr.panningModel="equalpower",(!c._panner||!c._panner.pan)&&r(c,l),l==="spatial"?typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):c._panner.setPosition(n,0,0):c._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),a._emit("stereo",c._id);else return c._stereo}return a},Howl.prototype.pos=function(n,i,a,l){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"pos",action:function(){u.pos(n,i,a,l)}}),u;if(i=typeof i!="number"?0:i,a=typeof a!="number"?-.5:a,typeof l>"u")if(typeof n=="number")u._pos=[n,i,a];else return u._pos;for(var d=u._getSoundIds(l),c=0;c<d.length;c++){var f=u._soundById(d[c]);if(f)if(typeof n=="number")f._pos=[n,i,a],f._node&&((!f._panner||f._panner.pan)&&r(f,"spatial"),typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):f._panner.setPosition(n,i,a)),u._emit("pos",f._id);else return f._pos}return u},Howl.prototype.orientation=function(n,i,a,l){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"orientation",action:function(){u.orientation(n,i,a,l)}}),u;if(i=typeof i!="number"?u._orientation[1]:i,a=typeof a!="number"?u._orientation[2]:a,typeof l>"u")if(typeof n=="number")u._orientation=[n,i,a];else return u._orientation;for(var d=u._getSoundIds(l),c=0;c<d.length;c++){var f=u._soundById(d[c]);if(f)if(typeof n=="number")f._orientation=[n,i,a],f._node&&(f._panner||(f._pos||(f._pos=u._pos||[0,0,-.5]),r(f,"spatial")),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):f._panner.setOrientation(n,i,a)),u._emit("orientation",f._id);else return f._orientation}return u},Howl.prototype.pannerAttr=function(){var n=this,i=arguments,a,l,u;if(!n._webAudio)return n;if(i.length===0)return n._pannerAttr;if(i.length===1)if(typeof i[0]=="object")a=i[0],typeof l>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),n._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:n._panningModel});else return u=n._soundById(parseInt(i[0],10)),u?u._pannerAttr:n._pannerAttr;else i.length===2&&(a=i[0],l=parseInt(i[1],10));for(var d=n._getSoundIds(l),c=0;c<d.length;c++)if(u=n._soundById(d[c]),u){var f=u._pannerAttr;f={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:f.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:f.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:f.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:f.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:f.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:f.panningModel};var m=u._panner;m?(m.coneInnerAngle=f.coneInnerAngle,m.coneOuterAngle=f.coneOuterAngle,m.coneOuterGain=f.coneOuterGain,m.distanceModel=f.distanceModel,m.maxDistance=f.maxDistance,m.refDistance=f.refDistance,m.rolloffFactor=f.rolloffFactor,m.panningModel=f.panningModel):(u._pos||(u._pos=n._pos||[0,0,-.5]),r(u,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var i=this,a=i._parent;i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,n.call(this),i._stereo?a.stereo(i._stereo):i._pos&&a.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var i=this,a=i._parent;return i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,i._stereo?a.stereo(i._stereo):i._pos?a.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,a._refreshBuffer(i)),n.call(this)}}(Sound.prototype.reset);var r=function(n,i){i=i||"spatial",i==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(ze);function Lt(e){return Object.prototype.toString.call(e)==="[object Date]"}function vt(e,r){if(e===r||e!==e)return()=>e;const n=typeof e;if(n!==typeof r||Array.isArray(e)!==Array.isArray(r))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=r.map((a,l)=>vt(e[l],a));return a=>i.map(l=>l(a))}if(n==="object"){if(!e||!r)throw new Error("Object cannot be null");if(Lt(e)&&Lt(r)){e=e.getTime(),r=r.getTime();const l=r-e;return u=>new Date(e+u*l)}const i=Object.keys(r),a={};return i.forEach(l=>{a[l]=vt(e[l],r[l])}),l=>{const u={};return i.forEach(d=>{u[d]=a[d](l)}),u}}if(n==="number"){const i=r-e;return a=>e+a*i}throw new Error(`Cannot interpolate ${n} values`)}function Mn(e,r={}){const n=xn(e);let i,a=e;function l(u,d){if(e==null)return n.set(e=u),Promise.resolve();a=u;let c=i,f=!1,{delay:m=0,duration:t=400,easing:o=Ln,interpolate:s=vt}=Rt(Rt({},r),d);if(t===0)return c&&(c.abort(),c=null),n.set(e=a),Promise.resolve();const _=Fn()+m;let p;return i=Dn(g=>{if(g<_)return!0;f||(p=s(e,u),typeof t=="function"&&(t=t(e,u)),f=!0),c&&(c.abort(),c=null);const h=g-_;return h>t?(n.set(e=u),!1):(n.set(e=p(o(h/t))),!0)}),i.promise}return{set:l,update:(u,d)=>l(u(a,e),d),subscribe:n.subscribe}}function Wn(e){let r,n,i;return{c(){r=ye("circle"),this.h()},l(a){r=be(a,"circle",{fill:!0,r:!0,cx:!0,cy:!0,class:!0}),j(r).forEach(T),this.h()},h(){v(r,"fill",e[0]),v(r,"r",e[3]),v(r,"cx",n=e[7](e[4](e[1]))),v(r,"cy",i=e[8](e[4](e[1]))),v(r,"class","svelte-n654c8"),tt(r,"muted",!e[2])},m(a,l){D(a,r,l)},p(a,[l]){l&1&&v(r,"fill",a[0]),l&8&&v(r,"r",a[3]),l&2&&n!==(n=a[7](a[4](a[1])))&&v(r,"cx",n),l&2&&i!==(i=a[8](a[4](a[1])))&&v(r,"cy",i),l&4&&tt(r,"muted",!a[2])},i:ue,o:ue,d(a){a&&T(r)}}}const Xn=.05,dt=10,Qn=20;function Zn(e,r,n){let i,a,l,u,d,{color:c}=r,{note:f}=r,{id:m}=r,{innerRadius:t}=r;const{beatsPerRotation:o,getCycleDuration:s,getAngleScale:_,getT:p,getInstrumentToggles:g}=kn("song"),h=_(),y=p();Ee(e,y,M=>n(14,u=M));const w=g();Ee(e,w,M=>n(13,l=M));const P=s()/o/2,I={hihat:new ze.Howl({src:["assets/sound/hihat.mp3"]}),kick:new ze.Howl({src:["assets/sound/kick.mp3"]}),snare:new ze.Howl({src:["assets/sound/snare.mp3"]})},F=M=>t*Math.cos(M),L=M=>t*Math.sin(M),E=Mn(dt);Ee(e,E,M=>n(3,d=M));const q=()=>{I[m].state()==="loaded"&&I[m].play(),m!=="hihat"&&(E.set(dt,{duration:0}),E.set(Qn,{duration:P}).then(()=>E.set(dt,{duration:P})))};return e.$$set=M=>{"color"in M&&n(0,c=M.color),"note"in M&&n(1,f=M.note),"id"in M&&n(10,m=M.id),"innerRadius"in M&&n(11,t=M.innerRadius)},e.$$.update=()=>{e.$$.dirty&16386&&n(12,i=u>=f&&u<f+Xn),e.$$.dirty&9216&&n(2,a=l[m]==="on"),e.$$.dirty&4100&&i&&a&&q()},[c,f,a,d,h,y,w,F,L,E,m,t,i,l,u]}class Yn extends pe{constructor(r){super(),ge(this,r,Zn,Wn,de,{color:0,note:1,id:10,innerRadius:11})}}function $t(e,r,n){const i=e.slice();return i[15]=r[n],i}function Bt(e){let r,n;return r=new Yn({props:{note:e[15],color:e[6][e[0]],id:e[0],innerRadius:e[4]}}),{c(){U(r.$$.fragment)},l(i){z(r.$$.fragment,i)},m(i,a){ee(r,i,a),n=!0},p(i,a){const l={};a&2&&(l.note=i[15]),a&1&&(l.color=i[6][i[0]]),a&1&&(l.id=i[0]),a&16&&(l.innerRadius=i[4]),r.$set(l)},i(i){n||(W(r.$$.fragment,i),n=!0)},o(i){Z(r.$$.fragment,i),n=!1},d(i){te(r,i)}}}function Kn(e){let r,n,i,a,l=e[1],u=[];for(let c=0;c<l.length;c+=1)u[c]=Bt($t(e,l,c));const d=c=>Z(u[c],1,1,()=>{u[c]=null});return{c(){for(let c=0;c<u.length;c+=1)u[c].c();r=Y(),n=ye("polygon"),this.h()},l(c){for(let f=0;f<u.length;f+=1)u[f].l(c);r=K(c),n=be(c,"polygon",{points:!0,fill:!0,stroke:!0,class:!0}),j(n).forEach(T),this.h()},h(){v(n,"points",e[3]),v(n,"fill",i=e[6][e[0]]),v(n,"stroke","black"),v(n,"class","svelte-1v1uqkj"),tt(n,"muted",!e[2])},m(c,f){for(let m=0;m<u.length;m+=1)u[m].m(c,f);D(c,r,f),D(c,n,f),a=!0},p(c,[f]){if(f&83){l=c[1];let m;for(m=0;m<l.length;m+=1){const t=$t(c,l,m);u[m]?(u[m].p(t,f),W(u[m],1)):(u[m]=Bt(t),u[m].c(),W(u[m],1),u[m].m(r.parentNode,r))}for(ft(),m=l.length;m<u.length;m+=1)d(m);ct()}(!a||f&8)&&v(n,"points",c[3]),(!a||f&1&&i!==(i=c[6][c[0]]))&&v(n,"fill",i),(!a||f&4)&&tt(n,"muted",!c[2])},i(c){if(!a){for(let f=0;f<l.length;f+=1)W(u[f]);a=!0}},o(c){u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)Z(u[f]);a=!1},d(c){Be(u,c),c&&T(r),c&&T(n)}}}function Jn(e,r,n){let i,a,l,u,d,{id:c}=r,{i:f}=r,{data:m}=r;const{getAngleScale:t,getInstrumentToggles:o}=kn("song"),s=t(),_=o();Ee(e,_,y=>n(9,d=y));const p=y=>i*Math.cos(y),g=y=>i*Math.sin(y),h={hihat:"lightblue",kick:"black",snare:"lightgreen"};return e.$$set=y=>{"id"in y&&n(0,c=y.id),"i"in y&&n(7,f=y.i),"data"in y&&n(1,m=y.data)},e.$$.update=()=>{e.$$.dirty&128&&n(4,i=150+f*22),e.$$.dirty&2&&n(8,a=m.map(y=>{const w=s(y);return`${p(w)},${g(w)}`})),e.$$.dirty&256&&n(3,l=a.join(" ")),e.$$.dirty&513&&n(2,u=d[c]==="on")},[c,m,u,l,i,_,h,f,a,d]}class Un extends pe{constructor(r){super(),ge(this,r,Jn,Kn,de,{id:0,i:7,data:1})}}var zn="Expected a function",Ct=0/0,er="[object Symbol]",tr=/^\s+|\s+$/g,nr=/^[-+]0x[0-9a-f]+$/i,rr=/^0b[01]+$/i,ir=/^0o[0-7]+$/i,ar=parseInt,or=typeof me=="object"&&me&&me.Object===Object&&me,lr=typeof self=="object"&&self&&self.Object===Object&&self,sr=or||lr||Function("return this")(),ur=Object.prototype,fr=ur.toString,cr=Math.max,dr=Math.min,_t=function(){return sr.Date.now()};function _r(e,r,n){var i,a,l,u,d,c,f=0,m=!1,t=!1,o=!0;if(typeof e!="function")throw new TypeError(zn);r=Gt(r)||0,yt(n)&&(m=!!n.leading,t="maxWait"in n,l=t?cr(Gt(n.maxWait)||0,r):l,o="trailing"in n?!!n.trailing:o);function s(I){var F=i,L=a;return i=a=void 0,f=I,u=e.apply(L,F),u}function _(I){return f=I,d=setTimeout(h,r),m?s(I):u}function p(I){var F=I-c,L=I-f,E=r-F;return t?dr(E,l-L):E}function g(I){var F=I-c,L=I-f;return c===void 0||F>=r||F<0||t&&L>=l}function h(){var I=_t();if(g(I))return y(I);d=setTimeout(h,p(I))}function y(I){return d=void 0,o&&i?s(I):(i=a=void 0,u)}function w(){d!==void 0&&clearTimeout(d),f=0,i=c=a=d=void 0}function S(){return d===void 0?u:y(_t())}function P(){var I=_t(),F=g(I);if(i=arguments,a=this,c=I,F){if(d===void 0)return _(c);if(t)return d=setTimeout(h,r),s(c)}return d===void 0&&(d=setTimeout(h,r)),u}return P.cancel=w,P.flush=S,P}function yt(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function hr(e){return!!e&&typeof e=="object"}function mr(e){return typeof e=="symbol"||hr(e)&&fr.call(e)==er}function Gt(e){if(typeof e=="number")return e;if(mr(e))return Ct;if(yt(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=yt(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(tr,"");var n=rr.test(e);return n||ir.test(e)?ar(e.slice(2),n?2:8):nr.test(e)?Ct:+e}var pr=_r;const gr=Cn({width:0,height:0},e=>{const r=()=>e({width:window.innerWidth,height:window.innerHeight});return r(),window.addEventListener("resize",pr(r,250)),()=>{window.removeEventListener("resize",r)}});function et(e,r){return e==null||r==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function Sn(e){let r,n,i;e.length!==2?(r=et,n=(d,c)=>et(e(d),c),i=(d,c)=>e(d)-c):(r=e===et||e===Gn?e:vr,n=e,i=e);function a(d,c,f=0,m=d.length){if(f<m){if(r(c,c)!==0)return m;do{const t=f+m>>>1;n(d[t],c)<0?f=t+1:m=t}while(f<m)}return f}function l(d,c,f=0,m=d.length){if(f<m){if(r(c,c)!==0)return m;do{const t=f+m>>>1;n(d[t],c)<=0?f=t+1:m=t}while(f<m)}return f}function u(d,c,f=0,m=d.length){const t=a(d,c,f,m-1);return t>f&&i(d[t-1],c)>-i(d[t],c)?t-1:t}return{left:a,center:u,right:l}}function vr(){return 0}function yr(e){return e===null?NaN:+e}const br=Sn(et),wr=br.right;Sn(yr).center;const Ar=wr;function kr(e,r){let n,i;if(r===void 0)for(const a of e)a!=null&&(n===void 0?a>=a&&(n=i=a):(n>a&&(n=a),i<a&&(i=a)));else{let a=-1;for(let l of e)(l=r(l,++a,e))!=null&&(n===void 0?l>=l&&(n=i=l):(n>l&&(n=l),i<l&&(i=l)))}return[n,i]}const Tr=Math.sqrt(50),xr=Math.sqrt(10),Mr=Math.sqrt(2);function nt(e,r,n){const i=(r-e)/Math.max(0,n),a=Math.floor(Math.log10(i)),l=i/Math.pow(10,a),u=l>=Tr?10:l>=xr?5:l>=Mr?2:1;let d,c,f;return a<0?(f=Math.pow(10,-a)/u,d=Math.round(e*f),c=Math.round(r*f),d/f<e&&++d,c/f>r&&--c,f=-f):(f=Math.pow(10,a)*u,d=Math.round(e/f),c=Math.round(r/f),d*f<e&&++d,c*f>r&&--c),c<d&&.5<=n&&n<2?nt(e,r,n*2):[d,c,f]}function Sr(e,r,n){if(r=+r,e=+e,n=+n,!(n>0))return[];if(e===r)return[e];const i=r<e,[a,l,u]=i?nt(r,e,n):nt(e,r,n);if(!(l>=a))return[];const d=l-a+1,c=new Array(d);if(i)if(u<0)for(let f=0;f<d;++f)c[f]=(l-f)/-u;else for(let f=0;f<d;++f)c[f]=(l-f)*u;else if(u<0)for(let f=0;f<d;++f)c[f]=(a+f)/-u;else for(let f=0;f<d;++f)c[f]=(a+f)*u;return c}function bt(e,r,n){return r=+r,e=+e,n=+n,nt(e,r,n)[2]}function Ir(e,r,n){r=+r,e=+e,n=+n;const i=r<e,a=i?bt(r,e,n):bt(e,r,n);return(i?-1:1)*(a<0?1/-a:a)}function Le(e,r,n){e=+e,r=+r,n=(a=arguments.length)<2?(r=e,e=0,1):a<3?1:+n;for(var i=-1,a=Math.max(0,Math.ceil((r-e)/n))|0,l=new Array(a);++i<a;)l[i]=e+i*n;return l}function It(e,r,n){e.prototype=r.prototype=n,n.constructor=e}function In(e,r){var n=Object.create(e.prototype);for(var i in r)n[i]=r[i];return n}function Ze(){}var Ve=.7,rt=1/Ve,De="\\s*([+-]?\\d+)\\s*",We="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ce="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Er=/^#([0-9a-f]{3,8})$/,Pr=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),Nr=new RegExp(`^rgb\\(${ce},${ce},${ce}\\)$`),Or=new RegExp(`^rgba\\(${De},${De},${De},${We}\\)$`),Rr=new RegExp(`^rgba\\(${ce},${ce},${ce},${We}\\)$`),Hr=new RegExp(`^hsl\\(${We},${ce},${ce}\\)$`),Fr=new RegExp(`^hsla\\(${We},${ce},${ce},${We}\\)$`),qt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};It(Ze,Xe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jt,formatHex:jt,formatHex8:Dr,formatHsl:Lr,formatRgb:Vt,toString:Vt});function jt(){return this.rgb().formatHex()}function Dr(){return this.rgb().formatHex8()}function Lr(){return En(this).formatHsl()}function Vt(){return this.rgb().formatRgb()}function Xe(e){var r,n;return e=(e+"").trim().toLowerCase(),(r=Er.exec(e))?(n=r[1].length,r=parseInt(r[1],16),n===6?Wt(r):n===3?new oe(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?Ye(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?Ye(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Pr.exec(e))?new oe(r[1],r[2],r[3],1):(r=Nr.exec(e))?new oe(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Or.exec(e))?Ye(r[1],r[2],r[3],r[4]):(r=Rr.exec(e))?Ye(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Hr.exec(e))?Zt(r[1],r[2]/100,r[3]/100,1):(r=Fr.exec(e))?Zt(r[1],r[2]/100,r[3]/100,r[4]):qt.hasOwnProperty(e)?Wt(qt[e]):e==="transparent"?new oe(NaN,NaN,NaN,0):null}function Wt(e){return new oe(e>>16&255,e>>8&255,e&255,1)}function Ye(e,r,n,i){return i<=0&&(e=r=n=NaN),new oe(e,r,n,i)}function $r(e){return e instanceof Ze||(e=Xe(e)),e?(e=e.rgb(),new oe(e.r,e.g,e.b,e.opacity)):new oe}function wt(e,r,n,i){return arguments.length===1?$r(e):new oe(e,r,n,i??1)}function oe(e,r,n,i){this.r=+e,this.g=+r,this.b=+n,this.opacity=+i}It(oe,wt,In(Ze,{brighter(e){return e=e==null?rt:Math.pow(rt,e),new oe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ve:Math.pow(Ve,e),new oe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new oe(Pe(this.r),Pe(this.g),Pe(this.b),it(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xt,formatHex:Xt,formatHex8:Br,formatRgb:Qt,toString:Qt}));function Xt(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}`}function Br(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}${Ie((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qt(){const e=it(this.opacity);return`${e===1?"rgb(":"rgba("}${Pe(this.r)}, ${Pe(this.g)}, ${Pe(this.b)}${e===1?")":`, ${e})`}`}function it(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ie(e){return e=Pe(e),(e<16?"0":"")+e.toString(16)}function Zt(e,r,n,i){return i<=0?e=r=n=NaN:n<=0||n>=1?e=r=NaN:r<=0&&(e=NaN),new se(e,r,n,i)}function En(e){if(e instanceof se)return new se(e.h,e.s,e.l,e.opacity);if(e instanceof Ze||(e=Xe(e)),!e)return new se;if(e instanceof se)return e;e=e.rgb();var r=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(r,n,i),l=Math.max(r,n,i),u=NaN,d=l-a,c=(l+a)/2;return d?(r===l?u=(n-i)/d+(n<i)*6:n===l?u=(i-r)/d+2:u=(r-n)/d+4,d/=c<.5?l+a:2-l-a,u*=60):d=c>0&&c<1?0:u,new se(u,d,c,e.opacity)}function Cr(e,r,n,i){return arguments.length===1?En(e):new se(e,r,n,i??1)}function se(e,r,n,i){this.h=+e,this.s=+r,this.l=+n,this.opacity=+i}It(se,Cr,In(Ze,{brighter(e){return e=e==null?rt:Math.pow(rt,e),new se(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ve:Math.pow(Ve,e),new se(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,a=2*n-i;return new oe(ht(e>=240?e-240:e+120,a,i),ht(e,a,i),ht(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new se(Yt(this.h),Ke(this.s),Ke(this.l),it(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=it(this.opacity);return`${e===1?"hsl(":"hsla("}${Yt(this.h)}, ${Ke(this.s)*100}%, ${Ke(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Yt(e){return e=(e||0)%360,e<0?e+360:e}function Ke(e){return Math.max(0,Math.min(1,e||0))}function ht(e,r,n){return(e<60?r+(n-r)*e/60:e<180?n:e<240?r+(n-r)*(240-e)/60:r)*255}const Et=e=>()=>e;function Gr(e,r){return function(n){return e+n*r}}function qr(e,r,n){return e=Math.pow(e,n),r=Math.pow(r,n)-e,n=1/n,function(i){return Math.pow(e+i*r,n)}}function jr(e){return(e=+e)==1?Pn:function(r,n){return n-r?qr(r,n,e):Et(isNaN(r)?n:r)}}function Pn(e,r){var n=r-e;return n?Gr(e,n):Et(isNaN(e)?r:e)}const Kt=function e(r){var n=jr(r);function i(a,l){var u=n((a=wt(a)).r,(l=wt(l)).r),d=n(a.g,l.g),c=n(a.b,l.b),f=Pn(a.opacity,l.opacity);return function(m){return a.r=u(m),a.g=d(m),a.b=c(m),a.opacity=f(m),a+""}}return i.gamma=e,i}(1);function Vr(e,r){r||(r=[]);var n=e?Math.min(r.length,e.length):0,i=r.slice(),a;return function(l){for(a=0;a<n;++a)i[a]=e[a]*(1-l)+r[a]*l;return i}}function Wr(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Xr(e,r){var n=r?r.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),l=new Array(n),u;for(u=0;u<i;++u)a[u]=Pt(e[u],r[u]);for(;u<n;++u)l[u]=r[u];return function(d){for(u=0;u<i;++u)l[u]=a[u](d);return l}}function Qr(e,r){var n=new Date;return e=+e,r=+r,function(i){return n.setTime(e*(1-i)+r*i),n}}function at(e,r){return e=+e,r=+r,function(n){return e*(1-n)+r*n}}function Zr(e,r){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(a in r)a in e?n[a]=Pt(e[a],r[a]):i[a]=r[a];return function(l){for(a in n)i[a]=n[a](l);return i}}var At=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mt=new RegExp(At.source,"g");function Yr(e){return function(){return e}}function Kr(e){return function(r){return e(r)+""}}function Jr(e,r){var n=At.lastIndex=mt.lastIndex=0,i,a,l,u=-1,d=[],c=[];for(e=e+"",r=r+"";(i=At.exec(e))&&(a=mt.exec(r));)(l=a.index)>n&&(l=r.slice(n,l),d[u]?d[u]+=l:d[++u]=l),(i=i[0])===(a=a[0])?d[u]?d[u]+=a:d[++u]=a:(d[++u]=null,c.push({i:u,x:at(i,a)})),n=mt.lastIndex;return n<r.length&&(l=r.slice(n),d[u]?d[u]+=l:d[++u]=l),d.length<2?c[0]?Kr(c[0].x):Yr(r):(r=c.length,function(f){for(var m=0,t;m<r;++m)d[(t=c[m]).i]=t.x(f);return d.join("")})}function Pt(e,r){var n=typeof r,i;return r==null||n==="boolean"?Et(r):(n==="number"?at:n==="string"?(i=Xe(r))?(r=i,Kt):Jr:r instanceof Xe?Kt:r instanceof Date?Qr:Wr(r)?Vr:Array.isArray(r)?Xr:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Zr:at)(e,r)}function Ur(e,r){return e=+e,r=+r,function(n){return Math.round(e*(1-n)+r*n)}}const kt=Math.PI,Tt=2*kt,Te=1e-6,zr=Tt-Te;function Nn(e){this._+=e[0];for(let r=1,n=e.length;r<n;++r)this._+=arguments[r]+e[r]}function ei(e){let r=Math.floor(e);if(!(r>=0))throw new Error(`invalid digits: ${e}`);if(r>15)return Nn;const n=10**r;return function(i){this._+=i[0];for(let a=1,l=i.length;a<l;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}class ti{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?Nn:ei(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,i,a){this._append`Q${+r},${+n},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(r,n,i,a,l,u){this._append`C${+r},${+n},${+i},${+a},${this._x1=+l},${this._y1=+u}`}arcTo(r,n,i,a,l){if(r=+r,n=+n,i=+i,a=+a,l=+l,l<0)throw new Error(`negative radius: ${l}`);let u=this._x1,d=this._y1,c=i-r,f=a-n,m=u-r,t=d-n,o=m*m+t*t;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(o>Te)if(!(Math.abs(t*c-f*m)>Te)||!l)this._append`L${this._x1=r},${this._y1=n}`;else{let s=i-u,_=a-d,p=c*c+f*f,g=s*s+_*_,h=Math.sqrt(p),y=Math.sqrt(o),w=l*Math.tan((kt-Math.acos((p+o-g)/(2*h*y)))/2),S=w/y,P=w/h;Math.abs(S-1)>Te&&this._append`L${r+S*m},${n+S*t}`,this._append`A${l},${l},0,0,${+(t*s>m*_)},${this._x1=r+P*c},${this._y1=n+P*f}`}}arc(r,n,i,a,l,u){if(r=+r,n=+n,i=+i,u=!!u,i<0)throw new Error(`negative radius: ${i}`);let d=i*Math.cos(a),c=i*Math.sin(a),f=r+d,m=n+c,t=1^u,o=u?a-l:l-a;this._x1===null?this._append`M${f},${m}`:(Math.abs(this._x1-f)>Te||Math.abs(this._y1-m)>Te)&&this._append`L${f},${m}`,i&&(o<0&&(o=o%Tt+Tt),o>zr?this._append`A${i},${i},0,1,${t},${r-d},${n-c}A${i},${i},0,1,${t},${this._x1=f},${this._y1=m}`:o>Te&&this._append`A${i},${i},0,${+(o>=kt)},${t},${this._x1=r+i*Math.cos(l)},${this._y1=n+i*Math.sin(l)}`)}rect(r,n,i,a){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}}function ni(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ot(e,r){if((n=(e=r?e.toExponential(r-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function $e(e){return e=ot(Math.abs(e)),e?e[1]:NaN}function ri(e,r){return function(n,i){for(var a=n.length,l=[],u=0,d=e[0],c=0;a>0&&d>0&&(c+d+1>i&&(d=Math.max(1,i-c)),l.push(n.substring(a-=d,a+d)),!((c+=d+1)>i));)d=e[u=(u+1)%e.length];return l.reverse().join(r)}}function ii(e){return function(r){return r.replace(/[0-9]/g,function(n){return e[+n]})}}var ai=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lt(e){if(!(r=ai.exec(e)))throw new Error("invalid format: "+e);var r;return new Nt({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}lt.prototype=Nt.prototype;function Nt(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Nt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oi(e){e:for(var r=e.length,n=1,i=-1,a;n<r;++n)switch(e[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(a+1):e}var On;function li(e,r){var n=ot(e,r);if(!n)return e+"";var i=n[0],a=n[1],l=a-(On=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,u=i.length;return l===u?i:l>u?i+new Array(l-u+1).join("0"):l>0?i.slice(0,l)+"."+i.slice(l):"0."+new Array(1-l).join("0")+ot(e,Math.max(0,r+l-1))[0]}function Jt(e,r){var n=ot(e,r);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const Ut={"%":(e,r)=>(e*100).toFixed(r),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ni,e:(e,r)=>e.toExponential(r),f:(e,r)=>e.toFixed(r),g:(e,r)=>e.toPrecision(r),o:e=>Math.round(e).toString(8),p:(e,r)=>Jt(e*100,r),r:Jt,s:li,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function zt(e){return e}var en=Array.prototype.map,tn=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function si(e){var r=e.grouping===void 0||e.thousands===void 0?zt:ri(en.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?zt:ii(en.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function f(t){t=lt(t);var o=t.fill,s=t.align,_=t.sign,p=t.symbol,g=t.zero,h=t.width,y=t.comma,w=t.precision,S=t.trim,P=t.type;P==="n"?(y=!0,P="g"):Ut[P]||(w===void 0&&(w=12),S=!0,P="g"),(g||o==="0"&&s==="=")&&(g=!0,o="0",s="=");var I=p==="$"?n:p==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",F=p==="$"?i:/[%p]/.test(P)?u:"",L=Ut[P],E=/[defgprs%]/.test(P);w=w===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function q(M){var R=I,b=F,A,O,H;if(P==="c")b=L(M)+b,M="";else{M=+M;var k=M<0||1/M<0;if(M=isNaN(M)?c:L(Math.abs(M),w),S&&(M=oi(M)),k&&+M==0&&_!=="+"&&(k=!1),R=(k?_==="("?_:d:_==="-"||_==="("?"":_)+R,b=(P==="s"?tn[8+On/3]:"")+b+(k&&_==="("?")":""),E){for(A=-1,O=M.length;++A<O;)if(H=M.charCodeAt(A),48>H||H>57){b=(H===46?a+M.slice(A+1):M.slice(A))+b,M=M.slice(0,A);break}}}y&&!g&&(M=r(M,1/0));var C=R.length+M.length+b.length,V=C<h?new Array(h-C+1).join(o):"";switch(y&&g&&(M=r(V+M,V.length?h-b.length:1/0),V=""),s){case"<":M=R+M+b+V;break;case"=":M=R+V+M+b;break;case"^":M=V.slice(0,C=V.length>>1)+R+M+b+V.slice(C);break;default:M=V+R+M+b;break}return l(M)}return q.toString=function(){return t+""},q}function m(t,o){var s=f((t=lt(t),t.type="f",t)),_=Math.max(-8,Math.min(8,Math.floor($e(o)/3)))*3,p=Math.pow(10,-_),g=tn[8+_/3];return function(h){return s(p*h)+g}}return{format:f,formatPrefix:m}}var Je,st,Rn;ui({thousands:",",grouping:[3],currency:["$",""]});function ui(e){return Je=si(e),st=Je.format,Rn=Je.formatPrefix,Je}function fi(e){return Math.max(0,-$e(Math.abs(e)))}function ci(e,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($e(r)/3)))*3-$e(Math.abs(e)))}function di(e,r){return e=Math.abs(e),r=Math.abs(r)-e,Math.max(0,$e(r)-$e(e))+1}function _i(e,r){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(r).domain(e);break}return this}function hi(e){return function(){return e}}function mi(e){return+e}var nn=[0,1];function Re(e){return e}function xt(e,r){return(r-=e=+e)?function(n){return(n-e)/r}:hi(isNaN(r)?NaN:.5)}function pi(e,r){var n;return e>r&&(n=e,e=r,r=n),function(i){return Math.max(e,Math.min(r,i))}}function gi(e,r,n){var i=e[0],a=e[1],l=r[0],u=r[1];return a<i?(i=xt(a,i),l=n(u,l)):(i=xt(i,a),l=n(l,u)),function(d){return l(i(d))}}function vi(e,r,n){var i=Math.min(e.length,r.length)-1,a=new Array(i),l=new Array(i),u=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++u<i;)a[u]=xt(e[u],e[u+1]),l[u]=n(r[u],r[u+1]);return function(d){var c=Ar(e,d,1,i)-1;return l[c](a[c](d))}}function yi(e,r){return r.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function bi(){var e=nn,r=nn,n=Pt,i,a,l,u=Re,d,c,f;function m(){var o=Math.min(e.length,r.length);return u!==Re&&(u=pi(e[0],e[o-1])),d=o>2?vi:gi,c=f=null,t}function t(o){return o==null||isNaN(o=+o)?l:(c||(c=d(e.map(i),r,n)))(i(u(o)))}return t.invert=function(o){return u(a((f||(f=d(r,e.map(i),at)))(o)))},t.domain=function(o){return arguments.length?(e=Array.from(o,mi),m()):e.slice()},t.range=function(o){return arguments.length?(r=Array.from(o),m()):r.slice()},t.rangeRound=function(o){return r=Array.from(o),n=Ur,m()},t.clamp=function(o){return arguments.length?(u=o?!0:Re,m()):u!==Re},t.interpolate=function(o){return arguments.length?(n=o,m()):n},t.unknown=function(o){return arguments.length?(l=o,t):l},function(o,s){return i=o,a=s,m()}}function wi(){return bi()(Re,Re)}function Ai(e,r,n,i){var a=Ir(e,r,n),l;switch(i=lt(i??",f"),i.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(r));return i.precision==null&&!isNaN(l=ci(a,u))&&(i.precision=l),Rn(i,u)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(l=di(a,Math.max(Math.abs(e),Math.abs(r))))&&(i.precision=l-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(l=fi(a))&&(i.precision=l-(i.type==="%")*2);break}}return st(i)}function ki(e){var r=e.domain;return e.ticks=function(n){var i=r();return Sr(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var a=r();return Ai(a[0],a[a.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=r(),a=0,l=i.length-1,u=i[a],d=i[l],c,f,m=10;for(d<u&&(f=u,u=d,d=f,f=a,a=l,l=f);m-- >0;){if(f=bt(u,d,n),f===c)return i[a]=u,i[l]=d,r(i);if(f>0)u=Math.floor(u/f)*f,d=Math.ceil(d/f)*f;else if(f<0)u=Math.ceil(u*f)/f,d=Math.floor(d*f)/f;else break;c=f}return e},e}function Ot(){var e=wi();return e.copy=function(){return yi(e,Ot())},_i.apply(e,arguments),ki(e)}function ve(e){return function(){return e}}const rn=Math.abs,J=Math.atan2,ke=Math.cos,Ti=Math.max,pt=Math.min,fe=Math.sin,He=Math.sqrt,ie=1e-12,Qe=Math.PI,ut=Qe/2,xi=2*Qe;function Mi(e){return e>1?0:e<-1?Qe:Math.acos(e)}function an(e){return e>=1?ut:e<=-1?-ut:Math.asin(e)}function Si(e){let r=3;return e.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);r=i}return e},()=>new ti(r)}function Ii(e){return e.innerRadius}function Ei(e){return e.outerRadius}function Pi(e){return e.startAngle}function Ni(e){return e.endAngle}function Oi(e){return e&&e.padAngle}function Ri(e,r,n,i,a,l,u,d){var c=n-e,f=i-r,m=u-a,t=d-l,o=t*c-m*f;if(!(o*o<ie))return o=(m*(r-l)-t*(e-a))/o,[e+o*c,r+o*f]}function Ue(e,r,n,i,a,l,u){var d=e-n,c=r-i,f=(u?l:-l)/He(d*d+c*c),m=f*c,t=-f*d,o=e+m,s=r+t,_=n+m,p=i+t,g=(o+_)/2,h=(s+p)/2,y=_-o,w=p-s,S=y*y+w*w,P=a-l,I=o*p-_*s,F=(w<0?-1:1)*He(Ti(0,P*P*S-I*I)),L=(I*w-y*F)/S,E=(-I*y-w*F)/S,q=(I*w+y*F)/S,M=(-I*y+w*F)/S,R=L-g,b=E-h,A=q-g,O=M-h;return R*R+b*b>A*A+O*O&&(L=q,E=M),{cx:L,cy:E,x01:-m,y01:-t,x11:L*(a/P-1),y11:E*(a/P-1)}}function Hi(){var e=Ii,r=Ei,n=ve(0),i=null,a=Pi,l=Ni,u=Oi,d=null,c=Si(f);function f(){var m,t,o=+e.apply(this,arguments),s=+r.apply(this,arguments),_=a.apply(this,arguments)-ut,p=l.apply(this,arguments)-ut,g=rn(p-_),h=p>_;if(d||(d=m=c()),s<o&&(t=s,s=o,o=t),!(s>ie))d.moveTo(0,0);else if(g>xi-ie)d.moveTo(s*ke(_),s*fe(_)),d.arc(0,0,s,_,p,!h),o>ie&&(d.moveTo(o*ke(p),o*fe(p)),d.arc(0,0,o,p,_,h));else{var y=_,w=p,S=_,P=p,I=g,F=g,L=u.apply(this,arguments)/2,E=L>ie&&(i?+i.apply(this,arguments):He(o*o+s*s)),q=pt(rn(s-o)/2,+n.apply(this,arguments)),M=q,R=q,b,A;if(E>ie){var O=an(E/o*fe(L)),H=an(E/s*fe(L));(I-=O*2)>ie?(O*=h?1:-1,S+=O,P-=O):(I=0,S=P=(_+p)/2),(F-=H*2)>ie?(H*=h?1:-1,y+=H,w-=H):(F=0,y=w=(_+p)/2)}var k=s*ke(y),C=s*fe(y),V=o*ke(P),ne=o*fe(P);if(q>ie){var re=s*ke(w),Ne=s*fe(w),Oe=o*ke(S),Ce=o*fe(S),le;if(g<Qe)if(le=Ri(k,C,Oe,Ce,re,Ne,V,ne)){var x=k-le[0],G=C-le[1],_e=re-le[0],he=Ne-le[1],Ge=1/fe(Mi((x*_e+G*he)/(He(x*x+G*G)*He(_e*_e+he*he)))/2),qe=He(le[0]*le[0]+le[1]*le[1]);M=pt(q,(o-qe)/(Ge-1)),R=pt(q,(s-qe)/(Ge+1))}else M=R=0}F>ie?R>ie?(b=Ue(Oe,Ce,k,C,s,R,h),A=Ue(re,Ne,V,ne,s,R,h),d.moveTo(b.cx+b.x01,b.cy+b.y01),R<q?d.arc(b.cx,b.cy,R,J(b.y01,b.x01),J(A.y01,A.x01),!h):(d.arc(b.cx,b.cy,R,J(b.y01,b.x01),J(b.y11,b.x11),!h),d.arc(0,0,s,J(b.cy+b.y11,b.cx+b.x11),J(A.cy+A.y11,A.cx+A.x11),!h),d.arc(A.cx,A.cy,R,J(A.y11,A.x11),J(A.y01,A.x01),!h))):(d.moveTo(k,C),d.arc(0,0,s,y,w,!h)):d.moveTo(k,C),!(o>ie)||!(I>ie)?d.lineTo(V,ne):M>ie?(b=Ue(V,ne,re,Ne,o,-M,h),A=Ue(k,C,Oe,Ce,o,-M,h),d.lineTo(b.cx+b.x01,b.cy+b.y01),M<q?d.arc(b.cx,b.cy,M,J(b.y01,b.x01),J(A.y01,A.x01),!h):(d.arc(b.cx,b.cy,M,J(b.y01,b.x01),J(b.y11,b.x11),!h),d.arc(0,0,o,J(b.cy+b.y11,b.cx+b.x11),J(A.cy+A.y11,A.cx+A.x11),h),d.arc(A.cx,A.cy,M,J(A.y11,A.x11),J(A.y01,A.x01),!h))):d.arc(0,0,o,P,S,h)}if(d.closePath(),m)return d=null,m+""||null}return f.centroid=function(){var m=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +l.apply(this,arguments))/2-Qe/2;return[ke(t)*m,fe(t)*m]},f.innerRadius=function(m){return arguments.length?(e=typeof m=="function"?m:ve(+m),f):e},f.outerRadius=function(m){return arguments.length?(r=typeof m=="function"?m:ve(+m),f):r},f.cornerRadius=function(m){return arguments.length?(n=typeof m=="function"?m:ve(+m),f):n},f.padRadius=function(m){return arguments.length?(i=m==null?null:typeof m=="function"?m:ve(+m),f):i},f.startAngle=function(m){return arguments.length?(a=typeof m=="function"?m:ve(+m),f):a},f.endAngle=function(m){return arguments.length?(l=typeof m=="function"?m:ve(+m),f):l},f.padAngle=function(m){return arguments.length?(u=typeof m=="function"?m:ve(+m),f):u},f.context=function(m){return arguments.length?(d=m??null,f):d},f}function on(e){let r,n=e[2][0]+"",i,a,l,u=e[2][1]+"",d;return{c(){r=$("span"),i=X(n),a=Y(),l=$("span"),d=X(u),this.h()},l(c){r=B(c,"SPAN",{class:!0});var f=j(r);i=Q(f,n),f.forEach(T),a=K(c),l=B(c,"SPAN",{class:!0});var m=j(l);d=Q(m,u),m.forEach(T),this.h()},h(){v(r,"class","svelte-157h5as"),v(l,"class","svelte-157h5as")},m(c,f){D(c,r,f),N(r,i),D(c,a,f),D(c,l,f),N(l,d)},p(c,f){f&4&&n!==(n=c[2][0]+"")&&Ae(i,n),f&4&&u!==(u=c[2][1]+"")&&Ae(d,u)},d(c){c&&T(r),c&&T(a),c&&T(l)}}}function Fi(e){let r,n,i,a,l,u,d,c,f=e[1]==="inner"&&on(e);return{c(){r=$("div"),n=$("span"),i=X(e[0]),a=Y(),l=$("button"),f&&f.c(),this.h()},l(m){r=B(m,"DIV",{class:!0});var t=j(r);n=B(t,"SPAN",{class:!0,id:!0});var o=j(n);i=Q(o,e[0]),o.forEach(T),a=K(t),l=B(t,"BUTTON",{role:!0,"aria-checked":!0,"aria-labelledby":!0,class:!0});var s=j(l);f&&f.l(s),s.forEach(T),t.forEach(T),this.h()},h(){v(n,"class","label svelte-157h5as"),v(n,"id",e[4]),v(l,"role","switch"),v(l,"aria-checked",e[3]),v(l,"aria-labelledby",e[4]),v(l,"class","svelte-157h5as"),v(r,"class",u="toggle toggle--"+e[1]+" svelte-157h5as")},m(m,t){D(m,r,t),N(r,n),N(n,i),N(r,a),N(r,l),f&&f.m(l,null),d||(c=je(l,"click",e[5]),d=!0)},p(m,[t]){t&1&&Ae(i,m[0]),m[1]==="inner"?f?f.p(m,t):(f=on(m),f.c(),f.m(l,null)):f&&(f.d(1),f=null),t&8&&v(l,"aria-checked",m[3]),t&2&&u!==(u="toggle toggle--"+m[1]+" svelte-157h5as")&&v(r,"class",u)},i:ue,o:ue,d(m){m&&T(r),f&&f.d(),d=!1,c()}}}function Di(e,r,n){let{label:i}=r,{style:a="inner"}=r,{options:l=["on","off"]}=r,{value:u=l[0]}=r,d=u===l[0];const c=`toggle-${Math.floor(Math.random()*1e6)}`,f=m=>{const o=m.target.getAttribute("aria-checked");n(3,d=o!=="true"),n(6,u=d?l[0]:l[1])};return e.$$set=m=>{"label"in m&&n(0,i=m.label),"style"in m&&n(1,a=m.style),"options"in m&&n(2,l=m.options),"value"in m&&n(6,u=m.value)},[i,a,l,d,c,f,u]}class Fe extends pe{constructor(r){super(),ge(this,r,Di,Fi,de,{label:0,style:1,options:2,value:6})}}function ln(e,r,n){const i=e.slice();return i[26]=r[n],i[28]=n,i}function sn(e,r,n){const i=e.slice();return i[28]=r[n],i}function un(e,r,n){const i=e.slice();return i[28]=r[n],i}function fn(e){let r,n;return{c(){r=ye("path"),this.h()},l(i){r=be(i,"path",{fill:!0,d:!0}),j(r).forEach(T),this.h()},h(){v(r,"fill","gold"),v(r,"d",n=e[7]()),St(r,"transform","translate(50%, 50%)")},m(i,a){D(i,r,a)},p(i,a){a[0]&128&&n!==(n=i[7]())&&v(r,"d",n)},d(i){i&&T(r)}}}function cn(e){let r,n=Le(0,1,1/e[2]),i=[];for(let a=0;a<n.length;a+=1)i[a]=dn(un(e,n,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();r=ae()},l(a){for(let l=0;l<i.length;l+=1)i[l].l(a);r=ae()},m(a,l){for(let u=0;u<i.length;u+=1)i[u].m(a,l);D(a,r,l)},p(a,l){if(l[0]&8484){n=Le(0,1,1/a[2]);let u;for(u=0;u<n.length;u+=1){const d=un(a,n,u);i[u]?i[u].p(d,l):(i[u]=dn(d),i[u].c(),i[u].m(r.parentNode,r))}for(;u<i.length;u+=1)i[u].d(1);i.length=n.length}},d(a){Be(i,a),a&&T(r)}}}function dn(e){let r,n,i,a;return{c(){r=ye("line"),this.h()},l(l){r=be(l,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),j(r).forEach(T),this.h()},h(){v(r,"x1",n=e[8].width/2),v(r,"y1",we/2),v(r,"x2",i=e[8].width/2+e[13]*Math.cos(e[5](e[28]))),v(r,"y2",a=we/2+e[13]*Math.sin(e[5](e[28]))),v(r,"class","svelte-1vphjdi")},m(l,u){D(l,r,u)},p(l,u){u[0]&256&&n!==(n=l[8].width/2)&&v(r,"x1",n),u[0]&292&&i!==(i=l[8].width/2+l[13]*Math.cos(l[5](l[28])))&&v(r,"x2",i),u[0]&36&&a!==(a=we/2+l[13]*Math.sin(l[5](l[28])))&&v(r,"y2",a)},d(l){l&&T(r)}}}function _n(e){let r,n=Le(0,e[1],.25),i=[];for(let a=0;a<n.length;a+=1)i[a]=hn(sn(e,n,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();r=ae()},l(a){for(let l=0;l<i.length;l+=1)i[l].l(a);r=ae()},m(a,l){for(let u=0;u<i.length;u+=1)i[u].m(a,l);D(a,r,l)},p(a,l){if(l[0]&8482){n=Le(0,a[1],.25);let u;for(u=0;u<n.length;u+=1){const d=sn(a,n,u);i[u]?i[u].p(d,l):(i[u]=hn(d),i[u].c(),i[u].m(r.parentNode,r))}for(;u<i.length;u+=1)i[u].d(1);i.length=n.length}},d(a){Be(i,a),a&&T(r)}}}function hn(e){let r,n,i,a;return{c(){r=ye("line"),this.h()},l(l){r=be(l,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),j(r).forEach(T),this.h()},h(){v(r,"x1",n=e[8].width/2),v(r,"y1",we/2),v(r,"x2",i=e[8].width/2+e[13]*Math.cos(e[5](e[28]))),v(r,"y2",a=we/2+e[13]*Math.sin(e[5](e[28]))),v(r,"class","svelte-1vphjdi")},m(l,u){D(l,r,u)},p(l,u){u[0]&256&&n!==(n=l[8].width/2)&&v(r,"x1",n),u[0]&290&&i!==(i=l[8].width/2+l[13]*Math.cos(l[5](l[28])))&&v(r,"x2",i),u[0]&34&&a!==(a=we/2+l[13]*Math.sin(l[5](l[28])))&&v(r,"y2",a)},d(l){l&&T(r)}}}function mn(e){let r,n;return r=new Un({props:{id:e[26],i:e[28],data:e[0][e[26]]}}),{c(){U(r.$$.fragment)},l(i){z(r.$$.fragment,i)},m(i,a){ee(r,i,a),n=!0},p(i,a){const l={};a[0]&1&&(l.id=i[26]),a[0]&1&&(l.data=i[0][i[26]]),r.$set(l)},i(i){n||(W(r.$$.fragment,i),n=!0)},o(i){Z(r.$$.fragment,i),n=!1},d(i){te(r,i)}}}function pn(e){let r,n,i=Object.keys(e[0]),a=[];for(let u=0;u<i.length;u+=1)a[u]=mn(ln(e,i,u));const l=u=>Z(a[u],1,1,()=>{a[u]=null});return{c(){for(let u=0;u<a.length;u+=1)a[u].c();r=ae()},l(u){for(let d=0;d<a.length;d+=1)a[d].l(u);r=ae()},m(u,d){for(let c=0;c<a.length;c+=1)a[c].m(u,d);D(u,r,d),n=!0},p(u,d){if(d[0]&1){i=Object.keys(u[0]);let c;for(c=0;c<i.length;c+=1){const f=ln(u,i,c);a[c]?(a[c].p(f,d),W(a[c],1)):(a[c]=mn(f),a[c].c(),W(a[c],1),a[c].m(r.parentNode,r))}for(ft(),c=i.length;c<a.length;c+=1)l(c);ct()}},i(u){if(!n){for(let d=0;d<i.length;d+=1)W(a[d]);n=!0}},o(u){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)Z(a[d]);n=!1},d(u){Be(a,u),u&&T(r)}}}function Li(e){let r,n,i,a,l,u,d,c=e[0],f,m,t,o,s,_,p,g,h,y,w,S,P,I,F,L,E,q,M,R,b,A=e[3]==="on"&&fn(e),O=e[4]==="on"&&cn(e),H=e[6]==="on"&&_n(e),k=pn(e);function C(x){e[20](x)}let V={label:"Show grid",style:"inner"};e[6]!==void 0&&(V.value=e[6]),g=new Fe({props:V}),xe.push(()=>Me(g,"value",C));function ne(x){e[21](x)}let re={label:"Hi-hat",style:"inner"};e[10].hihat!==void 0&&(re.value=e[10].hihat),w=new Fe({props:re}),xe.push(()=>Me(w,"value",ne));function Ne(x){e[22](x)}let Oe={label:"Kick",style:"inner"};e[10].kick!==void 0&&(Oe.value=e[10].kick),I=new Fe({props:Oe}),xe.push(()=>Me(I,"value",Ne));function Ce(x){e[23](x)}let le={label:"Snare",style:"inner"};return e[10].snare!==void 0&&(le.value=e[10].snare),E=new Fe({props:le}),xe.push(()=>Me(E,"value",Ce)),{c(){r=ye("svg"),n=ye("circle"),A&&A.c(),i=ae(),O&&O.c(),a=ae(),H&&H.c(),l=ye("line"),k.c(),f=Y(),m=$("button"),t=X("play"),o=Y(),s=$("button"),_=X("pause"),p=Y(),U(g.$$.fragment),y=Y(),U(w.$$.fragment),P=Y(),U(I.$$.fragment),L=Y(),U(E.$$.fragment),this.h()},l(x){r=be(x,"svg",{width:!0,height:!0,class:!0});var G=j(r);n=be(G,"circle",{id:!0,r:!0,cx:!0,cy:!0,class:!0}),j(n).forEach(T),A&&A.l(G),i=ae(),O&&O.l(G),a=ae(),H&&H.l(G),l=be(G,"line",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),j(l).forEach(T),k.l(G),G.forEach(T),f=K(x),m=B(x,"BUTTON",{});var _e=j(m);t=Q(_e,"play"),_e.forEach(T),o=K(x),s=B(x,"BUTTON",{});var he=j(s);_=Q(he,"pause"),he.forEach(T),p=K(x),z(g.$$.fragment,x),y=K(x),z(w.$$.fragment,x),P=K(x),z(I.$$.fragment,x),L=K(x),z(E.$$.fragment,x),this.h()},h(){v(n,"id","outer"),v(n,"r",e[13]),v(n,"cx","50%"),v(n,"cy","50%"),v(n,"class","svelte-1vphjdi"),v(l,"id","marker"),v(l,"x1",0),v(l,"y1",0),v(l,"x2",u=e[14](e[5](e[9]))),v(l,"y2",d=e[15](e[5](e[9]))),v(l,"class","svelte-1vphjdi"),St(l,"transform","translate(50%, 50%)"),v(r,"width","100%"),v(r,"height",we),v(r,"class","svelte-1vphjdi")},m(x,G){D(x,r,G),N(r,n),A&&A.m(r,null),N(r,i),O&&O.m(r,null),N(r,a),H&&H.m(r,null),N(r,l),k.m(r,null),D(x,f,G),D(x,m,G),N(m,t),D(x,o,G),D(x,s,G),N(s,_),D(x,p,G),ee(g,x,G),D(x,y,G),ee(w,x,G),D(x,P,G),ee(I,x,G),D(x,L,G),ee(E,x,G),M=!0,R||(b=[je(m,"click",e[17]),je(s,"click",e[16])],R=!0)},p(x,G){x[3]==="on"?A?A.p(x,G):(A=fn(x),A.c(),A.m(r,i)):A&&(A.d(1),A=null),x[4]==="on"?O?O.p(x,G):(O=cn(x),O.c(),O.m(r,a)):O&&(O.d(1),O=null),x[6]==="on"?H?H.p(x,G):(H=_n(x),H.c(),H.m(r,l)):H&&(H.d(1),H=null),(!M||G[0]&544&&u!==(u=x[14](x[5](x[9]))))&&v(l,"x2",u),(!M||G[0]&544&&d!==(d=x[15](x[5](x[9]))))&&v(l,"y2",d),G[0]&1&&de(c,c=x[0])?(ft(),Z(k,1,1,ue),ct(),k=pn(x),k.c(),W(k,1),k.m(r,null)):k.p(x,G);const _e={};!h&&G[0]&64&&(h=!0,_e.value=x[6],Se(()=>h=!1)),g.$set(_e);const he={};!S&&G[0]&1024&&(S=!0,he.value=x[10].hihat,Se(()=>S=!1)),w.$set(he);const Ge={};!F&&G[0]&1024&&(F=!0,Ge.value=x[10].kick,Se(()=>F=!1)),I.$set(Ge);const qe={};!q&&G[0]&1024&&(q=!0,qe.value=x[10].snare,Se(()=>q=!1)),E.$set(qe)},i(x){M||(W(k),W(g.$$.fragment,x),W(w.$$.fragment,x),W(I.$$.fragment,x),W(E.$$.fragment,x),M=!0)},o(x){Z(k),Z(g.$$.fragment,x),Z(w.$$.fragment,x),Z(I.$$.fragment,x),Z(E.$$.fragment,x),M=!1},d(x){x&&T(r),A&&A.d(),O&&O.d(),H&&H.d(),k.d(x),x&&T(f),x&&T(m),x&&T(o),x&&T(s),x&&T(p),te(g,x),x&&T(y),te(w,x),x&&T(P),te(I,x),x&&T(L),te(E,x),R=!1,Tn(b)}}}const we=500,gn=0;function $i(e,r,n){let i,a,l,u,d,c,f;Ee(e,gr,b=>n(8,d=b));let{data:m}=r,{beatsPerRotation:t}=r,{division:o}=r,{bpm:s}=r,{showPercentage:_}=r,{showDivisions:p}=r;gt("song",{beatsPerRotation:t,division:o,getT:()=>w,getAngleScale:()=>u,getInstrumentToggles:()=>h,getCycleDuration:()=>l});let g;const h=xn({hihat:"on",snare:"on",kick:"on"});Ee(e,h,b=>n(10,f=b));let y="off";const w=Mn(0);Ee(e,w,b=>n(9,c=b));const S=we/2-100,P=b=>S*Math.cos(b),I=b=>S*Math.sin(b),F=()=>{clearInterval(g),w.set(i,{duration:0})},L=()=>{w.set(gn,{duration:0}),w.set(i,{duration:l}),g=setInterval(()=>{w.set(gn,{duration:0}),w.set(i,{duration:l})},l)};$n(()=>{clearInterval(g)});function E(b){y=b,n(6,y)}function q(b){e.$$.not_equal(f.hihat,b)&&(f.hihat=b,h.set(f))}function M(b){e.$$.not_equal(f.kick,b)&&(f.kick=b,h.set(f))}function R(b){e.$$.not_equal(f.snare,b)&&(f.snare=b,h.set(f))}return e.$$set=b=>{"data"in b&&n(0,m=b.data),"beatsPerRotation"in b&&n(1,t=b.beatsPerRotation),"division"in b&&n(2,o=b.division),"bpm"in b&&n(18,s=b.bpm),"showPercentage"in b&&n(3,_=b.showPercentage),"showDivisions"in b&&n(4,p=b.showDivisions)},e.$$.update=()=>{e.$$.dirty[0]&2&&n(19,i=t),e.$$.dirty[0]&524288&&n(5,u=Ot().domain([0,i]).range([-Math.PI/2,3/2*Math.PI])),e.$$.dirty[0]&33&&n(7,a=Hi().innerRadius(0).outerRadius(S).startAngle(u(m.hihat[0])+Math.PI/2).endAngle(u(m.hihat[1])+Math.PI/2)),e.$$.dirty[0]&262146&&(l=6e4*t/s)},[m,t,o,_,p,u,y,a,d,c,f,h,w,S,P,I,F,L,s,i,E,q,M,R]}class Mt extends pe{constructor(r){super(),ge(this,r,$i,Li,de,{data:0,beatsPerRotation:1,division:2,bpm:18,showPercentage:3,showDivisions:4},null,[-1,-1])}}function vn(e,r,n){const i=e.slice();return i[10]=r[n],i}function yn(e){let r,n=st(`.${e[6]}f`)(e[10])+"",i;return{c(){r=$("span"),i=X(n),this.h()},l(a){r=B(a,"SPAN",{class:!0});var l=j(r);i=Q(l,n),l.forEach(T),this.h()},h(){v(r,"class","tick svelte-q7ecsm")},m(a,l){D(a,r,l),N(r,i)},p(a,l){l&65&&n!==(n=st(`.${a[6]}f`)(a[10])+"")&&Ae(i,n)},d(a){a&&T(r)}}}function Bi(e){let r,n,i,a,l,u,d=e[0],c=[];for(let f=0;f<d.length;f+=1)c[f]=yn(vn(e,d,f));return{c(){r=$("div"),n=$("div");for(let f=0;f<c.length;f+=1)c[f].c();i=Y(),a=$("input"),this.h()},l(f){r=B(f,"DIV",{class:!0});var m=j(r);n=B(m,"DIV",{class:!0});var t=j(n);for(let o=0;o<c.length;o+=1)c[o].l(t);t.forEach(T),i=K(m),a=B(m,"INPUT",{type:!0,"aria-label":!0,min:!0,max:!0,step:!0,class:!0}),m.forEach(T),this.h()},h(){v(n,"class","ticks svelte-q7ecsm"),v(a,"type","range"),v(a,"aria-label",e[5]),v(a,"min",e[2]),v(a,"max",e[3]),v(a,"step",e[4]),v(a,"class","svelte-q7ecsm"),v(r,"class","range svelte-q7ecsm")},m(f,m){D(f,r,m),N(r,n);for(let t=0;t<c.length;t+=1)c[t].m(n,null);N(r,i),N(r,a),Ht(a,e[1]),l||(u=[je(a,"change",e[8]),je(a,"input",e[8])],l=!0)},p(f,[m]){if(m&65){d=f[0];let t;for(t=0;t<d.length;t+=1){const o=vn(f,d,t);c[t]?c[t].p(o,m):(c[t]=yn(o),c[t].c(),c[t].m(n,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=d.length}m&32&&v(a,"aria-label",f[5]),m&4&&v(a,"min",f[2]),m&8&&v(a,"max",f[3]),m&16&&v(a,"step",f[4]),m&2&&Ht(a,f[1])},i:ue,o:ue,d(f){f&&T(r),Be(c,f),l=!1,Tn(u)}}}function Ci(e,r,n){let i,{min:a=0}=r,{max:l=100}=r,{step:u=1}=r,{showTicks:d=!1}=r,{value:c=a}=r,{label:f=""}=r,{ticks:m}=r;const t=s=>Math.floor(s)===s?0:s.toString().split(".")[1].length||0;function o(){c=Bn(this.value),n(1,c)}return e.$$set=s=>{"min"in s&&n(2,a=s.min),"max"in s&&n(3,l=s.max),"step"in s&&n(4,u=s.step),"showTicks"in s&&n(7,d=s.showTicks),"value"in s&&n(1,c=s.value),"label"in s&&n(5,f=s.label),"ticks"in s&&n(0,m=s.ticks)},e.$$.update=()=>{e.$$.dirty&16&&n(6,i=t(u)),e.$$.dirty&157&&n(0,m=m||(d?Le(a,l+u,u):[]))},[m,c,a,l,u,f,i,d,o]}class Gi extends pe{constructor(r){super(),ge(this,r,Ci,Bi,de,{min:2,max:3,step:4,showTicks:7,value:1,label:5,ticks:0})}}function qi(e){let r,n,i,a,l;return{c(){r=$("p"),n=X("This rhythm is "),i=$("strong"),a=X("swung"),l=X(`. Swing means that there's a long-short
		pattern, so the first note takes up more space than the second.`)},l(u){r=B(u,"P",{});var d=j(r);n=Q(d,"This rhythm is "),i=B(d,"STRONG",{});var c=j(i);a=Q(c,"swung"),c.forEach(T),l=Q(d,`. Swing means that there's a long-short
		pattern, so the first note takes up more space than the second.`),d.forEach(T)},m(u,d){D(u,r,d),N(r,n),N(r,i),N(i,a),N(r,l)},d(u){u&&T(r)}}}function ji(e){let r,n,i,a,l;return{c(){r=$("p"),n=X("This rhythm is completely "),i=$("strong"),a=X("straight"),l=X(`. Each beat is equally
		spaced apart.`)},l(u){r=B(u,"P",{});var d=j(r);n=Q(d,"This rhythm is completely "),i=B(d,"STRONG",{});var c=j(i);a=Q(c,"straight"),c.forEach(T),l=Q(d,`. Each beat is equally
		spaced apart.`),d.forEach(T)},m(u,d){D(u,r,d),N(r,n),N(r,i),N(i,a),N(r,l)},d(u){u&&T(r)}}}function bn(e){let r,n,i,a=e[3][e[0]]+"",l,u,d,c=e[5][e[0]]+"",f,m,t,o,s,_;function p(h){e[8](h)}let g={label:"Show divisions",style:"inner"};return e[2]!==void 0&&(g.value=e[2]),o=new Fe({props:g}),xe.push(()=>Me(o,"value",p)),{c(){r=$("p"),n=X("It's called a "),i=$("strong"),l=X(a),u=X(" swing"),d=X(` because the beat is
		divided into `),f=X(c),m=X(` parts. Since we're dividing the beat into an
		odd number of parts, it will be uneven and have this slightly off-kilter feeling.`),t=Y(),U(o.$$.fragment)},l(h){r=B(h,"P",{});var y=j(r);n=Q(y,"It's called a "),i=B(y,"STRONG",{});var w=j(i);l=Q(w,a),u=Q(w," swing"),w.forEach(T),d=Q(y,` because the beat is
		divided into `),f=Q(y,c),m=Q(y,` parts. Since we're dividing the beat into an
		odd number of parts, it will be uneven and have this slightly off-kilter feeling.`),y.forEach(T),t=K(h),z(o.$$.fragment,h)},m(h,y){D(h,r,y),N(r,n),N(r,i),N(i,l),N(i,u),N(r,d),N(r,f),N(r,m),D(h,t,y),ee(o,h,y),_=!0},p(h,y){(!_||y&1)&&a!==(a=h[3][h[0]]+"")&&Ae(l,a),(!_||y&1)&&c!==(c=h[5][h[0]]+"")&&Ae(f,c);const w={};!s&&y&4&&(s=!0,w.value=h[2],Se(()=>s=!1)),o.$set(w)},i(h){_||(W(o.$$.fragment,h),_=!0)},o(h){Z(o.$$.fragment,h),_=!1},d(h){h&&T(r),h&&T(t),te(o,h)}}}function Vi(e){let r,n,i,a=e[3][e[0]]+"",l,u,d,c,f,m,t,o,s,_,p=(e[4][e[0]].hihat[1]*100).toFixed(1)+"",g,h,y,w,S,P,I,F,L;r=new Mt({props:{data:e[4][e[0]],beatsPerRotation:1,division:e[5][e[0]],bpm:60,showPercentage:e[1],showDivisions:e[2]}});function E(k){e[6](k)}let q={min:0,max:e[3].length-1,step:1,showTicks:!0,ticks:[50,57,60,66]};e[0]!==void 0&&(q.value=e[0]),c=new Gi({props:q}),xe.push(()=>Me(c,"value",E));function M(k,C){return k[0]===0?ji:qi}let R=M(e),b=R(e);function A(k){e[7](k)}let O={label:"Show percentage",style:"inner"};e[1]!==void 0&&(O.value=e[1]),S=new Fe({props:O}),xe.push(()=>Me(S,"value",A));let H=e[0]!==0&&bn(e);return{c(){U(r.$$.fragment),n=Y(),i=$("h2"),l=X(a),u=Y(),d=$("div"),U(c.$$.fragment),m=Y(),b.c(),t=Y(),o=$("p"),s=X("In this case, the first beat takes up "),_=$("strong"),g=X(p),h=X("%"),y=X(" of the beat."),w=Y(),U(S.$$.fragment),I=Y(),H&&H.c(),F=ae(),this.h()},l(k){z(r.$$.fragment,k),n=K(k),i=B(k,"H2",{});var C=j(i);l=Q(C,a),C.forEach(T),u=K(k),d=B(k,"DIV",{style:!0});var V=j(d);z(c.$$.fragment,V),V.forEach(T),m=K(k),b.l(k),t=K(k),o=B(k,"P",{});var ne=j(o);s=Q(ne,"In this case, the first beat takes up "),_=B(ne,"STRONG",{});var re=j(_);g=Q(re,p),h=Q(re,"%"),re.forEach(T),y=Q(ne," of the beat."),ne.forEach(T),w=K(k),z(S.$$.fragment,k),I=K(k),H&&H.l(k),F=ae(),this.h()},h(){St(d,"width","50%")},m(k,C){ee(r,k,C),D(k,n,C),D(k,i,C),N(i,l),D(k,u,C),D(k,d,C),ee(c,d,null),D(k,m,C),b.m(k,C),D(k,t,C),D(k,o,C),N(o,s),N(o,_),N(_,g),N(_,h),N(o,y),D(k,w,C),ee(S,k,C),D(k,I,C),H&&H.m(k,C),D(k,F,C),L=!0},p(k,[C]){const V={};C&1&&(V.data=k[4][k[0]]),C&1&&(V.division=k[5][k[0]]),C&2&&(V.showPercentage=k[1]),C&4&&(V.showDivisions=k[2]),r.$set(V),(!L||C&1)&&a!==(a=k[3][k[0]]+"")&&Ae(l,a);const ne={};!f&&C&1&&(f=!0,ne.value=k[0],Se(()=>f=!1)),c.$set(ne),R!==(R=M(k))&&(b.d(1),b=R(k),b&&(b.c(),b.m(t.parentNode,t))),(!L||C&1)&&p!==(p=(k[4][k[0]].hihat[1]*100).toFixed(1)+"")&&Ae(g,p);const re={};!P&&C&2&&(P=!0,re.value=k[1],Se(()=>P=!1)),S.$set(re),k[0]!==0?H?(H.p(k,C),C&1&&W(H,1)):(H=bn(k),H.c(),W(H,1),H.m(F.parentNode,F)):H&&(ft(),Z(H,1,1,()=>{H=null}),ct())},i(k){L||(W(r.$$.fragment,k),W(c.$$.fragment,k),W(S.$$.fragment,k),W(H),L=!0)},o(k){Z(r.$$.fragment,k),Z(c.$$.fragment,k),Z(S.$$.fragment,k),Z(H),L=!1},d(k){te(r,k),k&&T(n),k&&T(i),k&&T(u),k&&T(d),te(c),k&&T(m),b.d(k),k&&T(t),k&&T(o),k&&T(w),te(S,k),k&&T(I),H&&H.d(k),k&&T(F)}}}function Wi(e,r,n){let i=0,a=["straight","septuplet swing","quintuplet swing","triplet swing"],l=!1,u=!1;const d=h=>[0,h],c={hihat:d(.5)},f={hihat:d(2/3)},m={hihat:d(3/5)},t={hihat:d(4/7)},o=[c,t,m,f],s=[2,7,5,3];function _(h){i=h,n(0,i)}function p(h){l=h,n(1,l)}function g(h){u=h,n(2,u)}return[i,l,u,a,o,s,_,p,g]}class Xi extends pe{constructor(r){super(),ge(this,r,Wi,Vi,de,{})}}const Qi={keySignatures:[{key:"C",scale:"major",ticks:0}],meta:[],name:"Drums",ppq:480,tempos:[{bpm:120,ticks:0},{bpm:120,ticks:1920},{bpm:120,ticks:3840}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}]},Zi=[{channel:0,controlChanges:{},pitchBends:[],instrument:{family:"piano",number:0,name:"acoustic grand piano"},name:"Drums",notes:[{duration:.221875,durationTicks:213,midi:36,name:"C2",ticks:0,time:0,velocity:.7716535433070866},{duration:.10520833333333333,durationTicks:101,midi:42,name:"F#2",ticks:0,time:0,velocity:.7716535433070866},{duration:.06874999999999998,durationTicks:66,midi:42,name:"F#2",ticks:240,time:.25,velocity:.7716535433070866},{duration:.09583333333333333,durationTicks:92,midi:42,name:"F#2",ticks:360,time:.375,velocity:.7716535433070866},{duration:.09166666666666667,durationTicks:88,midi:38,name:"D2",ticks:678,time:.70625,velocity:.7716535433070866},{duration:.10520833333333335,durationTicks:101,midi:42,name:"F#2",ticks:680,time:.7083333333333334,velocity:.7716535433070866},{duration:.06874999999999998,durationTicks:66,midi:42,name:"F#2",ticks:920,time:.9583333333333334,velocity:.7716535433070866},{duration:.09583333333333344,durationTicks:92,midi:42,name:"F#2",ticks:1040,time:1.0833333333333333,velocity:.7716535433070866},{duration:.12291666666666679,durationTicks:118,midi:36,name:"C2",ticks:1280,time:1.3333333333333333,velocity:.7716535433070866},{duration:.10520833333333335,durationTicks:101,midi:42,name:"F#2",ticks:1320,time:1.375,velocity:.7716535433070866},{duration:.06875000000000009,durationTicks:66,midi:42,name:"F#2",ticks:1560,time:1.625,velocity:.7716535433070866},{duration:.09583333333333344,durationTicks:92,midi:42,name:"F#2",ticks:1680,time:1.75,velocity:.7716535433070866},{duration:.10000000000000009,durationTicks:96,midi:38,name:"D2",ticks:1996,time:2.0791666666666666,velocity:.7716535433070866},{duration:.10520833333333313,durationTicks:101,midi:42,name:"F#2",ticks:2e3,time:2.0833333333333335,velocity:.7716535433070866},{duration:.06875000000000009,durationTicks:66,midi:42,name:"F#2",ticks:2240,time:2.3333333333333335,velocity:.7716535433070866},{duration:.09583333333333321,durationTicks:92,midi:42,name:"F#2",ticks:2360,time:2.4583333333333335,velocity:.7716535433070866},{duration:.10000000000000009,durationTicks:96,midi:36,name:"C2",ticks:2708,time:2.8208333333333333,velocity:.7716535433070866},{duration:.10520833333333357,durationTicks:101,midi:42,name:"F#2",ticks:2740,time:2.8541666666666665,velocity:.7716535433070866},{duration:.11875000000000036,durationTicks:114,midi:38,name:"D2",ticks:2945,time:3.067708333333333,velocity:.7716535433070866},{duration:.06875000000000009,durationTicks:66,midi:42,name:"F#2",ticks:3e3,time:3.125,velocity:.7716535433070866},{duration:.09583333333333321,durationTicks:92,midi:42,name:"F#2",ticks:3187,time:3.3197916666666667,velocity:.7716535433070866}],endOfTrackTicks:3840}],wn={header:Qi,tracks:Zi};function Yi(e){let r,n,i,a,l,u,d,c,f,m,t,o;return r=new Xi({}),u=new Mt({props:{data:e[0],beatsPerRotation:4,division:5,bpm:100}}),t=new Mt({props:{data:e[1],beatsPerRotation:5,division:7,bpm:100}}),{c(){U(r.$$.fragment),n=Y(),i=$("h3"),a=X("Quintuplet swing"),l=Y(),U(u.$$.fragment),d=Y(),c=$("h3"),f=X("With the love of my heart - Jacob Collier"),m=Y(),U(t.$$.fragment)},l(s){z(r.$$.fragment,s),n=K(s),i=B(s,"H3",{});var _=j(i);a=Q(_,"Quintuplet swing"),_.forEach(T),l=K(s),z(u.$$.fragment,s),d=K(s),c=B(s,"H3",{});var p=j(c);f=Q(p,"With the love of my heart - Jacob Collier"),p.forEach(T),m=K(s),z(t.$$.fragment,s)},m(s,_){ee(r,s,_),D(s,n,_),D(s,i,_),N(i,a),D(s,l,_),ee(u,s,_),D(s,d,_),D(s,c,_),N(c,f),D(s,m,_),ee(t,s,_),o=!0},p:ue,i(s){o||(W(r.$$.fragment,s),W(u.$$.fragment,s),W(t.$$.fragment,s),o=!0)},o(s){Z(r.$$.fragment,s),Z(u.$$.fragment,s),Z(t.$$.fragment,s),o=!1},d(s){te(r,s),s&&T(n),s&&T(i),s&&T(l),te(u,s),s&&T(d),s&&T(c),s&&T(m),te(t,s)}}}function Ki(e){const n={hihat:((u,d)=>Le(d).map(c=>[c,c+u]).flat())(.6,4),snare:[.95,2.95],kick:[0,2]},i=Ot().domain(kr(wn.tracks[0].notes.map(u=>u.ticks))).range([0,5]),a=wn.tracks[0].notes.map(u=>({beat:i(u.ticks),instrument:u.midi})),l={hihat:a.filter(u=>u.instrument===42).map(u=>u.beat),snare:a.filter(u=>u.instrument===38).map(u=>u.beat),kick:a.filter(u=>u.instrument===36).map(u=>u.beat)};return[n,l]}class Ji extends pe{constructor(r){super(),ge(this,r,Ki,Yi,de,{})}}const Ui="The math and the magic of wonky grooves",zi="Visualizing wonky grooves",ea="By <a href=https://pudding.cool/author/michelle-mcghee/ target=_blank>Michelle McGhee</a>",An={hed:Ui,dek:zi,byline:ea};function ta(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.1.0"),console.log("build: 2023-03-06-18:52"),console.log("--- --- --- --- --- ---")}function na(e){let r,n,i,a;return r=new Vn({props:{title:e[1],description:e[2],url:e[3],preloadFont:e[0],keywords:e[4]}}),i=new Ji({}),{c(){U(r.$$.fragment),n=Y(),U(i.$$.fragment)},l(l){z(r.$$.fragment,l),n=K(l),z(i.$$.fragment,l)},m(l,u){ee(r,l,u),D(l,n,u),ee(i,l,u),a=!0},p:ue,i(l){a||(W(r.$$.fragment,l),W(i.$$.fragment,l),a=!0)},o(l){Z(r.$$.fragment,l),Z(i.$$.fragment,l),a=!1},d(l){te(r,l),l&&T(n),te(i,l)}}}function ra(e,r,n){let{data:i}=r;ta();const a=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2","https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2"],{title:l,description:u,url:d,keywords:c}=An;return gt("copy",An),gt("data",i.data),e.$$set=f=>{"data"in f&&n(5,i=f.data)},[a,l,u,d,c,i]}class la extends pe{constructor(r){super(),ge(this,r,ra,na,de,{data:5})}}export{la as default};

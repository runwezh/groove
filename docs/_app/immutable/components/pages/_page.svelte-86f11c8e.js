import{S as Z,i as K,s as $,k as S,e as ue,J as Zt,l as I,h as w,n as y,D as E,C as ce,K as Le,b as N,a as Y,m as D,c as Q,L as Ce,M as nt,N as he,q as de,r as fe,u as Ke,O as Kt,P as $t,Q as z,p as V,R as Ie,T as $e,I as ee,f as L,g as Ee,t as R,d as Fe,U as Jt,V as Dt,x as ie,y as re,z as ae,A as oe,W as zt,X as qe,Y as Ut,Z as je,v as en,_ as tn,$ as nn}from"../../chunks/index-2836dcde.js";import{d as rn,I as it}from"../../chunks/transform-f56d011b.js";import{w as Te}from"../../chunks/index-2141e6b4.js";function rt(t,i,n){const r=t.slice();return r[5]=i[n],r}function at(t){let i,n;return{c(){i=S("link"),this.h()},l(r){i=I(r,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){y(i,"rel","preload"),y(i,"href",n=t[5]),y(i,"as","font"),y(i,"type","font/woff2"),y(i,"crossorigin","")},m(r,o){N(r,i,o)},p(r,o){o&16&&n!==(n=r[5])&&y(i,"href",n)},d(r){r&&w(i)}}}function an(t){let i,n,r,o,l,u,m,f,d,g,e,a,s,c,_,p,h,v,k,F,T,B,O,P,b,q;document.title=i=t[0];let x=t[4],G=[];for(let M=0;M<x.length;M+=1)G[M]=at(rt(t,x,M));return{c(){n=S("meta"),r=S("meta"),o=S("meta"),l=S("meta"),u=S("meta"),m=S("meta"),f=S("meta"),d=S("meta"),g=S("meta"),e=S("meta"),s=S("meta"),c=S("meta"),_=S("meta"),p=S("meta"),h=S("meta"),v=S("meta"),k=S("meta"),F=S("meta"),T=S("meta"),O=S("meta"),P=S("link");for(let M=0;M<G.length;M+=1)G[M].c();q=ue(),this.h()},l(M){const A=Zt("svelte-1htu80s",document.head);n=I(A,"META",{name:!0,content:!0}),r=I(A,"META",{name:!0,content:!0}),o=I(A,"META",{name:!0,content:!0}),l=I(A,"META",{property:!0,content:!0}),u=I(A,"META",{property:!0,content:!0}),m=I(A,"META",{property:!0,content:!0}),f=I(A,"META",{property:!0,content:!0}),d=I(A,"META",{property:!0,content:!0}),g=I(A,"META",{property:!0,content:!0}),e=I(A,"META",{property:!0,content:!0}),s=I(A,"META",{property:!0,content:!0}),c=I(A,"META",{property:!0,content:!0}),_=I(A,"META",{property:!0,content:!0}),p=I(A,"META",{name:!0,content:!0}),h=I(A,"META",{name:!0,content:!0}),v=I(A,"META",{name:!0,content:!0}),k=I(A,"META",{name:!0,content:!0}),F=I(A,"META",{name:!0,content:!0}),T=I(A,"META",{name:!0,content:!0}),O=I(A,"META",{name:!0,content:!0}),P=I(A,"LINK",{rel:!0,href:!0});for(let H=0;H<G.length;H+=1)G[H].l(A);q=ue(),A.forEach(w),this.h()},h(){y(n,"name","description"),y(n,"content",t[1]),y(r,"name","author"),y(r,"content","The Pudding"),y(o,"name","news_keywords"),y(o,"content",t[3]),y(l,"property","og:title"),y(l,"content",t[0]),y(u,"property","og:site_name"),y(u,"content","The Pudding"),y(m,"property","og:url"),y(m,"content",t[2]),y(f,"property","og:description"),y(f,"content",t[1]),y(d,"property","og:type"),y(d,"content","article"),y(g,"property","og:locale"),y(g,"content","en_US"),y(e,"property","og:image"),y(e,"content",a=t[2]+"/assets/social-facebook.jpg"),y(s,"property","og:image:type"),y(s,"content","image/jpeg"),y(c,"property","og:image:width"),y(c,"content","1200"),y(_,"property","og:image:height"),y(_,"content","600"),y(p,"name","twitter:card"),y(p,"content","summary_large_image"),y(h,"name","twitter:site"),y(h,"content","https://pudding.cool"),y(v,"name","twitter:creator"),y(v,"content","@puddingviz"),y(k,"name","twitter:title"),y(k,"content",t[0]),y(F,"name","twitter:description"),y(F,"content",t[1]),y(T,"name","twitter:image:src"),y(T,"content",B=t[2]+"/assets/social-twitter.jpg"),y(O,"name","robots"),y(O,"content","max-image-preview:large"),y(P,"rel","canonical"),y(P,"href",b=t[2]+"/")},m(M,A){E(document.head,n),E(document.head,r),E(document.head,o),E(document.head,l),E(document.head,u),E(document.head,m),E(document.head,f),E(document.head,d),E(document.head,g),E(document.head,e),E(document.head,s),E(document.head,c),E(document.head,_),E(document.head,p),E(document.head,h),E(document.head,v),E(document.head,k),E(document.head,F),E(document.head,T),E(document.head,O),E(document.head,P);for(let H=0;H<G.length;H+=1)G[H].m(document.head,null);E(document.head,q)},p(M,[A]){if(A&1&&i!==(i=M[0])&&(document.title=i),A&2&&y(n,"content",M[1]),A&8&&y(o,"content",M[3]),A&1&&y(l,"content",M[0]),A&4&&y(m,"content",M[2]),A&2&&y(f,"content",M[1]),A&4&&a!==(a=M[2]+"/assets/social-facebook.jpg")&&y(e,"content",a),A&1&&y(k,"content",M[0]),A&2&&y(F,"content",M[1]),A&4&&B!==(B=M[2]+"/assets/social-twitter.jpg")&&y(T,"content",B),A&4&&b!==(b=M[2]+"/")&&y(P,"href",b),A&16){x=M[4];let H;for(H=0;H<x.length;H+=1){const J=rt(M,x,H);G[H]?G[H].p(J,A):(G[H]=at(J),G[H].c(),G[H].m(q.parentNode,q))}for(;H<G.length;H+=1)G[H].d(1);G.length=x.length}},i:ce,o:ce,d(M){w(n),w(r),w(o),w(l),w(u),w(m),w(f),w(d),w(g),w(e),w(s),w(c),w(_),w(p),w(h),w(v),w(k),w(F),w(T),w(O),w(P),Le(G,M),w(q)}}}function on(t,i,n){let{title:r="Title TK"}=i,{description:o="Description TK"}=i,{url:l="https://pudding.cool"}=i,{keywords:u=""}=i,{preloadFont:m=[]}=i;return t.$$set=f=>{"title"in f&&n(0,r=f.title),"description"in f&&n(1,o=f.description),"url"in f&&n(2,l=f.url),"keywords"in f&&n(3,u=f.keywords),"preloadFont"in f&&n(4,m=f.preloadFont)},[r,o,l,u,m]}class sn extends Z{constructor(i){super(),K(this,i,on,an,$,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function ot(t,i,n){const r=t.slice();return r[6]=i[n],r}function st(t){let i,n;return{c(){i=S("label"),n=de(t[2]),this.h()},l(r){i=I(r,"LABEL",{for:!0,class:!0});var o=D(i);n=fe(o,t[2]),o.forEach(w),this.h()},h(){y(i,"for",t[4]),y(i,"class","svelte-u4o027")},m(r,o){N(r,i,o),E(i,n)},p(r,o){o&4&&Ke(n,r[2])},d(r){r&&w(i)}}}function lt(t){let i,n=(t[6].label||t[6].value)+"",r,o;return{c(){i=S("option"),r=de(n),this.h()},l(l){i=I(l,"OPTION",{});var u=D(i);r=fe(u,n),u.forEach(w),this.h()},h(){i.__value=o=t[6].label||t[6].value,i.value=i.__value},m(l,u){N(l,i,u),E(i,r)},p(l,u){u&2&&n!==(n=(l[6].label||l[6].value)+"")&&Ke(r,n),u&2&&o!==(o=l[6].label||l[6].value)&&(i.__value=o,i.value=i.__value)},d(l){l&&w(i)}}}function ln(t){let i,n,r,o,l,u=t[2]&&st(t),m=t[1],f=[];for(let d=0;d<m.length;d+=1)f[d]=lt(ot(t,m,d));return{c(){i=S("div"),u&&u.c(),n=Y(),r=S("select");for(let d=0;d<f.length;d+=1)f[d].c();this.h()},l(d){i=I(d,"DIV",{class:!0});var g=D(i);u&&u.l(g),n=Q(g),r=I(g,"SELECT",{id:!0,class:!0});var e=D(r);for(let a=0;a<f.length;a+=1)f[a].l(e);e.forEach(w),g.forEach(w),this.h()},h(){y(r,"id",t[4]),r.disabled=t[3],y(r,"class","svelte-u4o027"),t[0]===void 0&&Ce(()=>t[5].call(r)),y(i,"class","select svelte-u4o027")},m(d,g){N(d,i,g),u&&u.m(i,null),E(i,n),E(i,r);for(let e=0;e<f.length;e+=1)f[e].m(r,null);nt(r,t[0]),o||(l=he(r,"change",t[5]),o=!0)},p(d,[g]){if(d[2]?u?u.p(d,g):(u=st(d),u.c(),u.m(i,n)):u&&(u.d(1),u=null),g&2){m=d[1];let e;for(e=0;e<m.length;e+=1){const a=ot(d,m,e);f[e]?f[e].p(a,g):(f[e]=lt(a),f[e].c(),f[e].m(r,null))}for(;e<f.length;e+=1)f[e].d(1);f.length=m.length}g&8&&(r.disabled=d[3]),g&3&&nt(r,d[0])},i:ce,o:ce,d(d){d&&w(i),u&&u.d(),Le(f,d),o=!1,l()}}}function un(t,i,n){let{options:r=[]}=i,{label:o=""}=i,{disabled:l=!1}=i,{value:u=r.length?r[0].value:""}=i;const m=`select-${Math.floor(Math.random()*1e6)}`;function f(){u=Kt(this),n(0,u),n(1,r)}return t.$$set=d=>{"options"in d&&n(1,r=d.options),"label"in d&&n(2,o=d.label),"disabled"in d&&n(3,l=d.disabled),"value"in d&&n(0,u=d.value)},[u,r,o,l,m,f]}class cn extends Z{constructor(i){super(),K(this,i,un,ln,$,{options:1,label:2,disabled:3,value:0})}}var _e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},te={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var i=function(){this.init()};i.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var a=this||n;if(e=parseFloat(e),a.ctx||g(),typeof e<"u"&&e>=0&&e<=1){if(a._volume=e,a._muted)return a;a.usingWebAudio&&a.masterGain.gain.setValueAtTime(e,n.ctx.currentTime);for(var s=0;s<a._howls.length;s++)if(!a._howls[s]._webAudio)for(var c=a._howls[s]._getSoundIds(),_=0;_<c.length;_++){var p=a._howls[s]._soundById(c[_]);p&&p._node&&(p._node.volume=p._volume*e)}return a}return a._volume},mute:function(e){var a=this||n;a.ctx||g(),a._muted=e,a.usingWebAudio&&a.masterGain.gain.setValueAtTime(e?0:a._volume,n.ctx.currentTime);for(var s=0;s<a._howls.length;s++)if(!a._howls[s]._webAudio)for(var c=a._howls[s]._getSoundIds(),_=0;_<c.length;_++){var p=a._howls[s]._soundById(c[_]);p&&p._node&&(p._node.muted=e?!0:p._muted)}return a},stop:function(){for(var e=this||n,a=0;a<e._howls.length;a++)e._howls[a].stop();return e},unload:function(){for(var e=this||n,a=e._howls.length-1;a>=0;a--)e._howls[a].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,g()),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var a=new Audio;typeof a.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var a=new Audio;a.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||n,a=null;try{a=typeof Audio<"u"?new Audio:null}catch{return e}if(!a||typeof a.canPlayType!="function")return e;var s=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c=e._navigator?e._navigator.userAgent:"",_=c.match(/OPR\/([0-6].)/g),p=_&&parseInt(_[0].split("/")[1],10)<33,h=c.indexOf("Safari")!==-1&&c.indexOf("Chrome")===-1,v=c.match(/Version\/(.*?) /),k=h&&v&&parseInt(v[1],10)<15;return e._codecs={mp3:!!(!p&&(s||a.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!s,opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(a.canPlayType('audio/wav; codecs="1"')||a.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!a.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(a.canPlayType("audio/x-m4b;")||a.canPlayType("audio/m4b;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!k&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!k&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!a.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(a.canPlayType("audio/x-flac;")||a.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||n;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var a=function(s){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var c=new Audio;c._unlocked=!0,e._releaseHtml5Audio(c)}catch{e.noAudio=!0;break}for(var _=0;_<e._howls.length;_++)if(!e._howls[_]._webAudio)for(var p=e._howls[_]._getSoundIds(),h=0;h<p.length;h++){var v=e._howls[_]._soundById(p[h]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}e._autoResume();var k=e.ctx.createBufferSource();k.buffer=e._scratchBuffer,k.connect(e.ctx.destination),typeof k.start>"u"?k.noteOn(0):k.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),k.onended=function(){k.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",a,!0);for(var F=0;F<e._howls.length;F++)e._howls[F]._emit("unlock")}};return document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",a,!0),e}},_obtainHtml5Audio:function(){var e=this||n;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var a=new Audio().play();return a&&typeof Promise<"u"&&(a instanceof Promise||typeof a.then=="function")&&a.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var a=this||n;return e._unlocked&&a._html5AudioPool.push(e),a},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!n.usingWebAudio)){for(var a=0;a<e._howls.length;a++)if(e._howls[a]._webAudio){for(var s=0;s<e._howls[a]._sounds.length;s++)if(!e._howls[a]._sounds[s]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var c=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(c,c)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!n.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var a=0;a<e._howls.length;a++)e._howls[a]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var n=new i,r=function(e){var a=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}a.init(e)};r.prototype={init:function(e){var a=this;return n.ctx||g(),a._autoplay=e.autoplay||!1,a._format=typeof e.format!="string"?e.format:[e.format],a._html5=e.html5||!1,a._muted=e.mute||!1,a._loop=e.loop||!1,a._pool=e.pool||5,a._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,a._rate=e.rate||1,a._sprite=e.sprite||{},a._src=typeof e.src!="string"?e.src:[e.src],a._volume=e.volume!==void 0?e.volume:1,a._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},a._duration=0,a._state="unloaded",a._sounds=[],a._endTimers={},a._queue=[],a._playLock=!1,a._onend=e.onend?[{fn:e.onend}]:[],a._onfade=e.onfade?[{fn:e.onfade}]:[],a._onload=e.onload?[{fn:e.onload}]:[],a._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],a._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],a._onpause=e.onpause?[{fn:e.onpause}]:[],a._onplay=e.onplay?[{fn:e.onplay}]:[],a._onstop=e.onstop?[{fn:e.onstop}]:[],a._onmute=e.onmute?[{fn:e.onmute}]:[],a._onvolume=e.onvolume?[{fn:e.onvolume}]:[],a._onrate=e.onrate?[{fn:e.onrate}]:[],a._onseek=e.onseek?[{fn:e.onseek}]:[],a._onunlock=e.onunlock?[{fn:e.onunlock}]:[],a._onresume=[],a._webAudio=n.usingWebAudio&&!a._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(a),a._autoplay&&a._queue.push({event:"play",action:function(){a.play()}}),a._preload&&a._preload!=="none"&&a.load(),a},load:function(){var e=this,a=null;if(n.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var s=0;s<e._src.length;s++){var c,_;if(e._format&&e._format[s])c=e._format[s];else{if(_=e._src[s],typeof _!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}c=/^data:audio\/([^;,]+);/i.exec(_),c||(c=/\.([^.]+)$/.exec(_.split("?",1)[0])),c&&(c=c[1].toLowerCase())}if(c||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),c&&n.codecs(c)){a=e._src[s];break}}if(!a){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=a,e._state="loading",window.location.protocol==="https:"&&a.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new o(e),e._webAudio&&u(e),e},play:function(e,a){var s=this,c=null;if(typeof e=="number")c=e,e=null;else{if(typeof e=="string"&&s._state==="loaded"&&!s._sprite[e])return null;if(typeof e>"u"&&(e="__default",!s._playLock)){for(var _=0,p=0;p<s._sounds.length;p++)s._sounds[p]._paused&&!s._sounds[p]._ended&&(_++,c=s._sounds[p]._id);_===1?e=null:c=null}}var h=c?s._soundById(c):s._inactiveSound();if(!h)return null;if(c&&!e&&(e=h._sprite||"__default"),s._state!=="loaded"){h._sprite=e,h._ended=!1;var v=h._id;return s._queue.push({event:"play",action:function(){s.play(v)}}),v}if(c&&!h._paused)return a||s._loadQueue("play"),h._id;s._webAudio&&n._autoResume();var k=Math.max(0,h._seek>0?h._seek:s._sprite[e][0]/1e3),F=Math.max(0,(s._sprite[e][0]+s._sprite[e][1])/1e3-k),T=F*1e3/Math.abs(h._rate),B=s._sprite[e][0]/1e3,O=(s._sprite[e][0]+s._sprite[e][1])/1e3;h._sprite=e,h._ended=!1;var P=function(){h._paused=!1,h._seek=k,h._start=B,h._stop=O,h._loop=!!(h._loop||s._sprite[e][2])};if(k>=O){s._ended(h);return}var b=h._node;if(s._webAudio){var q=function(){s._playLock=!1,P(),s._refreshBuffer(h);var A=h._muted||s._muted?0:h._volume;b.gain.setValueAtTime(A,n.ctx.currentTime),h._playStart=n.ctx.currentTime,typeof b.bufferSource.start>"u"?h._loop?b.bufferSource.noteGrainOn(0,k,86400):b.bufferSource.noteGrainOn(0,k,F):h._loop?b.bufferSource.start(0,k,86400):b.bufferSource.start(0,k,F),T!==1/0&&(s._endTimers[h._id]=setTimeout(s._ended.bind(s,h),T)),a||setTimeout(function(){s._emit("play",h._id),s._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?q():(s._playLock=!0,s.once("resume",q),s._clearTimer(h._id))}else{var x=function(){b.currentTime=k,b.muted=h._muted||s._muted||n._muted||b.muted,b.volume=h._volume*n.volume(),b.playbackRate=h._rate;try{var A=b.play();if(A&&typeof Promise<"u"&&(A instanceof Promise||typeof A.then=="function")?(s._playLock=!0,P(),A.then(function(){s._playLock=!1,b._unlocked=!0,a?s._loadQueue():s._emit("play",h._id)}).catch(function(){s._playLock=!1,s._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),h._ended=!0,h._paused=!0})):a||(s._playLock=!1,P(),s._emit("play",h._id)),b.playbackRate=h._rate,b.paused){s._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||h._loop?s._endTimers[h._id]=setTimeout(s._ended.bind(s,h),T):(s._endTimers[h._id]=function(){s._ended(h),b.removeEventListener("ended",s._endTimers[h._id],!1)},b.addEventListener("ended",s._endTimers[h._id],!1))}catch(H){s._emit("playerror",h._id,H)}};b.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(b.src=s._src,b.load());var G=window&&window.ejecta||!b.readyState&&n._navigator.isCocoonJS;if(b.readyState>=3||G)x();else{s._playLock=!0,s._state="loading";var M=function(){s._state="loaded",x(),b.removeEventListener(n._canPlayEvent,M,!1)};b.addEventListener(n._canPlayEvent,M,!1),s._clearTimer(h._id)}}return h._id},pause:function(e){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"pause",action:function(){a.pause(e)}}),a;for(var s=a._getSoundIds(e),c=0;c<s.length;c++){a._clearTimer(s[c]);var _=a._soundById(s[c]);if(_&&!_._paused&&(_._seek=a.seek(s[c]),_._rateSeek=0,_._paused=!0,a._stopFade(s[c]),_._node))if(a._webAudio){if(!_._node.bufferSource)continue;typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),a._cleanBuffer(_._node)}else(!isNaN(_._node.duration)||_._node.duration===1/0)&&_._node.pause();arguments[1]||a._emit("pause",_?_._id:null)}return a},stop:function(e,a){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"stop",action:function(){s.stop(e)}}),s;for(var c=s._getSoundIds(e),_=0;_<c.length;_++){s._clearTimer(c[_]);var p=s._soundById(c[_]);p&&(p._seek=p._start||0,p._rateSeek=0,p._paused=!0,p._ended=!0,s._stopFade(c[_]),p._node&&(s._webAudio?p._node.bufferSource&&(typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),s._cleanBuffer(p._node)):(!isNaN(p._node.duration)||p._node.duration===1/0)&&(p._node.currentTime=p._start||0,p._node.pause(),p._node.duration===1/0&&s._clearSound(p._node))),a||s._emit("stop",p._id))}return s},mute:function(e,a){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"mute",action:function(){s.mute(e,a)}}),s;if(typeof a>"u")if(typeof e=="boolean")s._muted=e;else return s._muted;for(var c=s._getSoundIds(a),_=0;_<c.length;_++){var p=s._soundById(c[_]);p&&(p._muted=e,p._interval&&s._stopFade(p._id),s._webAudio&&p._node?p._node.gain.setValueAtTime(e?0:p._volume,n.ctx.currentTime):p._node&&(p._node.muted=n._muted?!0:e),s._emit("mute",p._id))}return s},volume:function(){var e=this,a=arguments,s,c;if(a.length===0)return e._volume;if(a.length===1||a.length===2&&typeof a[1]>"u"){var _=e._getSoundIds(),p=_.indexOf(a[0]);p>=0?c=parseInt(a[0],10):s=parseFloat(a[0])}else a.length>=2&&(s=parseFloat(a[0]),c=parseInt(a[1],10));var h;if(typeof s<"u"&&s>=0&&s<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,a)}}),e;typeof c>"u"&&(e._volume=s),c=e._getSoundIds(c);for(var v=0;v<c.length;v++)h=e._soundById(c[v]),h&&(h._volume=s,a[2]||e._stopFade(c[v]),e._webAudio&&h._node&&!h._muted?h._node.gain.setValueAtTime(s,n.ctx.currentTime):h._node&&!h._muted&&(h._node.volume=s*n.volume()),e._emit("volume",h._id))}else return h=c?e._soundById(c):e._sounds[0],h?h._volume:0;return e},fade:function(e,a,s,c){var _=this;if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"fade",action:function(){_.fade(e,a,s,c)}}),_;e=Math.min(Math.max(0,parseFloat(e)),1),a=Math.min(Math.max(0,parseFloat(a)),1),s=parseFloat(s),_.volume(e,c);for(var p=_._getSoundIds(c),h=0;h<p.length;h++){var v=_._soundById(p[h]);if(v){if(c||_._stopFade(p[h]),_._webAudio&&!v._muted){var k=n.ctx.currentTime,F=k+s/1e3;v._volume=e,v._node.gain.setValueAtTime(e,k),v._node.gain.linearRampToValueAtTime(a,F)}_._startFadeInterval(v,e,a,s,p[h],typeof c>"u")}}return _},_startFadeInterval:function(e,a,s,c,_,p){var h=this,v=a,k=s-a,F=Math.abs(k/.01),T=Math.max(4,F>0?c/F:c),B=Date.now();e._fadeTo=s,e._interval=setInterval(function(){var O=(Date.now()-B)/c;B=Date.now(),v+=k*O,v=Math.round(v*100)/100,k<0?v=Math.max(s,v):v=Math.min(s,v),h._webAudio?e._volume=v:h.volume(v,e._id,!0),p&&(h._volume=v),(s<a&&v<=s||s>a&&v>=s)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,h.volume(s,e._id),h._emit("fade",e._id))},T)},_stopFade:function(e){var a=this,s=a._soundById(e);return s&&s._interval&&(a._webAudio&&s._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(s._interval),s._interval=null,a.volume(s._fadeTo,e),s._fadeTo=null,a._emit("fade",e)),a},loop:function(){var e=this,a=arguments,s,c,_;if(a.length===0)return e._loop;if(a.length===1)if(typeof a[0]=="boolean")s=a[0],e._loop=s;else return _=e._soundById(parseInt(a[0],10)),_?_._loop:!1;else a.length===2&&(s=a[0],c=parseInt(a[1],10));for(var p=e._getSoundIds(c),h=0;h<p.length;h++)_=e._soundById(p[h]),_&&(_._loop=s,e._webAudio&&_._node&&_._node.bufferSource&&(_._node.bufferSource.loop=s,s&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop,e.playing(p[h])&&(e.pause(p[h],!0),e.play(p[h],!0)))));return e},rate:function(){var e=this,a=arguments,s,c;if(a.length===0)c=e._sounds[0]._id;else if(a.length===1){var _=e._getSoundIds(),p=_.indexOf(a[0]);p>=0?c=parseInt(a[0],10):s=parseFloat(a[0])}else a.length===2&&(s=parseFloat(a[0]),c=parseInt(a[1],10));var h;if(typeof s=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,a)}}),e;typeof c>"u"&&(e._rate=s),c=e._getSoundIds(c);for(var v=0;v<c.length;v++)if(h=e._soundById(c[v]),h){e.playing(c[v])&&(h._rateSeek=e.seek(c[v]),h._playStart=e._webAudio?n.ctx.currentTime:h._playStart),h._rate=s,e._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.setValueAtTime(s,n.ctx.currentTime):h._node&&(h._node.playbackRate=s);var k=e.seek(c[v]),F=(e._sprite[h._sprite][0]+e._sprite[h._sprite][1])/1e3-k,T=F*1e3/Math.abs(h._rate);(e._endTimers[c[v]]||!h._paused)&&(e._clearTimer(c[v]),e._endTimers[c[v]]=setTimeout(e._ended.bind(e,h),T)),e._emit("rate",h._id)}}else return h=e._soundById(c),h?h._rate:e._rate;return e},seek:function(){var e=this,a=arguments,s,c;if(a.length===0)e._sounds.length&&(c=e._sounds[0]._id);else if(a.length===1){var _=e._getSoundIds(),p=_.indexOf(a[0]);p>=0?c=parseInt(a[0],10):e._sounds.length&&(c=e._sounds[0]._id,s=parseFloat(a[0]))}else a.length===2&&(s=parseFloat(a[0]),c=parseInt(a[1],10));if(typeof c>"u")return 0;if(typeof s=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,a)}}),e;var h=e._soundById(c);if(h)if(typeof s=="number"&&s>=0){var v=e.playing(c);v&&e.pause(c,!0),h._seek=s,h._ended=!1,e._clearTimer(c),!e._webAudio&&h._node&&!isNaN(h._node.duration)&&(h._node.currentTime=s);var k=function(){v&&e.play(c,!0),e._emit("seek",c)};if(v&&!e._webAudio){var F=function(){e._playLock?setTimeout(F,0):k()};setTimeout(F,0)}else k()}else if(e._webAudio){var T=e.playing(c)?n.ctx.currentTime-h._playStart:0,B=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(B+T*Math.abs(h._rate))}else return h._node.currentTime;return e},playing:function(e){var a=this;if(typeof e=="number"){var s=a._soundById(e);return s?!s._paused:!1}for(var c=0;c<a._sounds.length;c++)if(!a._sounds[c]._paused)return!0;return!1},duration:function(e){var a=this,s=a._duration,c=a._soundById(e);return c&&(s=a._sprite[c._sprite][1]/1e3),s},state:function(){return this._state},unload:function(){for(var e=this,a=e._sounds,s=0;s<a.length;s++)a[s]._paused||e.stop(a[s]._id),e._webAudio||(e._clearSound(a[s]._node),a[s]._node.removeEventListener("error",a[s]._errorFn,!1),a[s]._node.removeEventListener(n._canPlayEvent,a[s]._loadFn,!1),a[s]._node.removeEventListener("ended",a[s]._endFn,!1),n._releaseHtml5Audio(a[s]._node)),delete a[s]._node,e._clearTimer(a[s]._id);var c=n._howls.indexOf(e);c>=0&&n._howls.splice(c,1);var _=!0;for(s=0;s<n._howls.length;s++)if(n._howls[s]._src===e._src||e._src.indexOf(n._howls[s]._src)>=0){_=!1;break}return l&&_&&delete l[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,a,s,c){var _=this,p=_["_on"+e];return typeof a=="function"&&p.push(c?{id:s,fn:a,once:c}:{id:s,fn:a}),_},off:function(e,a,s){var c=this,_=c["_on"+e],p=0;if(typeof a=="number"&&(s=a,a=null),a||s)for(p=0;p<_.length;p++){var h=s===_[p].id;if(a===_[p].fn&&h||!a&&h){_.splice(p,1);break}}else if(e)c["_on"+e]=[];else{var v=Object.keys(c);for(p=0;p<v.length;p++)v[p].indexOf("_on")===0&&Array.isArray(c[v[p]])&&(c[v[p]]=[])}return c},once:function(e,a,s){var c=this;return c.on(e,a,s,1),c},_emit:function(e,a,s){for(var c=this,_=c["_on"+e],p=_.length-1;p>=0;p--)(!_[p].id||_[p].id===a||e==="load")&&(setTimeout(function(h){h.call(this,a,s)}.bind(c,_[p].fn),0),_[p].once&&c.off(e,_[p].fn,_[p].id));return c._loadQueue(e),c},_loadQueue:function(e){var a=this;if(a._queue.length>0){var s=a._queue[0];s.event===e&&(a._queue.shift(),a._loadQueue()),e||s.action()}return a},_ended:function(e){var a=this,s=e._sprite;if(!a._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(a._ended.bind(a,e),100),a;var c=!!(e._loop||a._sprite[s][2]);if(a._emit("end",e._id),!a._webAudio&&c&&a.stop(e._id,!0).play(e._id),a._webAudio&&c){a._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=n.ctx.currentTime;var _=(e._stop-e._start)*1e3/Math.abs(e._rate);a._endTimers[e._id]=setTimeout(a._ended.bind(a,e),_)}return a._webAudio&&!c&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,a._clearTimer(e._id),a._cleanBuffer(e._node),n._autoSuspend()),!a._webAudio&&!c&&a.stop(e._id,!0),a},_clearTimer:function(e){var a=this;if(a._endTimers[e]){if(typeof a._endTimers[e]!="function")clearTimeout(a._endTimers[e]);else{var s=a._soundById(e);s&&s._node&&s._node.removeEventListener("ended",a._endTimers[e],!1)}delete a._endTimers[e]}return a},_soundById:function(e){for(var a=this,s=0;s<a._sounds.length;s++)if(e===a._sounds[s]._id)return a._sounds[s];return null},_inactiveSound:function(){var e=this;e._drain();for(var a=0;a<e._sounds.length;a++)if(e._sounds[a]._ended)return e._sounds[a].reset();return new o(e)},_drain:function(){var e=this,a=e._pool,s=0,c=0;if(!(e._sounds.length<a)){for(c=0;c<e._sounds.length;c++)e._sounds[c]._ended&&s++;for(c=e._sounds.length-1;c>=0;c--){if(s<=a)return;e._sounds[c]._ended&&(e._webAudio&&e._sounds[c]._node&&e._sounds[c]._node.disconnect(0),e._sounds.splice(c,1),s--)}}},_getSoundIds:function(e){var a=this;if(typeof e>"u"){for(var s=[],c=0;c<a._sounds.length;c++)s.push(a._sounds[c]._id);return s}else return[e]},_refreshBuffer:function(e){var a=this;return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=l[a._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,n.ctx.currentTime),a},_cleanBuffer:function(e){var a=this,s=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),s))try{e.bufferSource.buffer=n._scratchBuffer}catch{}return e.bufferSource=null,a},_clearSound:function(e){var a=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);a||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(e){this._parent=e,this.init()};o.prototype={init:function(){var e=this,a=e._parent;return e._muted=a._muted,e._loop=a._loop,e._volume=a._volume,e._rate=a._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,a._sounds.push(e),e.create(),e},create:function(){var e=this,a=e._parent,s=n._muted||e._muted||e._parent._muted?0:e._volume;return a._webAudio?(e._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(s,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):n.noAudio||(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=a._src,e._node.preload=a._preload===!0?"auto":a._preload,e._node.volume=s*n.volume(),e._node.load()),e},reset:function(){var e=this,a=e._parent;return e._muted=a._muted,e._loop=a._loop,e._volume=a._volume,e._rate=a._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,a=e._parent;a._duration=Math.ceil(e._node.duration*10)/10,Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,a=e._parent;a._duration===1/0&&(a._duration=Math.ceil(e._node.duration*10)/10,a._sprite.__default[1]===1/0&&(a._sprite.__default[1]=a._duration*1e3),a._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var l={},u=function(e){var a=e._src;if(l[a]){e._duration=l[a].duration,d(e);return}if(/^data:[^;]+;base64,/.test(a)){for(var s=atob(a.split(",")[1]),c=new Uint8Array(s.length),_=0;_<s.length;++_)c[_]=s.charCodeAt(_);f(c.buffer,e)}else{var p=new XMLHttpRequest;p.open(e._xhr.method,a,!0),p.withCredentials=e._xhr.withCredentials,p.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(h){p.setRequestHeader(h,e._xhr.headers[h])}),p.onload=function(){var h=(p.status+"")[0];if(h!=="0"&&h!=="2"&&h!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+p.status+".");return}f(p.response,e)},p.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[a],e.load())},m(p)}},m=function(e){try{e.send()}catch{e.onerror()}},f=function(e,a){var s=function(){a._emit("loaderror",null,"Decoding audio data failed.")},c=function(_){_&&a._sounds.length>0?(l[a._src]=_,d(a,_)):s()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(e).then(c).catch(s):n.ctx.decodeAudioData(e,c,s)},d=function(e,a){a&&!e._duration&&(e._duration=a.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},g=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),a=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),s=a?parseInt(a[1],10):null;if(e&&s&&s<9){var c=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!c&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,typeof _e<"u"?(_e.HowlerGlobal=i,_e.Howler=n,_e.Howl=r,_e.Sound=o):typeof window<"u"&&(window.HowlerGlobal=i,window.Howler=n,window.Howl=r,window.Sound=o)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var o=r._howls.length-1;o>=0;o--)r._howls[o].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,o){var l=this;if(!l.ctx||!l.ctx.listener)return l;if(r=typeof r!="number"?l._pos[1]:r,o=typeof o!="number"?l._pos[2]:o,typeof n=="number")l._pos=[n,r,o],typeof l.ctx.listener.positionX<"u"?(l.ctx.listener.positionX.setTargetAtTime(l._pos[0],Howler.ctx.currentTime,.1),l.ctx.listener.positionY.setTargetAtTime(l._pos[1],Howler.ctx.currentTime,.1),l.ctx.listener.positionZ.setTargetAtTime(l._pos[2],Howler.ctx.currentTime,.1)):l.ctx.listener.setPosition(l._pos[0],l._pos[1],l._pos[2]);else return l._pos;return l},HowlerGlobal.prototype.orientation=function(n,r,o,l,u,m){var f=this;if(!f.ctx||!f.ctx.listener)return f;var d=f._orientation;if(r=typeof r!="number"?d[1]:r,o=typeof o!="number"?d[2]:o,l=typeof l!="number"?d[3]:l,u=typeof u!="number"?d[4]:u,m=typeof m!="number"?d[5]:m,typeof n=="number")f._orientation=[n,r,o,l,u,m],typeof f.ctx.listener.forwardX<"u"?(f.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),f.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),f.ctx.listener.forwardZ.setTargetAtTime(o,Howler.ctx.currentTime,.1),f.ctx.listener.upX.setTargetAtTime(l,Howler.ctx.currentTime,.1),f.ctx.listener.upY.setTargetAtTime(u,Howler.ctx.currentTime,.1),f.ctx.listener.upZ.setTargetAtTime(m,Howler.ctx.currentTime,.1)):f.ctx.listener.setOrientation(n,r,o,l,u,m);else return d;return f},Howl.prototype.init=function(n){return function(r){var o=this;return o._orientation=r.orientation||[1,0,0],o._stereo=r.stereo||null,o._pos=r.pos||null,o._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},o._onstereo=r.onstereo?[{fn:r.onstereo}]:[],o._onpos=r.onpos?[{fn:r.onpos}]:[],o._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"stereo",action:function(){o.stereo(n,r)}}),o;var l=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")o._stereo=n,o._pos=[n,0,0];else return o._stereo;for(var u=o._getSoundIds(r),m=0;m<u.length;m++){var f=o._soundById(u[m]);if(f)if(typeof n=="number")f._stereo=n,f._pos=[n,0,0],f._node&&(f._pannerAttr.panningModel="equalpower",(!f._panner||!f._panner.pan)&&i(f,l),l==="spatial"?typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):f._panner.setPosition(n,0,0):f._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),o._emit("stereo",f._id);else return f._stereo}return o},Howl.prototype.pos=function(n,r,o,l){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"pos",action:function(){u.pos(n,r,o,l)}}),u;if(r=typeof r!="number"?0:r,o=typeof o!="number"?-.5:o,typeof l>"u")if(typeof n=="number")u._pos=[n,r,o];else return u._pos;for(var m=u._getSoundIds(l),f=0;f<m.length;f++){var d=u._soundById(m[f]);if(d)if(typeof n=="number")d._pos=[n,r,o],d._node&&((!d._panner||d._panner.pan)&&i(d,"spatial"),typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):d._panner.setPosition(n,r,o)),u._emit("pos",d._id);else return d._pos}return u},Howl.prototype.orientation=function(n,r,o,l){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"orientation",action:function(){u.orientation(n,r,o,l)}}),u;if(r=typeof r!="number"?u._orientation[1]:r,o=typeof o!="number"?u._orientation[2]:o,typeof l>"u")if(typeof n=="number")u._orientation=[n,r,o];else return u._orientation;for(var m=u._getSoundIds(l),f=0;f<m.length;f++){var d=u._soundById(m[f]);if(d)if(typeof n=="number")d._orientation=[n,r,o],d._node&&(d._panner||(d._pos||(d._pos=u._pos||[0,0,-.5]),i(d,"spatial")),typeof d._panner.orientationX<"u"?(d._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):d._panner.setOrientation(n,r,o)),u._emit("orientation",d._id);else return d._orientation}return u},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,o,l,u;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")o=r[0],typeof l>"u"&&(o.pannerAttr||(o.pannerAttr={coneInnerAngle:o.coneInnerAngle,coneOuterAngle:o.coneOuterAngle,coneOuterGain:o.coneOuterGain,distanceModel:o.distanceModel,maxDistance:o.maxDistance,refDistance:o.refDistance,rolloffFactor:o.rolloffFactor,panningModel:o.panningModel}),n._pannerAttr={coneInnerAngle:typeof o.pannerAttr.coneInnerAngle<"u"?o.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof o.pannerAttr.coneOuterAngle<"u"?o.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof o.pannerAttr.coneOuterGain<"u"?o.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof o.pannerAttr.distanceModel<"u"?o.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof o.pannerAttr.maxDistance<"u"?o.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof o.pannerAttr.refDistance<"u"?o.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof o.pannerAttr.rolloffFactor<"u"?o.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof o.pannerAttr.panningModel<"u"?o.pannerAttr.panningModel:n._panningModel});else return u=n._soundById(parseInt(r[0],10)),u?u._pannerAttr:n._pannerAttr;else r.length===2&&(o=r[0],l=parseInt(r[1],10));for(var m=n._getSoundIds(l),f=0;f<m.length;f++)if(u=n._soundById(m[f]),u){var d=u._pannerAttr;d={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:d.coneOuterAngle,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:d.coneOuterGain,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:d.distanceModel,maxDistance:typeof o.maxDistance<"u"?o.maxDistance:d.maxDistance,refDistance:typeof o.refDistance<"u"?o.refDistance:d.refDistance,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:d.rolloffFactor,panningModel:typeof o.panningModel<"u"?o.panningModel:d.panningModel};var g=u._panner;g?(g.coneInnerAngle=d.coneInnerAngle,g.coneOuterAngle=d.coneOuterAngle,g.coneOuterGain=d.coneOuterGain,g.distanceModel=d.distanceModel,g.maxDistance=d.maxDistance,g.refDistance=d.refDistance,g.rolloffFactor=d.rolloffFactor,g.panningModel=d.panningModel):(u._pos||(u._pos=n._pos||[0,0,-.5]),i(u,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var r=this,o=r._parent;r._orientation=o._orientation,r._stereo=o._stereo,r._pos=o._pos,r._pannerAttr=o._pannerAttr,n.call(this),r._stereo?o.stereo(r._stereo):r._pos&&o.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,o=r._parent;return r._orientation=o._orientation,r._stereo=o._stereo,r._pos=o._pos,r._pannerAttr=o._pannerAttr,r._stereo?o.stereo(r._stereo):r._pos?o.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,o._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var i=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(te);function dn(t){const i=t-1;return i*i*i+1}function ut(t){return--t*t*t*t*t+1}function ct(t,{delay:i=0,duration:n=400,easing:r=$t}={}){const o=+getComputedStyle(t).opacity;return{delay:i,duration:n,easing:r,css:l=>`opacity: ${l*o}`}}function dt(t,{delay:i=0,duration:n=400,easing:r=dn}={}){const o=getComputedStyle(t),l=+o.opacity,u=parseFloat(o.height),m=parseFloat(o.paddingTop),f=parseFloat(o.paddingBottom),d=parseFloat(o.marginTop),g=parseFloat(o.marginBottom),e=parseFloat(o.borderTopWidth),a=parseFloat(o.borderBottomWidth);return{delay:i,duration:n,easing:r,css:s=>`overflow: hidden;opacity: ${Math.min(s*20,1)*l};height: ${s*u}px;padding-top: ${s*m}px;padding-bottom: ${s*f}px;margin-top: ${s*d}px;margin-bottom: ${s*g}px;border-top-width: ${s*e}px;border-bottom-width: ${s*a}px;`}}function fn(t){let i,n,r;return{c(){i=S("div"),this.h()},l(o){i=I(o,"DIV",{class:!0}),D(i).forEach(w),this.h()},h(){y(i,"class","svelte-ue0rk9"),z(i,"played",t[5]>=t[0]-Xe),z(i,"off-grid",t[6]),V(i,"height",`${t[2]}px`),V(i,"width",`${t[1]}px`),V(i,"left",`${t[3]}px`),V(i,"--color",t[4])},m(o,l){N(o,i,l),r=!0},p(o,[l]){(!r||l&33)&&z(i,"played",o[5]>=o[0]-Xe),(!r||l&64)&&z(i,"off-grid",o[6]),l&4&&V(i,"height",`${o[2]}px`),l&2&&V(i,"width",`${o[1]}px`),l&8&&V(i,"left",`${o[3]}px`),l&16&&V(i,"--color",o[4])},i(o){r||(Ce(()=>{n||(n=Ie(i,ct,{},!0)),n.run(1)}),r=!0)},o(o){n||(n=Ie(i,ct,{},!1)),n.run(0),r=!1},d(o){o&&w(i),o&&n&&n.end()}}}const Xe=.05;function mn(t,i,n){let r,o,l,u,m,{note:f}=i,{instrumentId:d}=i,{width:g}=i,{height:e}=i,{x:a}=i,{color:s}=i,{withSound:c}=i;const{getT:_,getInstrumentToggles:p}=$e("song"),h=_();ee(t,h,T=>n(5,m=T));const v=p();ee(t,v,T=>n(13,u=T));const k={hihat:new te.Howl({src:["assets/sound/hihat.mp3"]}),kick:new te.Howl({src:["assets/sound/kick.mp3"]}),snare:new te.Howl({src:["assets/sound/snare.mp3"]})},F=()=>{k[d].state()==="loaded"&&k[d].play()};return t.$$set=T=>{"note"in T&&n(0,f=T.note),"instrumentId"in T&&n(9,d=T.instrumentId),"width"in T&&n(1,g=T.width),"height"in T&&n(2,e=T.height),"x"in T&&n(3,a=T.x),"color"in T&&n(4,s=T.color),"withSound"in T&&n(10,c=T.withSound)},t.$$.update=()=>{t.$$.dirty&1&&n(6,r=f%.0625!==0),t.$$.dirty&33&&n(12,o=m!==0&&m>=f&&m<f+Xe),t.$$.dirty&8704&&n(11,l=u[d]==="on"),t.$$.dirty&7168&&c&&o&&l&&F()},[f,g,e,a,s,m,r,h,v,d,c,l,o,u]}class _n extends Z{constructor(i){super(),K(this,i,mn,fn,$,{note:0,instrumentId:9,width:1,height:2,x:3,color:4,withSound:10})}}function Se(t,i){return t==null||i==null?NaN:t<i?-1:t>i?1:t>=i?0:NaN}function Lt(t){let i,n,r;t.length!==2?(i=Se,n=(m,f)=>Se(t(m),f),r=(m,f)=>t(m)-f):(i=t===Se||t===rn?t:hn,n=t,r=t);function o(m,f,d=0,g=m.length){if(d<g){if(i(f,f)!==0)return g;do{const e=d+g>>>1;n(m[e],f)<0?d=e+1:g=e}while(d<g)}return d}function l(m,f,d=0,g=m.length){if(d<g){if(i(f,f)!==0)return g;do{const e=d+g>>>1;n(m[e],f)<=0?d=e+1:g=e}while(d<g)}return d}function u(m,f,d=0,g=m.length){const e=o(m,f,d,g-1);return e>d&&r(m[e-1],f)>-r(m[e],f)?e-1:e}return{left:o,center:u,right:l}}function hn(){return 0}function pn(t){return t===null?NaN:+t}const gn=Lt(Se),vn=gn.right;Lt(pn).center;const yn=vn,kn=Math.sqrt(50),bn=Math.sqrt(10),wn=Math.sqrt(2);function Ge(t,i,n){const r=(i-t)/Math.max(0,n),o=Math.floor(Math.log10(r)),l=r/Math.pow(10,o),u=l>=kn?10:l>=bn?5:l>=wn?2:1;let m,f,d;return o<0?(d=Math.pow(10,-o)/u,m=Math.round(t*d),f=Math.round(i*d),m/d<t&&++m,f/d>i&&--f,d=-d):(d=Math.pow(10,o)*u,m=Math.round(t/d),f=Math.round(i/d),m*d<t&&++m,f*d>i&&--f),f<m&&.5<=n&&n<2?Ge(t,i,n*2):[m,f,d]}function Tn(t,i,n){if(i=+i,t=+t,n=+n,!(n>0))return[];if(t===i)return[t];const r=i<t,[o,l,u]=r?Ge(i,t,n):Ge(t,i,n);if(!(l>=o))return[];const m=l-o+1,f=new Array(m);if(r)if(u<0)for(let d=0;d<m;++d)f[d]=(l-d)/-u;else for(let d=0;d<m;++d)f[d]=(l-d)*u;else if(u<0)for(let d=0;d<m;++d)f[d]=(o+d)/-u;else for(let d=0;d<m;++d)f[d]=(o+d)*u;return f}function We(t,i,n){return i=+i,t=+t,n=+n,Ge(t,i,n)[2]}function An(t,i,n){i=+i,t=+t,n=+n;const r=i<t,o=r?We(i,t,n):We(t,i,n);return(r?-1:1)*(o<0?1/-o:o)}function pe(t,i,n){t=+t,i=+i,n=(o=arguments.length)<2?(i=t,t=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((i-t)/n))|0,l=new Array(o);++r<o;)l[r]=t+r*n;return l}function Je(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function Ct(t,i){var n=Object.create(t.prototype);for(var r in i)n[r]=i[r];return n}function ke(){}var ge=.7,He=1/ge,le="\\s*([+-]?\\d+)\\s*",ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",X="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xn=/^#([0-9a-f]{3,8})$/,Mn=new RegExp(`^rgb\\(${le},${le},${le}\\)$`),Sn=new RegExp(`^rgb\\(${X},${X},${X}\\)$`),In=new RegExp(`^rgba\\(${le},${le},${le},${ve}\\)$`),En=new RegExp(`^rgba\\(${X},${X},${X},${ve}\\)$`),Fn=new RegExp(`^hsl\\(${ve},${X},${X}\\)$`),Gn=new RegExp(`^hsla\\(${ve},${X},${X},${ve}\\)$`),ft={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Je(ke,ye,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:mt,formatHex:mt,formatHex8:Hn,formatHsl:Pn,formatRgb:_t,toString:_t});function mt(){return this.rgb().formatHex()}function Hn(){return this.rgb().formatHex8()}function Pn(){return Rt(this).formatHsl()}function _t(){return this.rgb().formatRgb()}function ye(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=xn.exec(t))?(n=i[1].length,i=parseInt(i[1],16),n===6?ht(i):n===3?new C(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):n===8?Ae(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):n===4?Ae(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=Mn.exec(t))?new C(i[1],i[2],i[3],1):(i=Sn.exec(t))?new C(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=In.exec(t))?Ae(i[1],i[2],i[3],i[4]):(i=En.exec(t))?Ae(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=Fn.exec(t))?vt(i[1],i[2]/100,i[3]/100,1):(i=Gn.exec(t))?vt(i[1],i[2]/100,i[3]/100,i[4]):ft.hasOwnProperty(t)?ht(ft[t]):t==="transparent"?new C(NaN,NaN,NaN,0):null}function ht(t){return new C(t>>16&255,t>>8&255,t&255,1)}function Ae(t,i,n,r){return r<=0&&(t=i=n=NaN),new C(t,i,n,r)}function Nn(t){return t instanceof ke||(t=ye(t)),t?(t=t.rgb(),new C(t.r,t.g,t.b,t.opacity)):new C}function Ye(t,i,n,r){return arguments.length===1?Nn(t):new C(t,i,n,r??1)}function C(t,i,n,r){this.r=+t,this.g=+i,this.b=+n,this.opacity=+r}Je(C,Ye,Ct(ke,{brighter(t){return t=t==null?He:Math.pow(He,t),new C(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ge:Math.pow(ge,t),new C(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new C(ne(this.r),ne(this.g),ne(this.b),Pe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pt,formatHex:pt,formatHex8:On,formatRgb:gt,toString:gt}));function pt(){return`#${U(this.r)}${U(this.g)}${U(this.b)}`}function On(){return`#${U(this.r)}${U(this.g)}${U(this.b)}${U((isNaN(this.opacity)?1:this.opacity)*255)}`}function gt(){const t=Pe(this.opacity);return`${t===1?"rgb(":"rgba("}${ne(this.r)}, ${ne(this.g)}, ${ne(this.b)}${t===1?")":`, ${t})`}`}function Pe(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ne(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function U(t){return t=ne(t),(t<16?"0":"")+t.toString(16)}function vt(t,i,n,r){return r<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new j(t,i,n,r)}function Rt(t){if(t instanceof j)return new j(t.h,t.s,t.l,t.opacity);if(t instanceof ke||(t=ye(t)),!t)return new j;if(t instanceof j)return t;t=t.rgb();var i=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(i,n,r),l=Math.max(i,n,r),u=NaN,m=l-o,f=(l+o)/2;return m?(i===l?u=(n-r)/m+(n<r)*6:n===l?u=(r-i)/m+2:u=(i-n)/m+4,m/=f<.5?l+o:2-l-o,u*=60):m=f>0&&f<1?0:u,new j(u,m,f,t.opacity)}function Bn(t,i,n,r){return arguments.length===1?Rt(t):new j(t,i,n,r??1)}function j(t,i,n,r){this.h=+t,this.s=+i,this.l=+n,this.opacity=+r}Je(j,Bn,Ct(ke,{brighter(t){return t=t==null?He:Math.pow(He,t),new j(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ge:Math.pow(ge,t),new j(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*i,o=2*n-r;return new C(Re(t>=240?t-240:t+120,o,r),Re(t,o,r),Re(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new j(yt(this.h),xe(this.s),xe(this.l),Pe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Pe(this.opacity);return`${t===1?"hsl(":"hsla("}${yt(this.h)}, ${xe(this.s)*100}%, ${xe(this.l)*100}%${t===1?")":`, ${t})`}`}}));function yt(t){return t=(t||0)%360,t<0?t+360:t}function xe(t){return Math.max(0,Math.min(1,t||0))}function Re(t,i,n){return(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)*255}const ze=t=>()=>t;function Dn(t,i){return function(n){return t+n*i}}function Ln(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(r){return Math.pow(t+r*i,n)}}function Cn(t){return(t=+t)==1?Vt:function(i,n){return n-i?Ln(i,n,t):ze(isNaN(i)?n:i)}}function Vt(t,i){var n=i-t;return n?Dn(t,n):ze(isNaN(t)?i:t)}const kt=function t(i){var n=Cn(i);function r(o,l){var u=n((o=Ye(o)).r,(l=Ye(l)).r),m=n(o.g,l.g),f=n(o.b,l.b),d=Vt(o.opacity,l.opacity);return function(g){return o.r=u(g),o.g=m(g),o.b=f(g),o.opacity=d(g),o+""}}return r.gamma=t,r}(1);function Rn(t,i){i||(i=[]);var n=t?Math.min(i.length,t.length):0,r=i.slice(),o;return function(l){for(o=0;o<n;++o)r[o]=t[o]*(1-l)+i[o]*l;return r}}function Vn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function qn(t,i){var n=i?i.length:0,r=t?Math.min(n,t.length):0,o=new Array(r),l=new Array(n),u;for(u=0;u<r;++u)o[u]=Ue(t[u],i[u]);for(;u<n;++u)l[u]=i[u];return function(m){for(u=0;u<r;++u)l[u]=o[u](m);return l}}function jn(t,i){var n=new Date;return t=+t,i=+i,function(r){return n.setTime(t*(1-r)+i*r),n}}function Ne(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}function Xn(t,i){var n={},r={},o;(t===null||typeof t!="object")&&(t={}),(i===null||typeof i!="object")&&(i={});for(o in i)o in t?n[o]=Ue(t[o],i[o]):r[o]=i[o];return function(l){for(o in n)r[o]=n[o](l);return r}}var Qe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ve=new RegExp(Qe.source,"g");function Wn(t){return function(){return t}}function Yn(t){return function(i){return t(i)+""}}function Qn(t,i){var n=Qe.lastIndex=Ve.lastIndex=0,r,o,l,u=-1,m=[],f=[];for(t=t+"",i=i+"";(r=Qe.exec(t))&&(o=Ve.exec(i));)(l=o.index)>n&&(l=i.slice(n,l),m[u]?m[u]+=l:m[++u]=l),(r=r[0])===(o=o[0])?m[u]?m[u]+=o:m[++u]=o:(m[++u]=null,f.push({i:u,x:Ne(r,o)})),n=Ve.lastIndex;return n<i.length&&(l=i.slice(n),m[u]?m[u]+=l:m[++u]=l),m.length<2?f[0]?Yn(f[0].x):Wn(i):(i=f.length,function(d){for(var g=0,e;g<i;++g)m[(e=f[g]).i]=e.x(d);return m.join("")})}function Ue(t,i){var n=typeof i,r;return i==null||n==="boolean"?ze(i):(n==="number"?Ne:n==="string"?(r=ye(i))?(i=r,kt):Qn:i instanceof ye?kt:i instanceof Date?jn:Vn(i)?Rn:Array.isArray(i)?qn:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?Xn:Ne)(t,i)}function Zn(t,i){return t=+t,i=+i,function(n){return Math.round(t*(1-n)+i*n)}}function Kn(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Oe(t,i){if((n=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function me(t){return t=Oe(Math.abs(t)),t?t[1]:NaN}function $n(t,i){return function(n,r){for(var o=n.length,l=[],u=0,m=t[0],f=0;o>0&&m>0&&(f+m+1>r&&(m=Math.max(1,r-f)),l.push(n.substring(o-=m,o+m)),!((f+=m+1)>r));)m=t[u=(u+1)%t.length];return l.reverse().join(i)}}function Jn(t){return function(i){return i.replace(/[0-9]/g,function(n){return t[+n]})}}var zn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Be(t){if(!(i=zn.exec(t)))throw new Error("invalid format: "+t);var i;return new et({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}Be.prototype=et.prototype;function et(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}et.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Un(t){e:for(var i=t.length,n=1,r=-1,o;n<i;++n)switch(t[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(o+1):t}var qt;function ei(t,i){var n=Oe(t,i);if(!n)return t+"";var r=n[0],o=n[1],l=o-(qt=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,u=r.length;return l===u?r:l>u?r+new Array(l-u+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+Oe(t,Math.max(0,i+l-1))[0]}function bt(t,i){var n=Oe(t,i);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const wt={"%":(t,i)=>(t*100).toFixed(i),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Kn,e:(t,i)=>t.toExponential(i),f:(t,i)=>t.toFixed(i),g:(t,i)=>t.toPrecision(i),o:t=>Math.round(t).toString(8),p:(t,i)=>bt(t*100,i),r:bt,s:ei,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Tt(t){return t}var At=Array.prototype.map,xt=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ti(t){var i=t.grouping===void 0||t.thousands===void 0?Tt:$n(At.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?Tt:Jn(At.call(t.numerals,String)),u=t.percent===void 0?"%":t.percent+"",m=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function d(e){e=Be(e);var a=e.fill,s=e.align,c=e.sign,_=e.symbol,p=e.zero,h=e.width,v=e.comma,k=e.precision,F=e.trim,T=e.type;T==="n"?(v=!0,T="g"):wt[T]||(k===void 0&&(k=12),F=!0,T="g"),(p||a==="0"&&s==="=")&&(p=!0,a="0",s="=");var B=_==="$"?n:_==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",O=_==="$"?r:/[%p]/.test(T)?u:"",P=wt[T],b=/[defgprs%]/.test(T);k=k===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function q(x){var G=B,M=O,A,H,J;if(T==="c")M=P(x)+M,x="";else{x=+x;var be=x<0||1/x<0;if(x=isNaN(x)?f:P(Math.abs(x),k),F&&(x=Un(x)),be&&+x==0&&c!=="+"&&(be=!1),G=(be?c==="("?c:m:c==="-"||c==="("?"":c)+G,M=(T==="s"?xt[8+qt/3]:"")+M+(be&&c==="("?")":""),b){for(A=-1,H=x.length;++A<H;)if(J=x.charCodeAt(A),48>J||J>57){M=(J===46?o+x.slice(A+1):x.slice(A))+M,x=x.slice(0,A);break}}}v&&!p&&(x=i(x,1/0));var we=G.length+x.length+M.length,W=we<h?new Array(h-we+1).join(a):"";switch(v&&p&&(x=i(W+x,W.length?h-M.length:1/0),W=""),s){case"<":x=G+x+M+W;break;case"=":x=G+W+x+M;break;case"^":x=W.slice(0,we=W.length>>1)+G+x+M+W.slice(we);break;default:x=W+G+x+M;break}return l(x)}return q.toString=function(){return e+""},q}function g(e,a){var s=d((e=Be(e),e.type="f",e)),c=Math.max(-8,Math.min(8,Math.floor(me(a)/3)))*3,_=Math.pow(10,-c),p=xt[8+c/3];return function(h){return s(_*h)+p}}return{format:d,formatPrefix:g}}var Me,jt,Xt;ni({thousands:",",grouping:[3],currency:["$",""]});function ni(t){return Me=ti(t),jt=Me.format,Xt=Me.formatPrefix,Me}function ii(t){return Math.max(0,-me(Math.abs(t)))}function ri(t,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(me(i)/3)))*3-me(Math.abs(t)))}function ai(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,me(i)-me(t))+1}function tt(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t);break}return this}const Mt=Symbol("implicit");function Wt(){var t=new it,i=[],n=[],r=Mt;function o(l){let u=t.get(l);if(u===void 0){if(r!==Mt)return r;t.set(l,u=i.push(l)-1)}return n[u%n.length]}return o.domain=function(l){if(!arguments.length)return i.slice();i=[],t=new it;for(const u of l)t.has(u)||t.set(u,i.push(u)-1);return o},o.range=function(l){return arguments.length?(n=Array.from(l),o):n.slice()},o.unknown=function(l){return arguments.length?(r=l,o):r},o.copy=function(){return Wt(i,n).unknown(r)},tt.apply(o,arguments),o}function Yt(){var t=Wt().unknown(void 0),i=t.domain,n=t.range,r=0,o=1,l,u,m=!1,f=0,d=0,g=.5;delete t.unknown;function e(){var a=i().length,s=o<r,c=s?o:r,_=s?r:o;l=(_-c)/Math.max(1,a-f+d*2),m&&(l=Math.floor(l)),c+=(_-c-l*(a-f))*g,u=l*(1-f),m&&(c=Math.round(c),u=Math.round(u));var p=pe(a).map(function(h){return c+l*h});return n(s?p.reverse():p)}return t.domain=function(a){return arguments.length?(i(a),e()):i()},t.range=function(a){return arguments.length?([r,o]=a,r=+r,o=+o,e()):[r,o]},t.rangeRound=function(a){return[r,o]=a,r=+r,o=+o,m=!0,e()},t.bandwidth=function(){return u},t.step=function(){return l},t.round=function(a){return arguments.length?(m=!!a,e()):m},t.padding=function(a){return arguments.length?(f=Math.min(1,d=+a),e()):f},t.paddingInner=function(a){return arguments.length?(f=Math.min(1,a),e()):f},t.paddingOuter=function(a){return arguments.length?(d=+a,e()):d},t.align=function(a){return arguments.length?(g=Math.max(0,Math.min(1,a)),e()):g},t.copy=function(){return Yt(i(),[r,o]).round(m).paddingInner(f).paddingOuter(d).align(g)},tt.apply(e(),arguments)}function oi(t){return function(){return t}}function si(t){return+t}var St=[0,1];function se(t){return t}function Ze(t,i){return(i-=t=+t)?function(n){return(n-t)/i}:oi(isNaN(i)?NaN:.5)}function li(t,i){var n;return t>i&&(n=t,t=i,i=n),function(r){return Math.max(t,Math.min(i,r))}}function ui(t,i,n){var r=t[0],o=t[1],l=i[0],u=i[1];return o<r?(r=Ze(o,r),l=n(u,l)):(r=Ze(r,o),l=n(l,u)),function(m){return l(r(m))}}function ci(t,i,n){var r=Math.min(t.length,i.length)-1,o=new Array(r),l=new Array(r),u=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++u<r;)o[u]=Ze(t[u],t[u+1]),l[u]=n(i[u],i[u+1]);return function(m){var f=yn(t,m,1,r)-1;return l[f](o[f](m))}}function di(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fi(){var t=St,i=St,n=Ue,r,o,l,u=se,m,f,d;function g(){var a=Math.min(t.length,i.length);return u!==se&&(u=li(t[0],t[a-1])),m=a>2?ci:ui,f=d=null,e}function e(a){return a==null||isNaN(a=+a)?l:(f||(f=m(t.map(r),i,n)))(r(u(a)))}return e.invert=function(a){return u(o((d||(d=m(i,t.map(r),Ne)))(a)))},e.domain=function(a){return arguments.length?(t=Array.from(a,si),g()):t.slice()},e.range=function(a){return arguments.length?(i=Array.from(a),g()):i.slice()},e.rangeRound=function(a){return i=Array.from(a),n=Zn,g()},e.clamp=function(a){return arguments.length?(u=a?!0:se,g()):u!==se},e.interpolate=function(a){return arguments.length?(n=a,g()):n},e.unknown=function(a){return arguments.length?(l=a,e):l},function(a,s){return r=a,o=s,g()}}function mi(){return fi()(se,se)}function _i(t,i,n,r){var o=An(t,i,n),l;switch(r=Be(r??",f"),r.type){case"s":{var u=Math.max(Math.abs(t),Math.abs(i));return r.precision==null&&!isNaN(l=ri(o,u))&&(r.precision=l),Xt(r,u)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=ai(o,Math.max(Math.abs(t),Math.abs(i))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=ii(o))&&(r.precision=l-(r.type==="%")*2);break}}return jt(r)}function hi(t){var i=t.domain;return t.ticks=function(n){var r=i();return Tn(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var o=i();return _i(o[0],o[o.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=i(),o=0,l=r.length-1,u=r[o],m=r[l],f,d,g=10;for(m<u&&(d=u,u=m,m=d,d=o,o=l,l=d);g-- >0;){if(d=We(u,m,n),d===f)return r[o]=u,r[l]=m,i(r);if(d>0)u=Math.floor(u/d)*d,m=Math.ceil(m/d)*d;else if(d<0)u=Math.ceil(u*d)/d,m=Math.floor(m*d)/d;else break;f=d}return t},t}function De(){var t=mi();return t.copy=function(){return di(t,De())},tt.apply(t,arguments),hi(t)}function It(t,i,n){const r=t.slice();r[4]=i[n];const o=r[4]%1===0;r[5]=o;const l=r[2](r[4]);return r[6]=l,r}function pi(t){let i,n=t[4]%4+1+"",r;return{c(){i=S("div"),r=de(n),this.h()},l(o){i=I(o,"DIV",{class:!0});var l=D(i);r=fe(l,n),l.forEach(w),this.h()},h(){y(i,"class","number svelte-14i3nd7")},m(o,l){N(o,i,l),E(i,r)},p:ce,d(o){o&&w(i)}}}function Et(t){let i,n,r,o,l=t[4]%1===0&&pi(t);return{c(){i=S("div"),l&&l.c(),n=Y(),r=S("div"),o=Y(),this.h()},l(u){i=I(u,"DIV",{class:!0});var m=D(i);l&&l.l(m),n=Q(m),r=I(m,"DIV",{class:!0}),D(r).forEach(w),o=Q(m),m.forEach(w),this.h()},h(){y(r,"class","line svelte-14i3nd7"),z(r,"thick",t[5]),y(i,"class","group svelte-14i3nd7"),V(i,"left",`${t[6]}px`)},m(u,m){N(u,i,m),l&&l.m(i,null),E(i,n),E(i,r),E(i,o)},p(u,m){u[4]%1===0&&l.p(u,m)},d(u){u&&w(i),l&&l.d()}}}function gi(t){let i,n,r,o=pe(0,t[0],1/t[1]),l=[];for(let u=0;u<o.length;u+=1)l[u]=Et(It(t,o,u));return{c(){i=S("div");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){i=I(u,"DIV",{class:!0});var m=D(i);for(let f=0;f<l.length;f+=1)l[f].l(m);m.forEach(w),this.h()},h(){y(i,"class","grid svelte-14i3nd7")},m(u,m){N(u,i,m);for(let f=0;f<l.length;f+=1)l[f].m(i,null);r=!0},p(u,[m]){if(t=u,m&7){o=pe(0,t[0],1/t[1]);let f;for(f=0;f<o.length;f+=1){const d=It(t,o,f);l[f]?l[f].p(d,m):(l[f]=Et(d),l[f].c(),l[f].m(i,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=o.length}},i(u){r||(Ce(()=>{n||(n=Ie(i,dt,{delay:100,duration:400,easing:ut},!0)),n.run(1)}),r=!0)},o(u){n||(n=Ie(i,dt,{delay:100,duration:400,easing:ut},!1)),n.run(0),r=!1},d(u){u&&w(i),Le(l,u),u&&n&&n.end()}}}function vi(t){const{beatsPerRotation:i,division:n,getXScale:r}=$e("song"),o=r();return[i,n,o]}class yi extends Z{constructor(i){super(),K(this,i,vi,gi,$,{})}}function Ft(t,i,n){const r=t.slice();r[16]=i[n],r[21]=n;const o=r[5](r[16]);r[17]=o;const l=r[21]+1<r[0].length?r[0][r[21]+1]:r[5].domain()[1];r[18]=l;const u=r[5](r[18])-r[17];return r[19]=u,r}function Gt(t){let i,n;return i=new yi({}),{c(){ie(i.$$.fragment)},l(r){re(i.$$.fragment,r)},m(r,o){ae(i,r,o),n=!0},i(r){n||(L(i.$$.fragment,r),n=!0)},o(r){R(i.$$.fragment,r),n=!1},d(r){oe(i,r)}}}function Ht(t,i){let n,r,o;return r=new _n({props:{note:i[16],instrumentId:i[1],height:i[2],width:i[19],x:i[17],color:i[10][i[1]]}}),{key:t,first:null,c(){n=ue(),ie(r.$$.fragment),this.h()},l(l){n=ue(),re(r.$$.fragment,l),this.h()},h(){this.first=n},m(l,u){N(l,n,u),ae(r,l,u),o=!0},p(l,u){i=l;const m={};u&1&&(m.note=i[16]),u&2&&(m.instrumentId=i[1]),u&4&&(m.height=i[2]),u&33&&(m.width=i[19]),u&33&&(m.x=i[17]),u&2&&(m.color=i[10][i[1]]),r.$set(m)},i(l){o||(L(r.$$.fragment,l),o=!0)},o(l){R(r.$$.fragment,l),o=!1},d(l){l&&w(n),oe(r,l)}}}function ki(t){let i,n,r,o=[],l=new Map,u,m,f,d=t[4][t[1]]==="on"&&Gt(),g=t[0];const e=a=>`${a[1]}-${a[21]}`;for(let a=0;a<g.length;a+=1){let s=Ft(t,g,a),c=e(s);l.set(c,o[a]=Ht(c,s))}return{c(){i=S("div"),d&&d.c(),n=Y(),r=S("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){i=I(a,"DIV",{class:!0});var s=D(i);d&&d.l(s),n=Q(s),r=I(s,"DIV",{class:!0});var c=D(r);for(let _=0;_<o.length;_+=1)o[_].l(c);c.forEach(w),s.forEach(w),this.h()},h(){y(r,"class","notes svelte-1aci5g5"),y(i,"class","instrument svelte-1aci5g5"),z(i,"muted",t[3][t[1]]==="off"),V(i,"height",`${t[2]}px`)},m(a,s){N(a,i,s),d&&d.m(i,null),E(i,n),E(i,r);for(let c=0;c<o.length;c+=1)o[c].m(r,null);u=!0,m||(f=[he(i,"click",t[11]),he(i,"keydown",t[12])],m=!0)},p(a,[s]){a[4][a[1]]==="on"?d?s&18&&L(d,1):(d=Gt(),d.c(),L(d,1),d.m(i,n)):d&&(Ee(),R(d,1,1,()=>{d=null}),Fe()),s&1063&&(g=a[0],Ee(),o=Jt(o,s,e,1,a,g,l,r,zt,Ht,null,Ft),Fe()),(!u||s&10)&&z(i,"muted",a[3][a[1]]==="off"),s&4&&V(i,"height",`${a[2]}px`)},i(a){if(!u){L(d);for(let s=0;s<g.length;s+=1)L(o[s]);u=!0}},o(a){R(d);for(let s=0;s<o.length;s+=1)R(o[s]);u=!1},d(a){a&&w(i),d&&d.d();for(let s=0;s<o.length;s+=1)o[s].d();m=!1,Dt(f)}}}function bi(t,i,n){let r,o,l,{data:u}=i,{id:m}=i,{height:f}=i;const{getXScale:d,getInstrumentToggles:g,getGridToggles:e}=$e("song"),a=d();ee(t,a,k=>n(5,l=k));const s=g();ee(t,s,k=>n(3,r=k));const c=e();ee(t,c,k=>n(4,o=k));const _=k=>{qe(s,r[k]=r[k]==="on"?"off":"on",r)},p={snare:"#96c8d7",hihat:"gold",kick:"#550e5c"},h=()=>_(m),v=()=>_(m);return t.$$set=k=>{"data"in k&&n(0,u=k.data),"id"in k&&n(1,m=k.id),"height"in k&&n(2,f=k.height)},[u,m,f,r,o,l,a,s,c,_,p,h,v]}class wi extends Z{constructor(i){super(),K(this,i,bi,ki,$,{data:0,id:1,height:2})}}function Pt(t,i,n){const r=t.slice();return r[22]=i[n],r[24]=n,r}function Nt(t){let i,n,r=Object.keys(t[0]),o=[];for(let u=0;u<r.length;u+=1)o[u]=Ot(Pt(t,r,u));const l=u=>R(o[u],1,1,()=>{o[u]=null});return{c(){for(let u=0;u<o.length;u+=1)o[u].c();i=ue()},l(u){for(let m=0;m<o.length;m+=1)o[m].l(u);i=ue()},m(u,m){for(let f=0;f<o.length;f+=1)o[f].m(u,m);N(u,i,m),n=!0},p(u,m){if(m&5){r=Object.keys(u[0]);let f;for(f=0;f<r.length;f+=1){const d=Pt(u,r,f);o[f]?(o[f].p(d,m),L(o[f],1)):(o[f]=Ot(d),o[f].c(),L(o[f],1),o[f].m(i.parentNode,i))}for(Ee(),f=r.length;f<o.length;f+=1)l(f);Fe()}},i(u){if(!n){for(let m=0;m<r.length;m+=1)L(o[m]);n=!0}},o(u){o=o.filter(Boolean);for(let m=0;m<o.length;m+=1)R(o[m]);n=!1},d(u){Le(o,u),u&&w(i)}}}function Ot(t){let i,n;return i=new wi({props:{data:t[0][t[22]],id:t[22],height:t[2]}}),{c(){ie(i.$$.fragment)},l(r){re(i.$$.fragment,r)},m(r,o){ae(i,r,o),n=!0},p(r,o){const l={};o&1&&(l.data=r[0][r[22]]),o&1&&(l.id=r[22]),o&4&&(l.height=r[2]),i.$set(l)},i(r){n||(L(i.$$.fragment,r),n=!0)},o(r){R(i.$$.fragment,r),n=!1},d(r){oe(i,r)}}}function Ti(t){let i,n,r,o,l,u,m,f,d,g,e,a,s=t[1]&&Nt(t);return{c(){i=S("div"),n=S("div"),s&&s.c(),o=Y(),l=S("button"),u=de("play"),m=Y(),f=S("button"),d=de("pause"),this.h()},l(c){i=I(c,"DIV",{class:!0});var _=D(i);n=I(_,"DIV",{class:!0});var p=D(n);s&&s.l(p),p.forEach(w),_.forEach(w),o=Q(c),l=I(c,"BUTTON",{});var h=D(l);u=fe(h,"play"),h.forEach(w),m=Q(c),f=I(c,"BUTTON",{});var v=D(f);d=fe(v,"pause"),v.forEach(w),this.h()},h(){y(n,"class","instruments svelte-1cqahtz"),Ce(()=>t[13].call(n)),y(i,"class","container svelte-1cqahtz"),V(i,"height",`${Qt}px`)},m(c,_){N(c,i,_),E(i,n),s&&s.m(n,null),r=Ut(n,t[13].bind(n)),N(c,o,_),N(c,l,_),E(l,u),N(c,m,_),N(c,f,_),E(f,d),g=!0,e||(a=[he(l,"click",t[5]),he(f,"click",t[6])],e=!0)},p(c,[_]){c[1]?s?(s.p(c,_),_&2&&L(s,1)):(s=Nt(c),s.c(),L(s,1),s.m(n,null)):s&&(Ee(),R(s,1,1,()=>{s=null}),Fe())},i(c){g||(L(s),g=!0)},o(c){R(s),g=!1},d(c){c&&w(i),s&&s.d(),r(),c&&w(o),c&&w(l),c&&w(m),c&&w(f),e=!1,Dt(a)}}}let Ai=2;const Qt=500;function xi(t,i,n){let r,o,l,u,m,{id:f}=i,{data:d}=i,{audio:g}=i,{beatsPerRotation:e}=i;je("song",{beatsPerRotation:e,division:Ai,getT:()=>a,getXScale:()=>s,getInstrumentToggles:()=>p,getGridToggles:()=>h,getCycleDuration:()=>r});const a=Te(0);ee(t,a,b=>n(17,m=b));const s=Te(void 0);ee(t,s,b=>n(16,u=b));let c,_=0;const p=Te({hihat:"on",snare:"on",kick:"on"}),h=Te({hihat:"off",snare:"off",kick:"off"});let v,k=()=>0;g.on("load",()=>{F()});const F=()=>{n(11,k=De().domain([0,g.duration()*1e3]).range([0,e]))};g.on("end",()=>{T()});const T=()=>{g.play(),c=requestAnimationFrame(O)},B=()=>{cancelAnimationFrame(c),g.pause()},O=()=>{n(10,_=g.seek()),c=requestAnimationFrame(O)};function P(){v=this.clientWidth,n(1,v)}return t.$$set=b=>{"id"in b&&n(7,f=b.id),"data"in b&&n(0,d=b.data),"audio"in b&&n(8,g=b.audio),"beatsPerRotation"in b&&n(9,e=b.beatsPerRotation)},t.$$.update=()=>{t.$$.dirty&128&&F(),t.$$.dirty&256&&(r=g.duration()*1e3),t.$$.dirty&3072&&qe(a,m=_===0?0:k(_*1e3),m),t.$$.dirty&514&&qe(s,u=De().domain([0,e]).range([0,v]),u),t.$$.dirty&1&&n(12,o=Yt().domain(Object.keys(d)).range([0,Qt]).padding(.45)),t.$$.dirty&4096&&n(2,l=o.bandwidth())},[d,v,l,a,s,T,B,f,g,e,_,k,o,P]}class Mi extends Z{constructor(i){super(),K(this,i,xi,Ti,$,{id:7,data:0,audio:8,beatsPerRotation:9})}}const Si={keySignatures:[{key:"C",scale:"major",ticks:0}],meta:[],name:"Beat Machine",ppq:480,tempos:[{bpm:107.99991360006912,ticks:0},{bpm:107.99991360006912,ticks:1920},{bpm:107.99991360006912,ticks:5280}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}]},Ii=[{channel:0,controlChanges:{},pitchBends:[],instrument:{family:"piano",number:0,name:"acoustic grand piano"},name:"Beat Machine",notes:[{duration:.11574083333333335,durationTicks:100,midi:36,name:"C2",ticks:0,time:0,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:0,time:0,velocity:.7716535433070866},{duration:.16435198333333328,durationTicks:142,midi:36,name:"C2",ticks:280,time:.3240743333333334,velocity:.7716535433070866},{duration:.1689816166666666,durationTicks:146,midi:42,name:"F#2",ticks:280,time:.3240743333333334,velocity:.7716535433070866},{duration:.15277790000000002,durationTicks:132,midi:38,name:"D2",ticks:549,time:.6354171750000001,velocity:.7716535433070866},{duration:.16898161666666678,durationTicks:146,midi:42,name:"F#2",ticks:549,time:.6354171750000001,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:840,time:.9722230000000001,velocity:.7716535433070866},{duration:.16782420833333322,durationTicks:145,midi:42,name:"F#2",ticks:1113,time:1.2881954750000002,velocity:.7716535433070866},{duration:.11574083333333318,durationTicks:100,midi:36,name:"C2",ticks:1124,time:1.3009269666666667,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:1400,time:1.6203716666666668,velocity:.7716535433070866},{duration:.11574083333333318,durationTicks:100,midi:36,name:"C2",ticks:1420,time:1.6435198333333336,velocity:.7716535433070866},{duration:.09722229999999987,durationTicks:84,midi:36,name:"C2",ticks:1600,time:1.8518533333333336,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:1680,time:1.9444460000000001,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:1940,time:2.245372166666667,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:2220,time:2.5694465,velocity:.7716535433070866},{duration:.11574083333333363,durationTicks:100,midi:36,name:"C2",ticks:2240,time:2.592594666666667,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:2500,time:2.8935208333333335,velocity:.7716535433070866},{duration:.16435198333333334,durationTicks:142,midi:36,name:"C2",ticks:2520,time:2.916669,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:2769,time:3.2048636750000004,velocity:.7716535433070866},{duration:.11921305833333351,durationTicks:103,midi:38,name:"D2",ticks:2780,time:3.217595166666667,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:3060,time:3.5416695000000002,velocity:.7716535433070866},{duration:.16782420833333367,durationTicks:145,midi:42,name:"F#2",ticks:3333,time:3.8576419750000004,velocity:.7716535433070866},{duration:.11574083333333407,durationTicks:100,midi:36,name:"C2",ticks:3364,time:3.8935216333333336,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:3620,time:4.189818166666667,velocity:.7716535433070866},{duration:.11574083333333363,durationTicks:100,midi:36,name:"C2",ticks:3660,time:4.2361145,velocity:.7716535433070866},{duration:.09722229999999943,durationTicks:84,midi:36,name:"C2",ticks:3840,time:4.444448,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:3900,time:4.513892500000001,velocity:.7716535433070866},{duration:.16898161666666667,durationTicks:146,midi:42,name:"F#2",ticks:4160,time:4.8148186666666675,velocity:.7716535433070866}],endOfTrackTicks:5760}],Ei={header:Si,tracks:Ii},Fi={keySignatures:[{key:"C",scale:"major",ticks:0}],meta:[],name:"kick",ppq:480,tempos:[{bpm:120,ticks:0}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}]},Gi=[{channel:0,controlChanges:{},pitchBends:[],instrument:{family:"piano",number:0,name:"acoustic grand piano"},name:"kick",notes:[{duration:.09270833333333334,durationTicks:89,midi:45,name:"A2",ticks:0,time:0,velocity:.6929133858267716},{duration:.11145833333333334,durationTicks:107,midi:55,name:"G3",ticks:0,time:0,velocity:.6929133858267716},{duration:.11875000000000002,durationTicks:114,midi:45,name:"A2",ticks:420,time:.4375,velocity:.6929133858267716},{duration:.10729166666666667,durationTicks:103,midi:52,name:"E3",ticks:647,time:.6739583333333333,velocity:.6929133858267716},{duration:.09270833333333328,durationTicks:89,midi:45,name:"A2",ticks:720,time:.75,velocity:.6929133858267716},{duration:.10729166666666656,durationTicks:103,midi:45,name:"A2",ticks:1e3,time:1.0416666666666667,velocity:.6929133858267716},{duration:.08437499999999987,durationTicks:81,midi:45,name:"A2",ticks:1334,time:1.3895833333333334,velocity:.6929133858267716},{duration:.13854166666666656,durationTicks:133,midi:45,name:"A2",ticks:1680,time:1.75,velocity:.6929133858267716},{duration:.1708333333333334,durationTicks:164,midi:52,name:"E3",ticks:1920,time:2,velocity:.6929133858267716},{duration:.08437500000000009,durationTicks:81,midi:45,name:"A2",ticks:1980,time:2.0625,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:2320,time:2.4166666666666665,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:2551,time:2.6572916666666666,velocity:.6929133858267716},{duration:.1791666666666667,durationTicks:172,midi:55,name:"G3",ticks:2571,time:2.678125,velocity:.6929133858267716},{duration:.11875000000000036,durationTicks:114,midi:45,name:"A2",ticks:2920,time:3.0416666666666665,velocity:.6929133858267716},{duration:.1552083333333334,durationTicks:149,midi:52,name:"E3",ticks:3175,time:3.3072916666666665,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:3220,time:3.3541666666666665,velocity:.6929133858267716},{duration:.10729166666666634,durationTicks:103,midi:45,name:"A2",ticks:3500,time:3.6458333333333335,velocity:.6929133858267716},{duration:.08437500000000009,durationTicks:81,midi:45,name:"A2",ticks:3834,time:3.99375,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:4180,time:4.354166666666667,velocity:.6929133858267716},{duration:.13229166666666625,durationTicks:127,midi:52,name:"E3",ticks:4440,time:4.625,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:4480,time:4.666666666666667,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:4820,time:5.020833333333333,velocity:.6929133858267716},{duration:.1552083333333334,durationTicks:149,midi:55,name:"G3",ticks:5055,time:5.265625,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:5100,time:5.3125,velocity:.6929133858267716},{duration:.11874999999999947,durationTicks:114,midi:45,name:"A2",ticks:5470,time:5.697916666666667,velocity:.6929133858267716},{duration:.09583333333333321,durationTicks:92,midi:52,name:"E3",ticks:5714,time:5.952083333333333,velocity:.6929133858267716},{duration:.09270833333333339,durationTicks:89,midi:45,name:"A2",ticks:5770,time:6.010416666666667,velocity:.6929133858267716},{duration:.10729166666666679,durationTicks:103,midi:45,name:"A2",ticks:6050,time:6.302083333333333,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:6384,time:6.65,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:6730,time:7.010416666666667,velocity:.6929133858267716},{duration:.1552083333333334,durationTicks:149,midi:52,name:"E3",ticks:6980,time:7.270833333333333,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:7030,time:7.322916666666667,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:7370,time:7.677083333333333,velocity:.6929133858267716},{duration:.0927083333333325,durationTicks:89,midi:45,name:"A2",ticks:7601,time:7.917708333333334,velocity:.6929133858267716},{duration:.13437500000000036,durationTicks:129,midi:55,name:"G3",ticks:7626,time:7.94375,velocity:.6929133858267716},{duration:.11874999999999858,durationTicks:114,midi:45,name:"A2",ticks:7970,time:8.302083333333334,velocity:.6929133858267716},{duration:.14583333333333215,durationTicks:140,midi:52,name:"E3",ticks:8240,time:8.583333333333334,velocity:.6929133858267716},{duration:.0927083333333325,durationTicks:89,midi:45,name:"A2",ticks:8270,time:8.614583333333334,velocity:.6929133858267716},{duration:.10729166666666679,durationTicks:103,midi:45,name:"A2",ticks:8550,time:8.90625,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:8884,time:9.254166666666666,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:9230,time:9.614583333333334,velocity:.6929133858267716},{duration:.1437500000000007,durationTicks:138,midi:52,name:"E3",ticks:9507,time:9.903125,velocity:.6929133858267716},{duration:.08437499999999964,durationTicks:81,midi:45,name:"A2",ticks:9530,time:9.927083333333334,velocity:.6929133858267716},{duration:.14374999999999893,durationTicks:138,midi:52,name:"E3",ticks:9740,time:10.145833333333334,velocity:.6929133858267716},{duration:.13854166666666679,durationTicks:133,midi:45,name:"A2",ticks:9870,time:10.28125,velocity:.6929133858267716}],endOfTrackTicks:10200}],Hi={header:Fi,tracks:Gi},Pi={keySignatures:[{key:"C",scale:"major",ticks:0}],meta:[],name:"Beat Machine",ppq:480,tempos:[{bpm:183.99997546666995,ticks:0}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}]},Ni=[{channel:0,controlChanges:{},pitchBends:[],instrument:{family:"piano",number:0,name:"acoustic grand piano"},name:"Beat Machine",notes:[{duration:.09986414375,durationTicks:147,midi:44,name:"G#2",ticks:0,time:0,velocity:.7716535433070866},{duration:.13790762708333332,durationTicks:203,midi:53,name:"F3",ticks:0,time:0,velocity:.7716535433070866},{duration:.09986414375,durationTicks:147,midi:44,name:"G#2",ticks:240,time:.16304349999999998,velocity:.7716535433070866},{duration:.07744566250000001,durationTicks:114,midi:44,name:"G#2",ticks:480,time:.32608699999999996,velocity:.7716535433070866},{duration:.11413045,durationTicks:168,midi:52,name:"E3",ticks:480,time:.32608699999999996,velocity:.7716535433070866},{duration:.11480979791666668,durationTicks:169,midi:44,name:"G#2",ticks:720,time:.4891304999999999,velocity:.7716535433070866},{duration:.13858697500000006,durationTicks:204,midi:53,name:"F3",ticks:720,time:.4891304999999999,velocity:.7716535433070866},{duration:.06793479166666672,durationTicks:100,midi:44,name:"G#2",ticks:960,time:.6521739999999999,velocity:.7716535433070866},{duration:.08763588124999988,durationTicks:129,midi:44,name:"G#2",ticks:1200,time:.8152174999999999,velocity:.7716535433070866},{duration:.15353262916666655,durationTicks:226,midi:53,name:"F3",ticks:1200,time:.8152174999999999,velocity:.7716535433070866},{duration:.09986414375000008,durationTicks:147,midi:44,name:"G#2",ticks:1440,time:.9782609999999998,velocity:.7716535433070866},{duration:.11073371041666658,durationTicks:163,midi:52,name:"E3",ticks:1440,time:.9782609999999998,velocity:.7716535433070866},{duration:.10054349166666654,durationTicks:148,midi:44,name:"G#2",ticks:1680,time:1.1413045,velocity:.7716535433070866},{duration:.11277175416666663,durationTicks:166,midi:44,name:"G#2",ticks:1920,time:1.3043479999999998,velocity:.7716535433070866},{duration:.1399456708333331,durationTicks:206,midi:53,name:"F3",ticks:1920,time:1.3043479999999998,velocity:.7716535433070866},{duration:.10054349166666676,durationTicks:148,midi:44,name:"G#2",ticks:2160,time:1.4673914999999997,velocity:.7716535433070866},{duration:.07472827083333344,durationTicks:110,midi:44,name:"G#2",ticks:2400,time:1.6304349999999999,velocity:.7716535433070866},{duration:.11073371041666658,durationTicks:163,midi:52,name:"E3",ticks:2400,time:1.6304349999999999,velocity:.7716535433070866},{duration:.1216032770833333,durationTicks:179,midi:44,name:"G#2",ticks:2640,time:1.7934784999999998,velocity:.7716535433070866},{duration:.13586958333333343,durationTicks:200,midi:53,name:"F3",ticks:2640,time:1.7934784999999998,velocity:.7716535433070866},{duration:.11480979791666668,durationTicks:169,midi:44,name:"G#2",ticks:2880,time:1.9565219999999997,velocity:.7716535433070866},{duration:.11345110208333331,durationTicks:167,midi:44,name:"G#2",ticks:3120,time:2.1195654999999998,velocity:.7716535433070866},{duration:.11480979791666668,durationTicks:169,midi:53,name:"F3",ticks:3120,time:2.1195654999999998,velocity:.7716535433070866},{duration:.08763588124999977,durationTicks:129,midi:44,name:"G#2",ticks:3360,time:2.282609,velocity:.7716535433070866},{duration:.1501358895833329,durationTicks:221,midi:52,name:"E3",ticks:3360,time:2.282609,velocity:.7716535433070866},{duration:.10054349166666698,durationTicks:148,midi:44,name:"G#2",ticks:3600,time:2.4456524999999996,velocity:.7716535433070866},{duration:.07676631458333372,durationTicks:113,midi:44,name:"G#2",ticks:3840,time:2.6086959999999997,velocity:.7716535433070866},{duration:.15013588958333335,durationTicks:221,midi:53,name:"F3",ticks:3840,time:2.6086959999999997,velocity:.7716535433070866},{duration:.0638587041666665,durationTicks:94,midi:44,name:"G#2",ticks:4080,time:2.7717395,velocity:.7716535433070866},{duration:.08831522916666712,durationTicks:130,midi:44,name:"G#2",ticks:4320,time:2.9347829999999995,velocity:.7716535433070866},{duration:.11209240624999994,durationTicks:165,midi:52,name:"E3",ticks:4320,time:2.9347829999999995,velocity:.7716535433070866},{duration:.09986414375000008,durationTicks:147,midi:44,name:"G#2",ticks:4560,time:3.0978264999999996,velocity:.7716535433070866},{duration:.11345110208333331,durationTicks:167,midi:53,name:"F3",ticks:4560,time:3.0978264999999996,velocity:.7716535433070866},{duration:.07336957499999963,durationTicks:108,midi:44,name:"G#2",ticks:4800,time:3.2608699999999997,velocity:.7716535433070866},{duration:.11209240625000039,durationTicks:165,midi:44,name:"G#2",ticks:5040,time:3.4239134999999994,velocity:.7716535433070866},{duration:.11480979791666668,durationTicks:169,midi:53,name:"F3",ticks:5040,time:3.4239134999999994,velocity:.7716535433070866},{duration:.09239131666666678,durationTicks:136,midi:44,name:"G#2",ticks:5280,time:3.5869569999999995,velocity:.7716535433070866},{duration:.15149458541666672,durationTicks:223,midi:52,name:"E3",ticks:5280,time:3.5869569999999995,velocity:.7716535433070866},{duration:.07336957499999963,durationTicks:108,midi:44,name:"G#2",ticks:5520,time:3.7500004999999996,velocity:.7716535433070866},{duration:.07404892291666654,durationTicks:109,midi:44,name:"G#2",ticks:5760,time:3.9130439999999993,velocity:.7716535433070866},{duration:.14130436666666668,durationTicks:208,midi:53,name:"F3",ticks:5760,time:3.9130439999999993,velocity:.7716535433070866},{duration:.07676631458333283,durationTicks:113,midi:44,name:"G#2",ticks:6e3,time:4.0760875,velocity:.7716535433070866},{duration:.08763588124999977,durationTicks:129,midi:44,name:"G#2",ticks:6240,time:4.2391309999999995,velocity:.7716535433070866},{duration:.14877719374999998,durationTicks:219,midi:52,name:"E3",ticks:6240,time:4.2391309999999995,velocity:.7716535433070866},{duration:.07404892291666698,durationTicks:109,midi:44,name:"G#2",ticks:6480,time:4.402174499999999,velocity:.7716535433070866},{duration:.11277175416666729,durationTicks:166,midi:53,name:"F3",ticks:6480,time:4.402174499999999,velocity:.7716535433070866},{duration:.09171196874999943,durationTicks:135,midi:44,name:"G#2",ticks:6720,time:4.565218,velocity:.7716535433070866},{duration:.07336957500000008,durationTicks:108,midi:44,name:"G#2",ticks:6960,time:4.7282614999999995,velocity:.7716535433070866},{duration:.12092392916666661,durationTicks:178,midi:53,name:"F3",ticks:6960,time:4.7282614999999995,velocity:.7716535433070866},{duration:.08899457708333358,durationTicks:131,midi:44,name:"G#2",ticks:7200,time:4.891304999999999,velocity:.7716535433070866},{duration:.1419837145833336,durationTicks:209,midi:52,name:"E3",ticks:7200,time:4.891304999999999,velocity:.7716535433070866},{duration:.09171196874999943,durationTicks:135,midi:44,name:"G#2",ticks:7440,time:5.0543485,velocity:.7716535433070866}],endOfTrackTicks:7680}],Oi={header:Pi,tracks:Ni};function Bi(t){let i,n,r,o,l,u=t[1].name+"",m,f,d,g;function e(s){t[3](s)}let a={label:"select song",options:t[2]};return t[0]!==void 0&&(a.value=t[0]),n=new cn({props:a}),en.push(()=>tn(n,"value",e)),d=new Mi({props:{id:t[1].value,audio:t[1].audio,data:t[1].data,beatsPerRotation:t[1].beats}}),{c(){i=S("div"),ie(n.$$.fragment),o=Y(),l=S("h3"),m=de(u),f=Y(),ie(d.$$.fragment),this.h()},l(s){i=I(s,"DIV",{class:!0});var c=D(i);re(n.$$.fragment,c),o=Q(c),l=I(c,"H3",{style:!0});var _=D(l);m=fe(_,u),_.forEach(w),c.forEach(w),f=Q(s),re(d.$$.fragment,s),this.h()},h(){V(l,"margin-top","3em"),y(i,"class","select svelte-fxaw25")},m(s,c){N(s,i,c),ae(n,i,null),E(i,o),E(i,l),E(l,m),N(s,f,c),ae(d,s,c),g=!0},p(s,[c]){const _={};!r&&c&1&&(r=!0,_.value=s[0],nn(()=>r=!1)),n.$set(_),(!g||c&2)&&u!==(u=s[1].name+"")&&Ke(m,u);const p={};c&2&&(p.id=s[1].value),c&2&&(p.audio=s[1].audio),c&2&&(p.data=s[1].data),c&2&&(p.beatsPerRotation=s[1].beats),d.$set(p)},i(s){g||(L(n.$$.fragment,s),L(d.$$.fragment,s),g=!0)},o(s){R(n.$$.fragment,s),R(d.$$.fragment,s),g=!1},d(s){s&&w(i),oe(n),s&&w(f),oe(d,s)}}}function Di(t,i,n){let r;const o=(_,p)=>pe(p).map(h=>[h,h+_]).flat(),l=(_,p,h,v)=>{const k=p.header.tempos[0].bpm,F=p.header.ppq,T=6e4/k/F,B=_==="kamaal"?4100:p.tracks[0].endOfTrackTicks,O=De().domain([0,T*B/1e3]).range([0,h]),P=p.tracks[0].notes.map(b=>({beat:O(b.time),instrument:b.midi}));return{hihat:P.filter(b=>b.instrument===v.hihat).map(b=>b.beat),snare:P.filter(b=>b.instrument===v.snare).map(b=>b.beat),kick:P.filter(b=>b.instrument===v.kick).map(b=>b.beat)}};pe(0,4,.5),o(2/3,4),o(3/5,4),o(4/7,4);const u=new te.Howl({src:["assets/sound/sincerity_audio.mp3"]}),m=new te.Howl({src:["assets/sound/kamaal_audio.mp3"]}),f=new te.Howl({src:["assets/sound/light_switch.mp3"]}),d=l("sincerity",Hi,16,{hihat:45,snare:52,kick:55}),g=l("kamaal",Ei,8,{hihat:42,snare:38,kick:36}),e=l("lightSwitch",Oi,16,{hihat:44,snare:52,kick:53}),a=[{value:"kamaal",name:"Kamaal",data:g,audio:m,beats:8},{value:"sincerity",name:"Sincerity is Scary",data:d,audio:u,beats:16},{value:"lightSwitch",name:"Light Switch",data:e,audio:f,beats:16}];let s="lightSwitch";function c(_){s=_,n(0,s)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,r=a.find(_=>_.value===s))},[s,r,a,c]}class Li extends Z{constructor(i){super(),K(this,i,Di,Bi,$,{})}}const Ci="The math and the magic of wonky grooves",Ri="Visualizing wonky grooves",Vi="By <a href=https://pudding.cool/author/michelle-mcghee/ target=_blank>Michelle McGhee</a>",qi=[{type:"text",value:"Youre the drummer. The backbone of the band. Your job is to keep a steady rhythm. Here, try it."},{type:"text",value:"[imagine] You try to tap a rhythm on your keyboard."},{type:"text",value:"Nice job. Sometimes you were a <span class=off>little late</span> or a <span class=off>little early</span>."},{type:"text",value:"With quantizing, we can snap it all into perfect place."},{type:"text",value:"Now listen to this (TBD, but <a href=https://www.youtube.com/watch?v=YCQHs79C_a8&ab_channel=NodtomyBEats target=_blank>example</a>)."},{type:"text",value:"The beat is wonky, its irregular. some beats are *slightly* late, others are early. Its not exactly perfect. But its groovy. Its laid back, sort of off-kilter, which some people love. It shows up everywhere in popular music if you listen closely. Why does being off the grid, out of time, the rhythmic equivalent of playing out of tune, work?"},{type:"text",value:"This is a beat made by the hit-less, yet revered producer JDilla. Dan Charnas wrote a whole <a href=https://dillati.me/ target=_blank>book</a> about it that I just read. It talks about JDillas life and his enormous contribution to music - a brand new way of conceiving of time. But even after reading it, I wanted visuals I could see, hear, and play with (at the same time) to really get an understanding of how Dilla changed music."}],ji=[{type:"text",value:"<strong>Part 1: Straight</strong>"},{type:"text",value:"The beat you made, once quantized, is called <strong>straight</strong>. Press play to hear it."},{type:"text",value:"Now lets bring in the other parts of the drums. In this visual, every little rectangle is a note played by one of the 3 parts of the drum kit: hi-hat, snare, and kick drum. The full bar represents 4 beats, or 1 measure. A straight groove has evenly spaced beats."},{type:"text",value:"Heres a song with a straight groove (TBD, but <a href=https://www.youtube.com/watch?v=03XCQCS_w4M target=_blank>example</a>. Will show on viz as it plays)"}],Xi=[{type:"text",value:"<strong>Part 2: Swing</strong>"},{type:"text",value:"Sometimes straight can be a little boring. If we move every other note on the hihat a little bit later, we get whats called <strong>swing</strong>. This is very common in jazz."},{type:"text",value:"Heres a song with a swung groove (TBD, but <a href=https://www.youtube.com/watch?v=p9JezItjWIU&feature=youtu.be&ab_channel=Manosproposes target=_blank>example</a>. Will show it on viz as it plays)"},{type:"text",value:"Swing can get really interesting. You can delay that hihat note different amounts and get very different feels. Listen to this song [show on viz]. Every other hihat is late, but not as late as the last example."},{type:"text",value:"[viz] slider where you can change the swing percentage"}],Wi=[{type:"text",value:"<strong>Part 3: Dilla</strong>"},{type:"text",value:"Straight and swung used to be the only two ways. A Dilla timefeel is one that combines straight, swung, and shifted elements to create an all-new funky timefeel."},{type:"text",value:"Lets take your groove and Dilla-ify it."},{type:"text",value:"1) The kick is straight. 2) The hihat is swung slightly. 3) The snare is shifted slightly early to create a flam against the hihat."},{type:"text",value:"Each instrument is on their own grid, and the way they interplay is really satisfying."},{type:"text",value:"Heres another JDilla groove."},{type:"text",value:"Heres a song by [modern artist] with a Dilla groove (<a href=https://www.youtube.com/watch?t=41&v=1K93ioXL63c&feature=youtu.be target=_blank>example</a>."}],Bt={hed:Ci,dek:Ri,byline:Vi,intro:qi,straight:ji,swing:Xi,dilla:Wi};function Yi(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.1.0"),console.log("build: 2023-04-10-17:22"),console.log("--- --- --- --- --- ---")}function Qi(t){let i,n,r,o;return i=new sn({props:{title:t[1],description:t[2],url:t[3],preloadFont:t[0],keywords:t[4]}}),r=new Li({}),{c(){ie(i.$$.fragment),n=Y(),ie(r.$$.fragment)},l(l){re(i.$$.fragment,l),n=Q(l),re(r.$$.fragment,l)},m(l,u){ae(i,l,u),N(l,n,u),ae(r,l,u),o=!0},p:ce,i(l){o||(L(i.$$.fragment,l),L(r.$$.fragment,l),o=!0)},o(l){R(i.$$.fragment,l),R(r.$$.fragment,l),o=!1},d(l){oe(i,l),l&&w(n),oe(r,l)}}}function Zi(t,i,n){let{data:r}=i;Yi();const o=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2","https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2"],{title:l,description:u,url:m,keywords:f}=Bt;return je("copy",Bt),je("data",r.data),t.$$set=d=>{"data"in d&&n(5,r=d.data)},[o,l,u,m,f,r]}class zi extends Z{constructor(i){super(),K(this,i,Zi,Qi,$,{data:5})}}export{zi as default};

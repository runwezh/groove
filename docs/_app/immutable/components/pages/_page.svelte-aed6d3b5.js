import{S as pe,i as ge,s as de,k as D,e as ae,J as Hn,l as L,h as A,n as y,D as N,C as ue,K as Be,b as F,L as Rt,M as Fn,N as $n,O as Dn,P as ye,Q as be,m as j,R as nt,T as kn,I as Ee,a as Z,c as Y,f as V,g as ct,d as dt,t as K,x as U,y as z,z as ee,A as te,q as X,r as Q,U as je,u as Ae,v as xe,V as Me,p as St,W as Se,X as Tn,Y as vt,Z as Ln,_ as Ht,$ as Bn}from"../../chunks/index-c41b8c61.js";import{w as xn,r as Cn}from"../../chunks/index-945bb77f.js";import{d as Gn}from"../../chunks/transform-5bf7892f.js";function Ft(e,r,n){const i=e.slice();return i[5]=r[n],i}function $t(e){let r,n;return{c(){r=D("link"),this.h()},l(i){r=L(i,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){y(r,"rel","preload"),y(r,"href",n=e[5]),y(r,"as","font"),y(r,"type","font/woff2"),y(r,"crossorigin","")},m(i,a){F(i,r,a)},p(i,a){a&16&&n!==(n=i[5])&&y(r,"href",n)},d(i){i&&A(r)}}}function qn(e){let r,n,i,a,l,s,d,c,f,m,t,o,u,_,g,v,h,p,w,S,I,E,$,B,P,q;document.title=r=e[0];let M=e[4],R=[];for(let b=0;b<M.length;b+=1)R[b]=$t(Ft(e,M,b));return{c(){n=D("meta"),i=D("meta"),a=D("meta"),l=D("meta"),s=D("meta"),d=D("meta"),c=D("meta"),f=D("meta"),m=D("meta"),t=D("meta"),u=D("meta"),_=D("meta"),g=D("meta"),v=D("meta"),h=D("meta"),p=D("meta"),w=D("meta"),S=D("meta"),I=D("meta"),$=D("meta"),B=D("link");for(let b=0;b<R.length;b+=1)R[b].c();q=ae(),this.h()},l(b){const k=Hn("svelte-1htu80s",document.head);n=L(k,"META",{name:!0,content:!0}),i=L(k,"META",{name:!0,content:!0}),a=L(k,"META",{name:!0,content:!0}),l=L(k,"META",{property:!0,content:!0}),s=L(k,"META",{property:!0,content:!0}),d=L(k,"META",{property:!0,content:!0}),c=L(k,"META",{property:!0,content:!0}),f=L(k,"META",{property:!0,content:!0}),m=L(k,"META",{property:!0,content:!0}),t=L(k,"META",{property:!0,content:!0}),u=L(k,"META",{property:!0,content:!0}),_=L(k,"META",{property:!0,content:!0}),g=L(k,"META",{property:!0,content:!0}),v=L(k,"META",{name:!0,content:!0}),h=L(k,"META",{name:!0,content:!0}),p=L(k,"META",{name:!0,content:!0}),w=L(k,"META",{name:!0,content:!0}),S=L(k,"META",{name:!0,content:!0}),I=L(k,"META",{name:!0,content:!0}),$=L(k,"META",{name:!0,content:!0}),B=L(k,"LINK",{rel:!0,href:!0});for(let O=0;O<R.length;O+=1)R[O].l(k);q=ae(),k.forEach(A),this.h()},h(){y(n,"name","description"),y(n,"content",e[1]),y(i,"name","author"),y(i,"content","The Pudding"),y(a,"name","news_keywords"),y(a,"content",e[3]),y(l,"property","og:title"),y(l,"content",e[0]),y(s,"property","og:site_name"),y(s,"content","The Pudding"),y(d,"property","og:url"),y(d,"content",e[2]),y(c,"property","og:description"),y(c,"content",e[1]),y(f,"property","og:type"),y(f,"content","article"),y(m,"property","og:locale"),y(m,"content","en_US"),y(t,"property","og:image"),y(t,"content",o=e[2]+"/assets/social-facebook.jpg"),y(u,"property","og:image:type"),y(u,"content","image/jpeg"),y(_,"property","og:image:width"),y(_,"content","1200"),y(g,"property","og:image:height"),y(g,"content","600"),y(v,"name","twitter:card"),y(v,"content","summary_large_image"),y(h,"name","twitter:site"),y(h,"content","https://pudding.cool"),y(p,"name","twitter:creator"),y(p,"content","@puddingviz"),y(w,"name","twitter:title"),y(w,"content",e[0]),y(S,"name","twitter:description"),y(S,"content",e[1]),y(I,"name","twitter:image:src"),y(I,"content",E=e[2]+"/assets/social-twitter.jpg"),y($,"name","robots"),y($,"content","max-image-preview:large"),y(B,"rel","canonical"),y(B,"href",P=e[2]+"/")},m(b,k){N(document.head,n),N(document.head,i),N(document.head,a),N(document.head,l),N(document.head,s),N(document.head,d),N(document.head,c),N(document.head,f),N(document.head,m),N(document.head,t),N(document.head,u),N(document.head,_),N(document.head,g),N(document.head,v),N(document.head,h),N(document.head,p),N(document.head,w),N(document.head,S),N(document.head,I),N(document.head,$),N(document.head,B);for(let O=0;O<R.length;O+=1)R[O].m(document.head,null);N(document.head,q)},p(b,[k]){if(k&1&&r!==(r=b[0])&&(document.title=r),k&2&&y(n,"content",b[1]),k&8&&y(a,"content",b[3]),k&1&&y(l,"content",b[0]),k&4&&y(d,"content",b[2]),k&2&&y(c,"content",b[1]),k&4&&o!==(o=b[2]+"/assets/social-facebook.jpg")&&y(t,"content",o),k&1&&y(w,"content",b[0]),k&2&&y(S,"content",b[1]),k&4&&E!==(E=b[2]+"/assets/social-twitter.jpg")&&y(I,"content",E),k&4&&P!==(P=b[2]+"/")&&y(B,"href",P),k&16){M=b[4];let O;for(O=0;O<M.length;O+=1){const H=Ft(b,M,O);R[O]?R[O].p(H,k):(R[O]=$t(H),R[O].c(),R[O].m(q.parentNode,q))}for(;O<R.length;O+=1)R[O].d(1);R.length=M.length}},i:ue,o:ue,d(b){A(n),A(i),A(a),A(l),A(s),A(d),A(c),A(f),A(m),A(t),A(u),A(_),A(g),A(v),A(h),A(p),A(w),A(S),A(I),A($),A(B),Be(R,b),A(q)}}}function jn(e,r,n){let{title:i="Title TK"}=r,{description:a="Description TK"}=r,{url:l="https://pudding.cool"}=r,{keywords:s=""}=r,{preloadFont:d=[]}=r;return e.$$set=c=>{"title"in c&&n(0,i=c.title),"description"in c&&n(1,a=c.description),"url"in c&&n(2,l=c.url),"keywords"in c&&n(3,s=c.keywords),"preloadFont"in c&&n(4,d=c.preloadFont)},[i,a,l,s,d]}class Vn extends pe{constructor(r){super(),ge(this,r,jn,qn,de,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}var me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ze={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(e){(function(){var r=function(){this.init()};r.prototype={init:function(){var t=this||n;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator=typeof window<"u"&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var o=this||n;if(t=parseFloat(t),o.ctx||m(),typeof t<"u"&&t>=0&&t<=1){if(o._volume=t,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(t,n.ctx.currentTime);for(var u=0;u<o._howls.length;u++)if(!o._howls[u]._webAudio)for(var _=o._howls[u]._getSoundIds(),g=0;g<_.length;g++){var v=o._howls[u]._soundById(_[g]);v&&v._node&&(v._node.volume=v._volume*t)}return o}return o._volume},mute:function(t){var o=this||n;o.ctx||m(),o._muted=t,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(t?0:o._volume,n.ctx.currentTime);for(var u=0;u<o._howls.length;u++)if(!o._howls[u]._webAudio)for(var _=o._howls[u]._getSoundIds(),g=0;g<_.length;g++){var v=o._howls[u]._soundById(_[g]);v&&v._node&&(v._node.muted=t?!0:v._muted)}return o},stop:function(){for(var t=this||n,o=0;o<t._howls.length;o++)t._howls[o].stop();return t},unload:function(){for(var t=this||n,o=t._howls.length-1;o>=0;o--)t._howls[o].unload();return t.usingWebAudio&&t.ctx&&typeof t.ctx.close<"u"&&(t.ctx.close(),t.ctx=null,m()),t},codecs:function(t){return(this||n)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||n;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if(typeof Audio<"u")try{var o=new Audio;typeof o.oncanplaythrough>"u"&&(t._canPlayEvent="canplay")}catch{t.noAudio=!0}else t.noAudio=!0;try{var o=new Audio;o.muted&&(t.noAudio=!0)}catch{}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||n,o=null;try{o=typeof Audio<"u"?new Audio:null}catch{return t}if(!o||typeof o.canPlayType!="function")return t;var u=o.canPlayType("audio/mpeg;").replace(/^no$/,""),_=t._navigator?t._navigator.userAgent:"",g=_.match(/OPR\/([0-6].)/g),v=g&&parseInt(g[0].split("/")[1],10)<33,h=_.indexOf("Safari")!==-1&&_.indexOf("Chrome")===-1,p=_.match(/Version\/(.*?) /),w=h&&p&&parseInt(p[1],10)<15;return t._codecs={mp3:!!(!v&&(u||o.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!u,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(o.canPlayType('audio/wav; codecs="1"')||o.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(o.canPlayType("audio/x-m4b;")||o.canPlayType("audio/m4b;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!w&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!w&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||n;if(!(t._audioUnlocked||!t.ctx)){t._audioUnlocked=!1,t.autoUnlock=!1,!t._mobileUnloaded&&t.ctx.sampleRate!==44100&&(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var o=function(u){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var _=new Audio;_._unlocked=!0,t._releaseHtml5Audio(_)}catch{t.noAudio=!0;break}for(var g=0;g<t._howls.length;g++)if(!t._howls[g]._webAudio)for(var v=t._howls[g]._getSoundIds(),h=0;h<v.length;h++){var p=t._howls[g]._soundById(v[h]);p&&p._node&&!p._node._unlocked&&(p._node._unlocked=!0,p._node.load())}t._autoResume();var w=t.ctx.createBufferSource();w.buffer=t._scratchBuffer,w.connect(t.ctx.destination),typeof w.start>"u"?w.noteOn(0):w.start(0),typeof t.ctx.resume=="function"&&t.ctx.resume(),w.onended=function(){w.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0),document.removeEventListener("keydown",o,!0);for(var S=0;S<t._howls.length;S++)t._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),document.addEventListener("keydown",o,!0),t}},_obtainHtml5Audio:function(){var t=this||n;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var o=new Audio().play();return o&&typeof Promise<"u"&&(o instanceof Promise||typeof o.then=="function")&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var o=this||n;return t._unlocked&&o._html5AudioPool.push(t),o},_autoSuspend:function(){var t=this;if(!(!t.autoSuspend||!t.ctx||typeof t.ctx.suspend>"u"||!n.usingWebAudio)){for(var o=0;o<t._howls.length;o++)if(t._howls[o]._webAudio){for(var u=0;u<t._howls[o]._sounds.length;u++)if(!t._howls[o]._sounds[u]._paused)return t}return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var _=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(_,_)}},3e4),t}},_autoResume:function(){var t=this;if(!(!t.ctx||typeof t.ctx.resume>"u"||!n.usingWebAudio))return t.state==="running"&&t.ctx.state!=="interrupted"&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):t.state==="suspended"||t.state==="running"&&t.ctx.state==="interrupted"?(t.ctx.resume().then(function(){t.state="running";for(var o=0;o<t._howls.length;o++)t._howls[o]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):t.state==="suspending"&&(t._resumeAfterSuspend=!0),t}};var n=new r,i=function(t){var o=this;if(!t.src||t.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}o.init(t)};i.prototype={init:function(t){var o=this;return n.ctx||m(),o._autoplay=t.autoplay||!1,o._format=typeof t.format!="string"?t.format:[t.format],o._html5=t.html5||!1,o._muted=t.mute||!1,o._loop=t.loop||!1,o._pool=t.pool||5,o._preload=typeof t.preload=="boolean"||t.preload==="metadata"?t.preload:!0,o._rate=t.rate||1,o._sprite=t.sprite||{},o._src=typeof t.src!="string"?t.src:[t.src],o._volume=t.volume!==void 0?t.volume:1,o._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:t.xhr&&t.xhr.withCredentials?t.xhr.withCredentials:!1},o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=t.onend?[{fn:t.onend}]:[],o._onfade=t.onfade?[{fn:t.onfade}]:[],o._onload=t.onload?[{fn:t.onload}]:[],o._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],o._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],o._onpause=t.onpause?[{fn:t.onpause}]:[],o._onplay=t.onplay?[{fn:t.onplay}]:[],o._onstop=t.onstop?[{fn:t.onstop}]:[],o._onmute=t.onmute?[{fn:t.onmute}]:[],o._onvolume=t.onvolume?[{fn:t.onvolume}]:[],o._onrate=t.onrate?[{fn:t.onrate}]:[],o._onseek=t.onseek?[{fn:t.onseek}]:[],o._onunlock=t.onunlock?[{fn:t.onunlock}]:[],o._onresume=[],o._webAudio=n.usingWebAudio&&!o._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o._preload!=="none"&&o.load(),o},load:function(){var t=this,o=null;if(n.noAudio){t._emit("loaderror",null,"No audio support.");return}typeof t._src=="string"&&(t._src=[t._src]);for(var u=0;u<t._src.length;u++){var _,g;if(t._format&&t._format[u])_=t._format[u];else{if(g=t._src[u],typeof g!="string"){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}_=/^data:audio\/([^;,]+);/i.exec(g),_||(_=/\.([^.]+)$/.exec(g.split("?",1)[0])),_&&(_=_[1].toLowerCase())}if(_||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),_&&n.codecs(_)){o=t._src[u];break}}if(!o){t._emit("loaderror",null,"No codec support for selected audio sources.");return}return t._src=o,t._state="loading",window.location.protocol==="https:"&&o.slice(0,5)==="http:"&&(t._html5=!0,t._webAudio=!1),new a(t),t._webAudio&&s(t),t},play:function(t,o){var u=this,_=null;if(typeof t=="number")_=t,t=null;else{if(typeof t=="string"&&u._state==="loaded"&&!u._sprite[t])return null;if(typeof t>"u"&&(t="__default",!u._playLock)){for(var g=0,v=0;v<u._sounds.length;v++)u._sounds[v]._paused&&!u._sounds[v]._ended&&(g++,_=u._sounds[v]._id);g===1?t=null:_=null}}var h=_?u._soundById(_):u._inactiveSound();if(!h)return null;if(_&&!t&&(t=h._sprite||"__default"),u._state!=="loaded"){h._sprite=t,h._ended=!1;var p=h._id;return u._queue.push({event:"play",action:function(){u.play(p)}}),p}if(_&&!h._paused)return o||u._loadQueue("play"),h._id;u._webAudio&&n._autoResume();var w=Math.max(0,h._seek>0?h._seek:u._sprite[t][0]/1e3),S=Math.max(0,(u._sprite[t][0]+u._sprite[t][1])/1e3-w),I=S*1e3/Math.abs(h._rate),E=u._sprite[t][0]/1e3,$=(u._sprite[t][0]+u._sprite[t][1])/1e3;h._sprite=t,h._ended=!1;var B=function(){h._paused=!1,h._seek=w,h._start=E,h._stop=$,h._loop=!!(h._loop||u._sprite[t][2])};if(w>=$){u._ended(h);return}var P=h._node;if(u._webAudio){var q=function(){u._playLock=!1,B(),u._refreshBuffer(h);var k=h._muted||u._muted?0:h._volume;P.gain.setValueAtTime(k,n.ctx.currentTime),h._playStart=n.ctx.currentTime,typeof P.bufferSource.start>"u"?h._loop?P.bufferSource.noteGrainOn(0,w,86400):P.bufferSource.noteGrainOn(0,w,S):h._loop?P.bufferSource.start(0,w,86400):P.bufferSource.start(0,w,S),I!==1/0&&(u._endTimers[h._id]=setTimeout(u._ended.bind(u,h),I)),o||setTimeout(function(){u._emit("play",h._id),u._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?q():(u._playLock=!0,u.once("resume",q),u._clearTimer(h._id))}else{var M=function(){P.currentTime=w,P.muted=h._muted||u._muted||n._muted||P.muted,P.volume=h._volume*n.volume(),P.playbackRate=h._rate;try{var k=P.play();if(k&&typeof Promise<"u"&&(k instanceof Promise||typeof k.then=="function")?(u._playLock=!0,B(),k.then(function(){u._playLock=!1,P._unlocked=!0,o?u._loadQueue():u._emit("play",h._id)}).catch(function(){u._playLock=!1,u._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),h._ended=!0,h._paused=!0})):o||(u._playLock=!1,B(),u._emit("play",h._id)),P.playbackRate=h._rate,P.paused){u._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}t!=="__default"||h._loop?u._endTimers[h._id]=setTimeout(u._ended.bind(u,h),I):(u._endTimers[h._id]=function(){u._ended(h),P.removeEventListener("ended",u._endTimers[h._id],!1)},P.addEventListener("ended",u._endTimers[h._id],!1))}catch(O){u._emit("playerror",h._id,O)}};P.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(P.src=u._src,P.load());var R=window&&window.ejecta||!P.readyState&&n._navigator.isCocoonJS;if(P.readyState>=3||R)M();else{u._playLock=!0,u._state="loading";var b=function(){u._state="loaded",M(),P.removeEventListener(n._canPlayEvent,b,!1)};P.addEventListener(n._canPlayEvent,b,!1),u._clearTimer(h._id)}}return h._id},pause:function(t){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"pause",action:function(){o.pause(t)}}),o;for(var u=o._getSoundIds(t),_=0;_<u.length;_++){o._clearTimer(u[_]);var g=o._soundById(u[_]);if(g&&!g._paused&&(g._seek=o.seek(u[_]),g._rateSeek=0,g._paused=!0,o._stopFade(u[_]),g._node))if(o._webAudio){if(!g._node.bufferSource)continue;typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),o._cleanBuffer(g._node)}else(!isNaN(g._node.duration)||g._node.duration===1/0)&&g._node.pause();arguments[1]||o._emit("pause",g?g._id:null)}return o},stop:function(t,o){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"stop",action:function(){u.stop(t)}}),u;for(var _=u._getSoundIds(t),g=0;g<_.length;g++){u._clearTimer(_[g]);var v=u._soundById(_[g]);v&&(v._seek=v._start||0,v._rateSeek=0,v._paused=!0,v._ended=!0,u._stopFade(_[g]),v._node&&(u._webAudio?v._node.bufferSource&&(typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),u._cleanBuffer(v._node)):(!isNaN(v._node.duration)||v._node.duration===1/0)&&(v._node.currentTime=v._start||0,v._node.pause(),v._node.duration===1/0&&u._clearSound(v._node))),o||u._emit("stop",v._id))}return u},mute:function(t,o){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"mute",action:function(){u.mute(t,o)}}),u;if(typeof o>"u")if(typeof t=="boolean")u._muted=t;else return u._muted;for(var _=u._getSoundIds(o),g=0;g<_.length;g++){var v=u._soundById(_[g]);v&&(v._muted=t,v._interval&&u._stopFade(v._id),u._webAudio&&v._node?v._node.gain.setValueAtTime(t?0:v._volume,n.ctx.currentTime):v._node&&(v._node.muted=n._muted?!0:t),u._emit("mute",v._id))}return u},volume:function(){var t=this,o=arguments,u,_;if(o.length===0)return t._volume;if(o.length===1||o.length===2&&typeof o[1]>"u"){var g=t._getSoundIds(),v=g.indexOf(o[0]);v>=0?_=parseInt(o[0],10):u=parseFloat(o[0])}else o.length>=2&&(u=parseFloat(o[0]),_=parseInt(o[1],10));var h;if(typeof u<"u"&&u>=0&&u<=1){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,o)}}),t;typeof _>"u"&&(t._volume=u),_=t._getSoundIds(_);for(var p=0;p<_.length;p++)h=t._soundById(_[p]),h&&(h._volume=u,o[2]||t._stopFade(_[p]),t._webAudio&&h._node&&!h._muted?h._node.gain.setValueAtTime(u,n.ctx.currentTime):h._node&&!h._muted&&(h._node.volume=u*n.volume()),t._emit("volume",h._id))}else return h=_?t._soundById(_):t._sounds[0],h?h._volume:0;return t},fade:function(t,o,u,_){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"fade",action:function(){g.fade(t,o,u,_)}}),g;t=Math.min(Math.max(0,parseFloat(t)),1),o=Math.min(Math.max(0,parseFloat(o)),1),u=parseFloat(u),g.volume(t,_);for(var v=g._getSoundIds(_),h=0;h<v.length;h++){var p=g._soundById(v[h]);if(p){if(_||g._stopFade(v[h]),g._webAudio&&!p._muted){var w=n.ctx.currentTime,S=w+u/1e3;p._volume=t,p._node.gain.setValueAtTime(t,w),p._node.gain.linearRampToValueAtTime(o,S)}g._startFadeInterval(p,t,o,u,v[h],typeof _>"u")}}return g},_startFadeInterval:function(t,o,u,_,g,v){var h=this,p=o,w=u-o,S=Math.abs(w/.01),I=Math.max(4,S>0?_/S:_),E=Date.now();t._fadeTo=u,t._interval=setInterval(function(){var $=(Date.now()-E)/_;E=Date.now(),p+=w*$,p=Math.round(p*100)/100,w<0?p=Math.max(u,p):p=Math.min(u,p),h._webAudio?t._volume=p:h.volume(p,t._id,!0),v&&(h._volume=p),(u<o&&p<=u||u>o&&p>=u)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,h.volume(u,t._id),h._emit("fade",t._id))},I)},_stopFade:function(t){var o=this,u=o._soundById(t);return u&&u._interval&&(o._webAudio&&u._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(u._interval),u._interval=null,o.volume(u._fadeTo,t),u._fadeTo=null,o._emit("fade",t)),o},loop:function(){var t=this,o=arguments,u,_,g;if(o.length===0)return t._loop;if(o.length===1)if(typeof o[0]=="boolean")u=o[0],t._loop=u;else return g=t._soundById(parseInt(o[0],10)),g?g._loop:!1;else o.length===2&&(u=o[0],_=parseInt(o[1],10));for(var v=t._getSoundIds(_),h=0;h<v.length;h++)g=t._soundById(v[h]),g&&(g._loop=u,t._webAudio&&g._node&&g._node.bufferSource&&(g._node.bufferSource.loop=u,u&&(g._node.bufferSource.loopStart=g._start||0,g._node.bufferSource.loopEnd=g._stop,t.playing(v[h])&&(t.pause(v[h],!0),t.play(v[h],!0)))));return t},rate:function(){var t=this,o=arguments,u,_;if(o.length===0)_=t._sounds[0]._id;else if(o.length===1){var g=t._getSoundIds(),v=g.indexOf(o[0]);v>=0?_=parseInt(o[0],10):u=parseFloat(o[0])}else o.length===2&&(u=parseFloat(o[0]),_=parseInt(o[1],10));var h;if(typeof u=="number"){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,o)}}),t;typeof _>"u"&&(t._rate=u),_=t._getSoundIds(_);for(var p=0;p<_.length;p++)if(h=t._soundById(_[p]),h){t.playing(_[p])&&(h._rateSeek=t.seek(_[p]),h._playStart=t._webAudio?n.ctx.currentTime:h._playStart),h._rate=u,t._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.setValueAtTime(u,n.ctx.currentTime):h._node&&(h._node.playbackRate=u);var w=t.seek(_[p]),S=(t._sprite[h._sprite][0]+t._sprite[h._sprite][1])/1e3-w,I=S*1e3/Math.abs(h._rate);(t._endTimers[_[p]]||!h._paused)&&(t._clearTimer(_[p]),t._endTimers[_[p]]=setTimeout(t._ended.bind(t,h),I)),t._emit("rate",h._id)}}else return h=t._soundById(_),h?h._rate:t._rate;return t},seek:function(){var t=this,o=arguments,u,_;if(o.length===0)t._sounds.length&&(_=t._sounds[0]._id);else if(o.length===1){var g=t._getSoundIds(),v=g.indexOf(o[0]);v>=0?_=parseInt(o[0],10):t._sounds.length&&(_=t._sounds[0]._id,u=parseFloat(o[0]))}else o.length===2&&(u=parseFloat(o[0]),_=parseInt(o[1],10));if(typeof _>"u")return 0;if(typeof u=="number"&&(t._state!=="loaded"||t._playLock))return t._queue.push({event:"seek",action:function(){t.seek.apply(t,o)}}),t;var h=t._soundById(_);if(h)if(typeof u=="number"&&u>=0){var p=t.playing(_);p&&t.pause(_,!0),h._seek=u,h._ended=!1,t._clearTimer(_),!t._webAudio&&h._node&&!isNaN(h._node.duration)&&(h._node.currentTime=u);var w=function(){p&&t.play(_,!0),t._emit("seek",_)};if(p&&!t._webAudio){var S=function(){t._playLock?setTimeout(S,0):w()};setTimeout(S,0)}else w()}else if(t._webAudio){var I=t.playing(_)?n.ctx.currentTime-h._playStart:0,E=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(E+I*Math.abs(h._rate))}else return h._node.currentTime;return t},playing:function(t){var o=this;if(typeof t=="number"){var u=o._soundById(t);return u?!u._paused:!1}for(var _=0;_<o._sounds.length;_++)if(!o._sounds[_]._paused)return!0;return!1},duration:function(t){var o=this,u=o._duration,_=o._soundById(t);return _&&(u=o._sprite[_._sprite][1]/1e3),u},state:function(){return this._state},unload:function(){for(var t=this,o=t._sounds,u=0;u<o.length;u++)o[u]._paused||t.stop(o[u]._id),t._webAudio||(t._clearSound(o[u]._node),o[u]._node.removeEventListener("error",o[u]._errorFn,!1),o[u]._node.removeEventListener(n._canPlayEvent,o[u]._loadFn,!1),o[u]._node.removeEventListener("ended",o[u]._endFn,!1),n._releaseHtml5Audio(o[u]._node)),delete o[u]._node,t._clearTimer(o[u]._id);var _=n._howls.indexOf(t);_>=0&&n._howls.splice(_,1);var g=!0;for(u=0;u<n._howls.length;u++)if(n._howls[u]._src===t._src||t._src.indexOf(n._howls[u]._src)>=0){g=!1;break}return l&&g&&delete l[t._src],n.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,o,u,_){var g=this,v=g["_on"+t];return typeof o=="function"&&v.push(_?{id:u,fn:o,once:_}:{id:u,fn:o}),g},off:function(t,o,u){var _=this,g=_["_on"+t],v=0;if(typeof o=="number"&&(u=o,o=null),o||u)for(v=0;v<g.length;v++){var h=u===g[v].id;if(o===g[v].fn&&h||!o&&h){g.splice(v,1);break}}else if(t)_["_on"+t]=[];else{var p=Object.keys(_);for(v=0;v<p.length;v++)p[v].indexOf("_on")===0&&Array.isArray(_[p[v]])&&(_[p[v]]=[])}return _},once:function(t,o,u){var _=this;return _.on(t,o,u,1),_},_emit:function(t,o,u){for(var _=this,g=_["_on"+t],v=g.length-1;v>=0;v--)(!g[v].id||g[v].id===o||t==="load")&&(setTimeout(function(h){h.call(this,o,u)}.bind(_,g[v].fn),0),g[v].once&&_.off(t,g[v].fn,g[v].id));return _._loadQueue(t),_},_loadQueue:function(t){var o=this;if(o._queue.length>0){var u=o._queue[0];u.event===t&&(o._queue.shift(),o._loadQueue()),t||u.action()}return o},_ended:function(t){var o=this,u=t._sprite;if(!o._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(o._ended.bind(o,t),100),o;var _=!!(t._loop||o._sprite[u][2]);if(o._emit("end",t._id),!o._webAudio&&_&&o.stop(t._id,!0).play(t._id),o._webAudio&&_){o._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=n.ctx.currentTime;var g=(t._stop-t._start)*1e3/Math.abs(t._rate);o._endTimers[t._id]=setTimeout(o._ended.bind(o,t),g)}return o._webAudio&&!_&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,o._clearTimer(t._id),o._cleanBuffer(t._node),n._autoSuspend()),!o._webAudio&&!_&&o.stop(t._id,!0),o},_clearTimer:function(t){var o=this;if(o._endTimers[t]){if(typeof o._endTimers[t]!="function")clearTimeout(o._endTimers[t]);else{var u=o._soundById(t);u&&u._node&&u._node.removeEventListener("ended",o._endTimers[t],!1)}delete o._endTimers[t]}return o},_soundById:function(t){for(var o=this,u=0;u<o._sounds.length;u++)if(t===o._sounds[u]._id)return o._sounds[u];return null},_inactiveSound:function(){var t=this;t._drain();for(var o=0;o<t._sounds.length;o++)if(t._sounds[o]._ended)return t._sounds[o].reset();return new a(t)},_drain:function(){var t=this,o=t._pool,u=0,_=0;if(!(t._sounds.length<o)){for(_=0;_<t._sounds.length;_++)t._sounds[_]._ended&&u++;for(_=t._sounds.length-1;_>=0;_--){if(u<=o)return;t._sounds[_]._ended&&(t._webAudio&&t._sounds[_]._node&&t._sounds[_]._node.disconnect(0),t._sounds.splice(_,1),u--)}}},_getSoundIds:function(t){var o=this;if(typeof t>"u"){for(var u=[],_=0;_<o._sounds.length;_++)u.push(o._sounds[_]._id);return u}else return[t]},_refreshBuffer:function(t){var o=this;return t._node.bufferSource=n.ctx.createBufferSource(),t._node.bufferSource.buffer=l[o._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,n.ctx.currentTime),o},_cleanBuffer:function(t){var o=this,u=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),u))try{t.bufferSource.buffer=n._scratchBuffer}catch{}return t.bufferSource=null,o},_clearSound:function(t){var o=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);o||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this,o=t._parent;return t._muted=o._muted,t._loop=o._loop,t._volume=o._volume,t._rate=o._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++n._counter,o._sounds.push(t),t.create(),t},create:function(){var t=this,o=t._parent,u=n._muted||t._muted||t._parent._muted?0:t._volume;return o._webAudio?(t._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),t._node.gain.setValueAtTime(u,n.ctx.currentTime),t._node.paused=!0,t._node.connect(n.masterGain)):n.noAudio||(t._node=n._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(n._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=o._src,t._node.preload=o._preload===!0?"auto":o._preload,t._node.volume=u*n.volume(),t._node.load()),t},reset:function(){var t=this,o=t._parent;return t._muted=o._muted,t._loop=o._loop,t._volume=o._volume,t._rate=o._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++n._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,o=t._parent;o._duration=Math.ceil(t._node.duration*10)/10,Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue()),t._node.removeEventListener(n._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,o=t._parent;o._duration===1/0&&(o._duration=Math.ceil(t._node.duration*10)/10,o._sprite.__default[1]===1/0&&(o._sprite.__default[1]=o._duration*1e3),o._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var l={},s=function(t){var o=t._src;if(l[o]){t._duration=l[o].duration,f(t);return}if(/^data:[^;]+;base64,/.test(o)){for(var u=atob(o.split(",")[1]),_=new Uint8Array(u.length),g=0;g<u.length;++g)_[g]=u.charCodeAt(g);c(_.buffer,t)}else{var v=new XMLHttpRequest;v.open(t._xhr.method,o,!0),v.withCredentials=t._xhr.withCredentials,v.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(h){v.setRequestHeader(h,t._xhr.headers[h])}),v.onload=function(){var h=(v.status+"")[0];if(h!=="0"&&h!=="2"&&h!=="3"){t._emit("loaderror",null,"Failed loading audio file with status: "+v.status+".");return}c(v.response,t)},v.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete l[o],t.load())},d(v)}},d=function(t){try{t.send()}catch{t.onerror()}},c=function(t,o){var u=function(){o._emit("loaderror",null,"Decoding audio data failed.")},_=function(g){g&&o._sounds.length>0?(l[o._src]=g,f(o,g)):u()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(t).then(_).catch(u):n.ctx.decodeAudioData(t,_,u)},f=function(t,o){o&&!t._duration&&(t._duration=o.duration),Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue())},m=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),o=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),u=o?parseInt(o[1],10):null;if(t&&u&&u<9){var _=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!_&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};e.Howler=n,e.Howl=i,typeof me<"u"?(me.HowlerGlobal=r,me.Howler=n,me.Howl=i,me.Sound=a):typeof window<"u"&&(window.HowlerGlobal=r,window.Howler=n,window.Howl=i,window.Sound=a)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var a=i._howls.length-1;a>=0;a--)i._howls[a].stereo(n);return i},HowlerGlobal.prototype.pos=function(n,i,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;if(i=typeof i!="number"?l._pos[1]:i,a=typeof a!="number"?l._pos[2]:a,typeof n=="number")l._pos=[n,i,a],typeof l.ctx.listener.positionX<"u"?(l.ctx.listener.positionX.setTargetAtTime(l._pos[0],Howler.ctx.currentTime,.1),l.ctx.listener.positionY.setTargetAtTime(l._pos[1],Howler.ctx.currentTime,.1),l.ctx.listener.positionZ.setTargetAtTime(l._pos[2],Howler.ctx.currentTime,.1)):l.ctx.listener.setPosition(l._pos[0],l._pos[1],l._pos[2]);else return l._pos;return l},HowlerGlobal.prototype.orientation=function(n,i,a,l,s,d){var c=this;if(!c.ctx||!c.ctx.listener)return c;var f=c._orientation;if(i=typeof i!="number"?f[1]:i,a=typeof a!="number"?f[2]:a,l=typeof l!="number"?f[3]:l,s=typeof s!="number"?f[4]:s,d=typeof d!="number"?f[5]:d,typeof n=="number")c._orientation=[n,i,a,l,s,d],typeof c.ctx.listener.forwardX<"u"?(c.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),c.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),c.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),c.ctx.listener.upX.setTargetAtTime(l,Howler.ctx.currentTime,.1),c.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),c.ctx.listener.upZ.setTargetAtTime(d,Howler.ctx.currentTime,.1)):c.ctx.listener.setOrientation(n,i,a,l,s,d);else return f;return c},Howl.prototype.init=function(n){return function(i){var a=this;return a._orientation=i.orientation||[1,0,0],a._stereo=i.stereo||null,a._pos=i.pos||null,a._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},a._onstereo=i.onstereo?[{fn:i.onstereo}]:[],a._onpos=i.onpos?[{fn:i.onpos}]:[],a._onorientation=i.onorientation?[{fn:i.onorientation}]:[],n.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,i){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(n,i)}}),a;var l=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof n=="number")a._stereo=n,a._pos=[n,0,0];else return a._stereo;for(var s=a._getSoundIds(i),d=0;d<s.length;d++){var c=a._soundById(s[d]);if(c)if(typeof n=="number")c._stereo=n,c._pos=[n,0,0],c._node&&(c._pannerAttr.panningModel="equalpower",(!c._panner||!c._panner.pan)&&r(c,l),l==="spatial"?typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):c._panner.setPosition(n,0,0):c._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),a._emit("stereo",c._id);else return c._stereo}return a},Howl.prototype.pos=function(n,i,a,l){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(n,i,a,l)}}),s;if(i=typeof i!="number"?0:i,a=typeof a!="number"?-.5:a,typeof l>"u")if(typeof n=="number")s._pos=[n,i,a];else return s._pos;for(var d=s._getSoundIds(l),c=0;c<d.length;c++){var f=s._soundById(d[c]);if(f)if(typeof n=="number")f._pos=[n,i,a],f._node&&((!f._panner||f._panner.pan)&&r(f,"spatial"),typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):f._panner.setPosition(n,i,a)),s._emit("pos",f._id);else return f._pos}return s},Howl.prototype.orientation=function(n,i,a,l){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(n,i,a,l)}}),s;if(i=typeof i!="number"?s._orientation[1]:i,a=typeof a!="number"?s._orientation[2]:a,typeof l>"u")if(typeof n=="number")s._orientation=[n,i,a];else return s._orientation;for(var d=s._getSoundIds(l),c=0;c<d.length;c++){var f=s._soundById(d[c]);if(f)if(typeof n=="number")f._orientation=[n,i,a],f._node&&(f._panner||(f._pos||(f._pos=s._pos||[0,0,-.5]),r(f,"spatial")),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):f._panner.setOrientation(n,i,a)),s._emit("orientation",f._id);else return f._orientation}return s},Howl.prototype.pannerAttr=function(){var n=this,i=arguments,a,l,s;if(!n._webAudio)return n;if(i.length===0)return n._pannerAttr;if(i.length===1)if(typeof i[0]=="object")a=i[0],typeof l>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),n._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:n._panningModel});else return s=n._soundById(parseInt(i[0],10)),s?s._pannerAttr:n._pannerAttr;else i.length===2&&(a=i[0],l=parseInt(i[1],10));for(var d=n._getSoundIds(l),c=0;c<d.length;c++)if(s=n._soundById(d[c]),s){var f=s._pannerAttr;f={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:f.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:f.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:f.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:f.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:f.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:f.panningModel};var m=s._panner;m?(m.coneInnerAngle=f.coneInnerAngle,m.coneOuterAngle=f.coneOuterAngle,m.coneOuterGain=f.coneOuterGain,m.distanceModel=f.distanceModel,m.maxDistance=f.maxDistance,m.refDistance=f.refDistance,m.rolloffFactor=f.rolloffFactor,m.panningModel=f.panningModel):(s._pos||(s._pos=n._pos||[0,0,-.5]),r(s,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var i=this,a=i._parent;i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,n.call(this),i._stereo?a.stereo(i._stereo):i._pos&&a.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var i=this,a=i._parent;return i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,i._stereo?a.stereo(i._stereo):i._pos?a.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,a._refreshBuffer(i)),n.call(this)}}(Sound.prototype.reset);var r=function(n,i){i=i||"spatial",i==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(ze);function Dt(e){return Object.prototype.toString.call(e)==="[object Date]"}function yt(e,r){if(e===r||e!==e)return()=>e;const n=typeof e;if(n!==typeof r||Array.isArray(e)!==Array.isArray(r))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=r.map((a,l)=>yt(e[l],a));return a=>i.map(l=>l(a))}if(n==="object"){if(!e||!r)throw new Error("Object cannot be null");if(Dt(e)&&Dt(r)){e=e.getTime(),r=r.getTime();const l=r-e;return s=>new Date(e+s*l)}const i=Object.keys(r),a={};return i.forEach(l=>{a[l]=yt(e[l],r[l])}),l=>{const s={};return i.forEach(d=>{s[d]=a[d](l)}),s}}if(n==="number"){const i=r-e;return a=>e+a*i}throw new Error(`Cannot interpolate ${n} values`)}function Mn(e,r={}){const n=xn(e);let i,a=e;function l(s,d){if(e==null)return n.set(e=s),Promise.resolve();a=s;let c=i,f=!1,{delay:m=0,duration:t=400,easing:o=Dn,interpolate:u=yt}=Rt(Rt({},r),d);if(t===0)return c&&(c.abort(),c=null),n.set(e=a),Promise.resolve();const _=Fn()+m;let g;return i=$n(v=>{if(v<_)return!0;f||(g=u(e,s),typeof t=="function"&&(t=t(e,s)),f=!0),c&&(c.abort(),c=null);const h=v-_;return h>t?(n.set(e=s),!1):(n.set(e=g(o(h/t))),!0)}),i.promise}return{set:l,update:(s,d)=>l(s(a,e),d),subscribe:n.subscribe}}function Wn(e){let r,n,i;return{c(){r=ye("circle"),this.h()},l(a){r=be(a,"circle",{fill:!0,r:!0,cx:!0,cy:!0,class:!0}),j(r).forEach(A),this.h()},h(){y(r,"fill",e[0]),y(r,"r",e[3]),y(r,"cx",n=e[7](e[4](e[1]))),y(r,"cy",i=e[8](e[4](e[1]))),y(r,"class","svelte-n654c8"),nt(r,"muted",!e[2])},m(a,l){F(a,r,l)},p(a,[l]){l&1&&y(r,"fill",a[0]),l&8&&y(r,"r",a[3]),l&2&&n!==(n=a[7](a[4](a[1])))&&y(r,"cx",n),l&2&&i!==(i=a[8](a[4](a[1])))&&y(r,"cy",i),l&4&&nt(r,"muted",!a[2])},i:ue,o:ue,d(a){a&&A(r)}}}const Xn=.05,_t=10,Qn=20;function Zn(e,r,n){let i,a,l,s,d,{color:c}=r,{note:f}=r,{id:m}=r,{innerRadius:t}=r;const{beatsPerRotation:o,getCycleDuration:u,getAngleScale:_,getT:g,getInstrumentToggles:v}=kn("song"),h=_(),p=g();Ee(e,p,M=>n(14,s=M));const w=v();Ee(e,w,M=>n(13,l=M));const I=u()/o/2,E={hihat:new ze.Howl({src:["assets/sound/hihat.mp3"]}),kick:new ze.Howl({src:["assets/sound/kick.mp3"]}),snare:new ze.Howl({src:["assets/sound/snare.mp3"]})},$=M=>t*Math.cos(M),B=M=>t*Math.sin(M),P=Mn(_t);Ee(e,P,M=>n(3,d=M));const q=()=>{E[m].state()==="loaded"&&E[m].play(),m!=="hihat"&&(P.set(_t,{duration:0}),P.set(Qn,{duration:I}).then(()=>P.set(_t,{duration:I})))};return e.$$set=M=>{"color"in M&&n(0,c=M.color),"note"in M&&n(1,f=M.note),"id"in M&&n(10,m=M.id),"innerRadius"in M&&n(11,t=M.innerRadius)},e.$$.update=()=>{e.$$.dirty&16386&&n(12,i=s>=f&&s<f+Xn),e.$$.dirty&9216&&n(2,a=l[m]==="on"),e.$$.dirty&4100&&i&&a&&q()},[c,f,a,d,h,p,w,$,B,P,m,t,i,l,s]}class Yn extends pe{constructor(r){super(),ge(this,r,Zn,Wn,de,{color:0,note:1,id:10,innerRadius:11})}}function Lt(e,r,n){const i=e.slice();return i[15]=r[n],i}function Bt(e){let r,n;return r=new Yn({props:{note:e[15],color:e[6][e[0]],id:e[0],innerRadius:e[4]}}),{c(){U(r.$$.fragment)},l(i){z(r.$$.fragment,i)},m(i,a){ee(r,i,a),n=!0},p(i,a){const l={};a&2&&(l.note=i[15]),a&1&&(l.color=i[6][i[0]]),a&1&&(l.id=i[0]),a&16&&(l.innerRadius=i[4]),r.$set(l)},i(i){n||(V(r.$$.fragment,i),n=!0)},o(i){K(r.$$.fragment,i),n=!1},d(i){te(r,i)}}}function Kn(e){let r,n,i,a,l=e[1],s=[];for(let c=0;c<l.length;c+=1)s[c]=Bt(Lt(e,l,c));const d=c=>K(s[c],1,1,()=>{s[c]=null});return{c(){for(let c=0;c<s.length;c+=1)s[c].c();r=Z(),n=ye("polygon"),this.h()},l(c){for(let f=0;f<s.length;f+=1)s[f].l(c);r=Y(c),n=be(c,"polygon",{points:!0,fill:!0,stroke:!0,class:!0}),j(n).forEach(A),this.h()},h(){y(n,"points",e[3]),y(n,"fill",i=e[6][e[0]]),y(n,"stroke","black"),y(n,"class","svelte-1v1uqkj"),nt(n,"muted",!e[2])},m(c,f){for(let m=0;m<s.length;m+=1)s[m].m(c,f);F(c,r,f),F(c,n,f),a=!0},p(c,[f]){if(f&83){l=c[1];let m;for(m=0;m<l.length;m+=1){const t=Lt(c,l,m);s[m]?(s[m].p(t,f),V(s[m],1)):(s[m]=Bt(t),s[m].c(),V(s[m],1),s[m].m(r.parentNode,r))}for(ct(),m=l.length;m<s.length;m+=1)d(m);dt()}(!a||f&8)&&y(n,"points",c[3]),(!a||f&1&&i!==(i=c[6][c[0]]))&&y(n,"fill",i),(!a||f&4)&&nt(n,"muted",!c[2])},i(c){if(!a){for(let f=0;f<l.length;f+=1)V(s[f]);a=!0}},o(c){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)K(s[f]);a=!1},d(c){Be(s,c),c&&A(r),c&&A(n)}}}function Jn(e,r,n){let i,a,l,s,d,{id:c}=r,{i:f}=r,{data:m}=r;const{getAngleScale:t,getInstrumentToggles:o}=kn("song"),u=t(),_=o();Ee(e,_,p=>n(9,d=p));const g=p=>i*Math.cos(p),v=p=>i*Math.sin(p),h={hihat:"lightblue",kick:"black",snare:"lightgreen"};return e.$$set=p=>{"id"in p&&n(0,c=p.id),"i"in p&&n(7,f=p.i),"data"in p&&n(1,m=p.data)},e.$$.update=()=>{e.$$.dirty&128&&n(4,i=150+f*22),e.$$.dirty&2&&n(8,a=m.map(p=>{const w=u(p);return`${g(w)},${v(w)}`})),e.$$.dirty&256&&n(3,l=a.join(" ")),e.$$.dirty&513&&n(2,s=d[c]==="on")},[c,m,s,l,i,_,h,f,a,d]}class Un extends pe{constructor(r){super(),ge(this,r,Jn,Kn,de,{id:0,i:7,data:1})}}var zn="Expected a function",Ct=0/0,er="[object Symbol]",tr=/^\s+|\s+$/g,nr=/^[-+]0x[0-9a-f]+$/i,rr=/^0b[01]+$/i,ir=/^0o[0-7]+$/i,ar=parseInt,or=typeof me=="object"&&me&&me.Object===Object&&me,lr=typeof self=="object"&&self&&self.Object===Object&&self,sr=or||lr||Function("return this")(),ur=Object.prototype,fr=ur.toString,cr=Math.max,dr=Math.min,ht=function(){return sr.Date.now()};function _r(e,r,n){var i,a,l,s,d,c,f=0,m=!1,t=!1,o=!0;if(typeof e!="function")throw new TypeError(zn);r=Gt(r)||0,bt(n)&&(m=!!n.leading,t="maxWait"in n,l=t?cr(Gt(n.maxWait)||0,r):l,o="trailing"in n?!!n.trailing:o);function u(E){var $=i,B=a;return i=a=void 0,f=E,s=e.apply(B,$),s}function _(E){return f=E,d=setTimeout(h,r),m?u(E):s}function g(E){var $=E-c,B=E-f,P=r-$;return t?dr(P,l-B):P}function v(E){var $=E-c,B=E-f;return c===void 0||$>=r||$<0||t&&B>=l}function h(){var E=ht();if(v(E))return p(E);d=setTimeout(h,g(E))}function p(E){return d=void 0,o&&i?u(E):(i=a=void 0,s)}function w(){d!==void 0&&clearTimeout(d),f=0,i=c=a=d=void 0}function S(){return d===void 0?s:p(ht())}function I(){var E=ht(),$=v(E);if(i=arguments,a=this,c=E,$){if(d===void 0)return _(c);if(t)return d=setTimeout(h,r),u(c)}return d===void 0&&(d=setTimeout(h,r)),s}return I.cancel=w,I.flush=S,I}function bt(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function hr(e){return!!e&&typeof e=="object"}function mr(e){return typeof e=="symbol"||hr(e)&&fr.call(e)==er}function Gt(e){if(typeof e=="number")return e;if(mr(e))return Ct;if(bt(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=bt(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(tr,"");var n=rr.test(e);return n||ir.test(e)?ar(e.slice(2),n?2:8):nr.test(e)?Ct:+e}var pr=_r;const gr=Cn({width:0,height:0},e=>{const r=()=>e({width:window.innerWidth,height:window.innerHeight});return r(),window.addEventListener("resize",pr(r,250)),()=>{window.removeEventListener("resize",r)}});function et(e,r){return e==null||r==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function Sn(e){let r,n,i;e.length!==2?(r=et,n=(d,c)=>et(e(d),c),i=(d,c)=>e(d)-c):(r=e===et||e===Gn?e:vr,n=e,i=e);function a(d,c,f=0,m=d.length){if(f<m){if(r(c,c)!==0)return m;do{const t=f+m>>>1;n(d[t],c)<0?f=t+1:m=t}while(f<m)}return f}function l(d,c,f=0,m=d.length){if(f<m){if(r(c,c)!==0)return m;do{const t=f+m>>>1;n(d[t],c)<=0?f=t+1:m=t}while(f<m)}return f}function s(d,c,f=0,m=d.length){const t=a(d,c,f,m-1);return t>f&&i(d[t-1],c)>-i(d[t],c)?t-1:t}return{left:a,center:s,right:l}}function vr(){return 0}function yr(e){return e===null?NaN:+e}const br=Sn(et),wr=br.right;Sn(yr).center;const Ar=wr;function kr(e,r){let n,i;if(r===void 0)for(const a of e)a!=null&&(n===void 0?a>=a&&(n=i=a):(n>a&&(n=a),i<a&&(i=a)));else{let a=-1;for(let l of e)(l=r(l,++a,e))!=null&&(n===void 0?l>=l&&(n=i=l):(n>l&&(n=l),i<l&&(i=l)))}return[n,i]}const Tr=Math.sqrt(50),xr=Math.sqrt(10),Mr=Math.sqrt(2);function rt(e,r,n){const i=(r-e)/Math.max(0,n),a=Math.floor(Math.log10(i)),l=i/Math.pow(10,a),s=l>=Tr?10:l>=xr?5:l>=Mr?2:1;let d,c,f;return a<0?(f=Math.pow(10,-a)/s,d=Math.round(e*f),c=Math.round(r*f),d/f<e&&++d,c/f>r&&--c,f=-f):(f=Math.pow(10,a)*s,d=Math.round(e/f),c=Math.round(r/f),d*f<e&&++d,c*f>r&&--c),c<d&&.5<=n&&n<2?rt(e,r,n*2):[d,c,f]}function Sr(e,r,n){if(r=+r,e=+e,n=+n,!(n>0))return[];if(e===r)return[e];const i=r<e,[a,l,s]=i?rt(r,e,n):rt(e,r,n);if(!(l>=a))return[];const d=l-a+1,c=new Array(d);if(i)if(s<0)for(let f=0;f<d;++f)c[f]=(l-f)/-s;else for(let f=0;f<d;++f)c[f]=(l-f)*s;else if(s<0)for(let f=0;f<d;++f)c[f]=(a+f)/-s;else for(let f=0;f<d;++f)c[f]=(a+f)*s;return c}function wt(e,r,n){return r=+r,e=+e,n=+n,rt(e,r,n)[2]}function Ir(e,r,n){r=+r,e=+e,n=+n;const i=r<e,a=i?wt(r,e,n):wt(e,r,n);return(i?-1:1)*(a<0?1/-a:a)}function Ne(e,r,n){e=+e,r=+r,n=(a=arguments.length)<2?(r=e,e=0,1):a<3?1:+n;for(var i=-1,a=Math.max(0,Math.ceil((r-e)/n))|0,l=new Array(a);++i<a;)l[i]=e+i*n;return l}function It(e,r,n){e.prototype=r.prototype=n,n.constructor=e}function In(e,r){var n=Object.create(e.prototype);for(var i in r)n[i]=r[i];return n}function Ze(){}var Ve=.7,it=1/Ve,De="\\s*([+-]?\\d+)\\s*",We="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ce="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Er=/^#([0-9a-f]{3,8})$/,Pr=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),Nr=new RegExp(`^rgb\\(${ce},${ce},${ce}\\)$`),Or=new RegExp(`^rgba\\(${De},${De},${De},${We}\\)$`),Rr=new RegExp(`^rgba\\(${ce},${ce},${ce},${We}\\)$`),Hr=new RegExp(`^hsl\\(${We},${ce},${ce}\\)$`),Fr=new RegExp(`^hsla\\(${We},${ce},${ce},${We}\\)$`),qt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};It(Ze,Xe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jt,formatHex:jt,formatHex8:$r,formatHsl:Dr,formatRgb:Vt,toString:Vt});function jt(){return this.rgb().formatHex()}function $r(){return this.rgb().formatHex8()}function Dr(){return En(this).formatHsl()}function Vt(){return this.rgb().formatRgb()}function Xe(e){var r,n;return e=(e+"").trim().toLowerCase(),(r=Er.exec(e))?(n=r[1].length,r=parseInt(r[1],16),n===6?Wt(r):n===3?new oe(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?Ye(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?Ye(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Pr.exec(e))?new oe(r[1],r[2],r[3],1):(r=Nr.exec(e))?new oe(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Or.exec(e))?Ye(r[1],r[2],r[3],r[4]):(r=Rr.exec(e))?Ye(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Hr.exec(e))?Zt(r[1],r[2]/100,r[3]/100,1):(r=Fr.exec(e))?Zt(r[1],r[2]/100,r[3]/100,r[4]):qt.hasOwnProperty(e)?Wt(qt[e]):e==="transparent"?new oe(NaN,NaN,NaN,0):null}function Wt(e){return new oe(e>>16&255,e>>8&255,e&255,1)}function Ye(e,r,n,i){return i<=0&&(e=r=n=NaN),new oe(e,r,n,i)}function Lr(e){return e instanceof Ze||(e=Xe(e)),e?(e=e.rgb(),new oe(e.r,e.g,e.b,e.opacity)):new oe}function At(e,r,n,i){return arguments.length===1?Lr(e):new oe(e,r,n,i??1)}function oe(e,r,n,i){this.r=+e,this.g=+r,this.b=+n,this.opacity=+i}It(oe,At,In(Ze,{brighter(e){return e=e==null?it:Math.pow(it,e),new oe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ve:Math.pow(Ve,e),new oe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new oe(Pe(this.r),Pe(this.g),Pe(this.b),at(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xt,formatHex:Xt,formatHex8:Br,formatRgb:Qt,toString:Qt}));function Xt(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}`}function Br(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}${Ie((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qt(){const e=at(this.opacity);return`${e===1?"rgb(":"rgba("}${Pe(this.r)}, ${Pe(this.g)}, ${Pe(this.b)}${e===1?")":`, ${e})`}`}function at(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ie(e){return e=Pe(e),(e<16?"0":"")+e.toString(16)}function Zt(e,r,n,i){return i<=0?e=r=n=NaN:n<=0||n>=1?e=r=NaN:r<=0&&(e=NaN),new se(e,r,n,i)}function En(e){if(e instanceof se)return new se(e.h,e.s,e.l,e.opacity);if(e instanceof Ze||(e=Xe(e)),!e)return new se;if(e instanceof se)return e;e=e.rgb();var r=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(r,n,i),l=Math.max(r,n,i),s=NaN,d=l-a,c=(l+a)/2;return d?(r===l?s=(n-i)/d+(n<i)*6:n===l?s=(i-r)/d+2:s=(r-n)/d+4,d/=c<.5?l+a:2-l-a,s*=60):d=c>0&&c<1?0:s,new se(s,d,c,e.opacity)}function Cr(e,r,n,i){return arguments.length===1?En(e):new se(e,r,n,i??1)}function se(e,r,n,i){this.h=+e,this.s=+r,this.l=+n,this.opacity=+i}It(se,Cr,In(Ze,{brighter(e){return e=e==null?it:Math.pow(it,e),new se(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ve:Math.pow(Ve,e),new se(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,a=2*n-i;return new oe(mt(e>=240?e-240:e+120,a,i),mt(e,a,i),mt(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new se(Yt(this.h),Ke(this.s),Ke(this.l),at(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=at(this.opacity);return`${e===1?"hsl(":"hsla("}${Yt(this.h)}, ${Ke(this.s)*100}%, ${Ke(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Yt(e){return e=(e||0)%360,e<0?e+360:e}function Ke(e){return Math.max(0,Math.min(1,e||0))}function mt(e,r,n){return(e<60?r+(n-r)*e/60:e<180?n:e<240?r+(n-r)*(240-e)/60:r)*255}const Et=e=>()=>e;function Gr(e,r){return function(n){return e+n*r}}function qr(e,r,n){return e=Math.pow(e,n),r=Math.pow(r,n)-e,n=1/n,function(i){return Math.pow(e+i*r,n)}}function jr(e){return(e=+e)==1?Pn:function(r,n){return n-r?qr(r,n,e):Et(isNaN(r)?n:r)}}function Pn(e,r){var n=r-e;return n?Gr(e,n):Et(isNaN(e)?r:e)}const Kt=function e(r){var n=jr(r);function i(a,l){var s=n((a=At(a)).r,(l=At(l)).r),d=n(a.g,l.g),c=n(a.b,l.b),f=Pn(a.opacity,l.opacity);return function(m){return a.r=s(m),a.g=d(m),a.b=c(m),a.opacity=f(m),a+""}}return i.gamma=e,i}(1);function Vr(e,r){r||(r=[]);var n=e?Math.min(r.length,e.length):0,i=r.slice(),a;return function(l){for(a=0;a<n;++a)i[a]=e[a]*(1-l)+r[a]*l;return i}}function Wr(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Xr(e,r){var n=r?r.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),l=new Array(n),s;for(s=0;s<i;++s)a[s]=Pt(e[s],r[s]);for(;s<n;++s)l[s]=r[s];return function(d){for(s=0;s<i;++s)l[s]=a[s](d);return l}}function Qr(e,r){var n=new Date;return e=+e,r=+r,function(i){return n.setTime(e*(1-i)+r*i),n}}function ot(e,r){return e=+e,r=+r,function(n){return e*(1-n)+r*n}}function Zr(e,r){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(a in r)a in e?n[a]=Pt(e[a],r[a]):i[a]=r[a];return function(l){for(a in n)i[a]=n[a](l);return i}}var kt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pt=new RegExp(kt.source,"g");function Yr(e){return function(){return e}}function Kr(e){return function(r){return e(r)+""}}function Jr(e,r){var n=kt.lastIndex=pt.lastIndex=0,i,a,l,s=-1,d=[],c=[];for(e=e+"",r=r+"";(i=kt.exec(e))&&(a=pt.exec(r));)(l=a.index)>n&&(l=r.slice(n,l),d[s]?d[s]+=l:d[++s]=l),(i=i[0])===(a=a[0])?d[s]?d[s]+=a:d[++s]=a:(d[++s]=null,c.push({i:s,x:ot(i,a)})),n=pt.lastIndex;return n<r.length&&(l=r.slice(n),d[s]?d[s]+=l:d[++s]=l),d.length<2?c[0]?Kr(c[0].x):Yr(r):(r=c.length,function(f){for(var m=0,t;m<r;++m)d[(t=c[m]).i]=t.x(f);return d.join("")})}function Pt(e,r){var n=typeof r,i;return r==null||n==="boolean"?Et(r):(n==="number"?ot:n==="string"?(i=Xe(r))?(r=i,Kt):Jr:r instanceof Xe?Kt:r instanceof Date?Qr:Wr(r)?Vr:Array.isArray(r)?Xr:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Zr:ot)(e,r)}function Ur(e,r){return e=+e,r=+r,function(n){return Math.round(e*(1-n)+r*n)}}const Tt=Math.PI,xt=2*Tt,Te=1e-6,zr=xt-Te;function Nn(e){this._+=e[0];for(let r=1,n=e.length;r<n;++r)this._+=arguments[r]+e[r]}function ei(e){let r=Math.floor(e);if(!(r>=0))throw new Error(`invalid digits: ${e}`);if(r>15)return Nn;const n=10**r;return function(i){this._+=i[0];for(let a=1,l=i.length;a<l;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}class ti{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?Nn:ei(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,i,a){this._append`Q${+r},${+n},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(r,n,i,a,l,s){this._append`C${+r},${+n},${+i},${+a},${this._x1=+l},${this._y1=+s}`}arcTo(r,n,i,a,l){if(r=+r,n=+n,i=+i,a=+a,l=+l,l<0)throw new Error(`negative radius: ${l}`);let s=this._x1,d=this._y1,c=i-r,f=a-n,m=s-r,t=d-n,o=m*m+t*t;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(o>Te)if(!(Math.abs(t*c-f*m)>Te)||!l)this._append`L${this._x1=r},${this._y1=n}`;else{let u=i-s,_=a-d,g=c*c+f*f,v=u*u+_*_,h=Math.sqrt(g),p=Math.sqrt(o),w=l*Math.tan((Tt-Math.acos((g+o-v)/(2*h*p)))/2),S=w/p,I=w/h;Math.abs(S-1)>Te&&this._append`L${r+S*m},${n+S*t}`,this._append`A${l},${l},0,0,${+(t*u>m*_)},${this._x1=r+I*c},${this._y1=n+I*f}`}}arc(r,n,i,a,l,s){if(r=+r,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let d=i*Math.cos(a),c=i*Math.sin(a),f=r+d,m=n+c,t=1^s,o=s?a-l:l-a;this._x1===null?this._append`M${f},${m}`:(Math.abs(this._x1-f)>Te||Math.abs(this._y1-m)>Te)&&this._append`L${f},${m}`,i&&(o<0&&(o=o%xt+xt),o>zr?this._append`A${i},${i},0,1,${t},${r-d},${n-c}A${i},${i},0,1,${t},${this._x1=f},${this._y1=m}`:o>Te&&this._append`A${i},${i},0,${+(o>=Tt)},${t},${this._x1=r+i*Math.cos(l)},${this._y1=n+i*Math.sin(l)}`)}rect(r,n,i,a){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}}function ni(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function lt(e,r){if((n=(e=r?e.toExponential(r-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Le(e){return e=lt(Math.abs(e)),e?e[1]:NaN}function ri(e,r){return function(n,i){for(var a=n.length,l=[],s=0,d=e[0],c=0;a>0&&d>0&&(c+d+1>i&&(d=Math.max(1,i-c)),l.push(n.substring(a-=d,a+d)),!((c+=d+1)>i));)d=e[s=(s+1)%e.length];return l.reverse().join(r)}}function ii(e){return function(r){return r.replace(/[0-9]/g,function(n){return e[+n]})}}var ai=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function st(e){if(!(r=ai.exec(e)))throw new Error("invalid format: "+e);var r;return new Nt({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}st.prototype=Nt.prototype;function Nt(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Nt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oi(e){e:for(var r=e.length,n=1,i=-1,a;n<r;++n)switch(e[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(a+1):e}var On;function li(e,r){var n=lt(e,r);if(!n)return e+"";var i=n[0],a=n[1],l=a-(On=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=i.length;return l===s?i:l>s?i+new Array(l-s+1).join("0"):l>0?i.slice(0,l)+"."+i.slice(l):"0."+new Array(1-l).join("0")+lt(e,Math.max(0,r+l-1))[0]}function Jt(e,r){var n=lt(e,r);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const Ut={"%":(e,r)=>(e*100).toFixed(r),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ni,e:(e,r)=>e.toExponential(r),f:(e,r)=>e.toFixed(r),g:(e,r)=>e.toPrecision(r),o:e=>Math.round(e).toString(8),p:(e,r)=>Jt(e*100,r),r:Jt,s:li,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function zt(e){return e}var en=Array.prototype.map,tn=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function si(e){var r=e.grouping===void 0||e.thousands===void 0?zt:ri(en.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?zt:ii(en.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function f(t){t=st(t);var o=t.fill,u=t.align,_=t.sign,g=t.symbol,v=t.zero,h=t.width,p=t.comma,w=t.precision,S=t.trim,I=t.type;I==="n"?(p=!0,I="g"):Ut[I]||(w===void 0&&(w=12),S=!0,I="g"),(v||o==="0"&&u==="=")&&(v=!0,o="0",u="=");var E=g==="$"?n:g==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",$=g==="$"?i:/[%p]/.test(I)?s:"",B=Ut[I],P=/[defgprs%]/.test(I);w=w===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function q(M){var R=E,b=$,k,O,H;if(I==="c")b=B(M)+b,M="";else{M=+M;var T=M<0||1/M<0;if(M=isNaN(M)?c:B(Math.abs(M),w),S&&(M=oi(M)),T&&+M==0&&_!=="+"&&(T=!1),R=(T?_==="("?_:d:_==="-"||_==="("?"":_)+R,b=(I==="s"?tn[8+On/3]:"")+b+(T&&_==="("?")":""),P){for(k=-1,O=M.length;++k<O;)if(H=M.charCodeAt(k),48>H||H>57){b=(H===46?a+M.slice(k+1):M.slice(k))+b,M=M.slice(0,k);break}}}p&&!v&&(M=r(M,1/0));var C=R.length+M.length+b.length,W=C<h?new Array(h-C+1).join(o):"";switch(p&&v&&(M=r(W+M,W.length?h-b.length:1/0),W=""),u){case"<":M=R+M+b+W;break;case"=":M=R+W+M+b;break;case"^":M=W.slice(0,C=W.length>>1)+R+M+b+W.slice(C);break;default:M=W+R+M+b;break}return l(M)}return q.toString=function(){return t+""},q}function m(t,o){var u=f((t=st(t),t.type="f",t)),_=Math.max(-8,Math.min(8,Math.floor(Le(o)/3)))*3,g=Math.pow(10,-_),v=tn[8+_/3];return function(h){return u(g*h)+v}}return{format:f,formatPrefix:m}}var Je,ut,Rn;ui({thousands:",",grouping:[3],currency:["$",""]});function ui(e){return Je=si(e),ut=Je.format,Rn=Je.formatPrefix,Je}function fi(e){return Math.max(0,-Le(Math.abs(e)))}function ci(e,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Le(r)/3)))*3-Le(Math.abs(e)))}function di(e,r){return e=Math.abs(e),r=Math.abs(r)-e,Math.max(0,Le(r)-Le(e))+1}function _i(e,r){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(r).domain(e);break}return this}function hi(e){return function(){return e}}function mi(e){return+e}var nn=[0,1];function He(e){return e}function Mt(e,r){return(r-=e=+e)?function(n){return(n-e)/r}:hi(isNaN(r)?NaN:.5)}function pi(e,r){var n;return e>r&&(n=e,e=r,r=n),function(i){return Math.max(e,Math.min(r,i))}}function gi(e,r,n){var i=e[0],a=e[1],l=r[0],s=r[1];return a<i?(i=Mt(a,i),l=n(s,l)):(i=Mt(i,a),l=n(l,s)),function(d){return l(i(d))}}function vi(e,r,n){var i=Math.min(e.length,r.length)-1,a=new Array(i),l=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++s<i;)a[s]=Mt(e[s],e[s+1]),l[s]=n(r[s],r[s+1]);return function(d){var c=Ar(e,d,1,i)-1;return l[c](a[c](d))}}function yi(e,r){return r.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function bi(){var e=nn,r=nn,n=Pt,i,a,l,s=He,d,c,f;function m(){var o=Math.min(e.length,r.length);return s!==He&&(s=pi(e[0],e[o-1])),d=o>2?vi:gi,c=f=null,t}function t(o){return o==null||isNaN(o=+o)?l:(c||(c=d(e.map(i),r,n)))(i(s(o)))}return t.invert=function(o){return s(a((f||(f=d(r,e.map(i),ot)))(o)))},t.domain=function(o){return arguments.length?(e=Array.from(o,mi),m()):e.slice()},t.range=function(o){return arguments.length?(r=Array.from(o),m()):r.slice()},t.rangeRound=function(o){return r=Array.from(o),n=Ur,m()},t.clamp=function(o){return arguments.length?(s=o?!0:He,m()):s!==He},t.interpolate=function(o){return arguments.length?(n=o,m()):n},t.unknown=function(o){return arguments.length?(l=o,t):l},function(o,u){return i=o,a=u,m()}}function wi(){return bi()(He,He)}function Ai(e,r,n,i){var a=Ir(e,r,n),l;switch(i=st(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(r));return i.precision==null&&!isNaN(l=ci(a,s))&&(i.precision=l),Rn(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(l=di(a,Math.max(Math.abs(e),Math.abs(r))))&&(i.precision=l-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(l=fi(a))&&(i.precision=l-(i.type==="%")*2);break}}return ut(i)}function ki(e){var r=e.domain;return e.ticks=function(n){var i=r();return Sr(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var a=r();return Ai(a[0],a[a.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=r(),a=0,l=i.length-1,s=i[a],d=i[l],c,f,m=10;for(d<s&&(f=s,s=d,d=f,f=a,a=l,l=f);m-- >0;){if(f=wt(s,d,n),f===c)return i[a]=s,i[l]=d,r(i);if(f>0)s=Math.floor(s/f)*f,d=Math.ceil(d/f)*f;else if(f<0)s=Math.ceil(s*f)/f,d=Math.floor(d*f)/f;else break;c=f}return e},e}function Ot(){var e=wi();return e.copy=function(){return yi(e,Ot())},_i.apply(e,arguments),ki(e)}function ve(e){return function(){return e}}const rn=Math.abs,J=Math.atan2,ke=Math.cos,Ti=Math.max,gt=Math.min,fe=Math.sin,Fe=Math.sqrt,ie=1e-12,Qe=Math.PI,ft=Qe/2,xi=2*Qe;function Mi(e){return e>1?0:e<-1?Qe:Math.acos(e)}function an(e){return e>=1?ft:e<=-1?-ft:Math.asin(e)}function Si(e){let r=3;return e.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);r=i}return e},()=>new ti(r)}function Ii(e){return e.innerRadius}function Ei(e){return e.outerRadius}function Pi(e){return e.startAngle}function Ni(e){return e.endAngle}function Oi(e){return e&&e.padAngle}function Ri(e,r,n,i,a,l,s,d){var c=n-e,f=i-r,m=s-a,t=d-l,o=t*c-m*f;if(!(o*o<ie))return o=(m*(r-l)-t*(e-a))/o,[e+o*c,r+o*f]}function Ue(e,r,n,i,a,l,s){var d=e-n,c=r-i,f=(s?l:-l)/Fe(d*d+c*c),m=f*c,t=-f*d,o=e+m,u=r+t,_=n+m,g=i+t,v=(o+_)/2,h=(u+g)/2,p=_-o,w=g-u,S=p*p+w*w,I=a-l,E=o*g-_*u,$=(w<0?-1:1)*Fe(Ti(0,I*I*S-E*E)),B=(E*w-p*$)/S,P=(-E*p-w*$)/S,q=(E*w+p*$)/S,M=(-E*p+w*$)/S,R=B-v,b=P-h,k=q-v,O=M-h;return R*R+b*b>k*k+O*O&&(B=q,P=M),{cx:B,cy:P,x01:-m,y01:-t,x11:B*(a/I-1),y11:P*(a/I-1)}}function Hi(){var e=Ii,r=Ei,n=ve(0),i=null,a=Pi,l=Ni,s=Oi,d=null,c=Si(f);function f(){var m,t,o=+e.apply(this,arguments),u=+r.apply(this,arguments),_=a.apply(this,arguments)-ft,g=l.apply(this,arguments)-ft,v=rn(g-_),h=g>_;if(d||(d=m=c()),u<o&&(t=u,u=o,o=t),!(u>ie))d.moveTo(0,0);else if(v>xi-ie)d.moveTo(u*ke(_),u*fe(_)),d.arc(0,0,u,_,g,!h),o>ie&&(d.moveTo(o*ke(g),o*fe(g)),d.arc(0,0,o,g,_,h));else{var p=_,w=g,S=_,I=g,E=v,$=v,B=s.apply(this,arguments)/2,P=B>ie&&(i?+i.apply(this,arguments):Fe(o*o+u*u)),q=gt(rn(u-o)/2,+n.apply(this,arguments)),M=q,R=q,b,k;if(P>ie){var O=an(P/o*fe(B)),H=an(P/u*fe(B));(E-=O*2)>ie?(O*=h?1:-1,S+=O,I-=O):(E=0,S=I=(_+g)/2),($-=H*2)>ie?(H*=h?1:-1,p+=H,w-=H):($=0,p=w=(_+g)/2)}var T=u*ke(p),C=u*fe(p),W=o*ke(I),ne=o*fe(I);if(q>ie){var re=u*ke(w),Oe=u*fe(w),Re=o*ke(S),Ce=o*fe(S),le;if(v<Qe)if(le=Ri(T,C,Re,Ce,re,Oe,W,ne)){var x=T-le[0],G=C-le[1],_e=re-le[0],he=Oe-le[1],Ge=1/fe(Mi((x*_e+G*he)/(Fe(x*x+G*G)*Fe(_e*_e+he*he)))/2),qe=Fe(le[0]*le[0]+le[1]*le[1]);M=gt(q,(o-qe)/(Ge-1)),R=gt(q,(u-qe)/(Ge+1))}else M=R=0}$>ie?R>ie?(b=Ue(Re,Ce,T,C,u,R,h),k=Ue(re,Oe,W,ne,u,R,h),d.moveTo(b.cx+b.x01,b.cy+b.y01),R<q?d.arc(b.cx,b.cy,R,J(b.y01,b.x01),J(k.y01,k.x01),!h):(d.arc(b.cx,b.cy,R,J(b.y01,b.x01),J(b.y11,b.x11),!h),d.arc(0,0,u,J(b.cy+b.y11,b.cx+b.x11),J(k.cy+k.y11,k.cx+k.x11),!h),d.arc(k.cx,k.cy,R,J(k.y11,k.x11),J(k.y01,k.x01),!h))):(d.moveTo(T,C),d.arc(0,0,u,p,w,!h)):d.moveTo(T,C),!(o>ie)||!(E>ie)?d.lineTo(W,ne):M>ie?(b=Ue(W,ne,re,Oe,o,-M,h),k=Ue(T,C,Re,Ce,o,-M,h),d.lineTo(b.cx+b.x01,b.cy+b.y01),M<q?d.arc(b.cx,b.cy,M,J(b.y01,b.x01),J(k.y01,k.x01),!h):(d.arc(b.cx,b.cy,M,J(b.y01,b.x01),J(b.y11,b.x11),!h),d.arc(0,0,o,J(b.cy+b.y11,b.cx+b.x11),J(k.cy+k.y11,k.cx+k.x11),h),d.arc(k.cx,k.cy,M,J(k.y11,k.x11),J(k.y01,k.x01),!h))):d.arc(0,0,o,I,S,h)}if(d.closePath(),m)return d=null,m+""||null}return f.centroid=function(){var m=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +l.apply(this,arguments))/2-Qe/2;return[ke(t)*m,fe(t)*m]},f.innerRadius=function(m){return arguments.length?(e=typeof m=="function"?m:ve(+m),f):e},f.outerRadius=function(m){return arguments.length?(r=typeof m=="function"?m:ve(+m),f):r},f.cornerRadius=function(m){return arguments.length?(n=typeof m=="function"?m:ve(+m),f):n},f.padRadius=function(m){return arguments.length?(i=m==null?null:typeof m=="function"?m:ve(+m),f):i},f.startAngle=function(m){return arguments.length?(a=typeof m=="function"?m:ve(+m),f):a},f.endAngle=function(m){return arguments.length?(l=typeof m=="function"?m:ve(+m),f):l},f.padAngle=function(m){return arguments.length?(s=typeof m=="function"?m:ve(+m),f):s},f.context=function(m){return arguments.length?(d=m??null,f):d},f}function on(e){let r,n=e[2][0]+"",i,a,l,s=e[2][1]+"",d;return{c(){r=D("span"),i=X(n),a=Z(),l=D("span"),d=X(s),this.h()},l(c){r=L(c,"SPAN",{class:!0});var f=j(r);i=Q(f,n),f.forEach(A),a=Y(c),l=L(c,"SPAN",{class:!0});var m=j(l);d=Q(m,s),m.forEach(A),this.h()},h(){y(r,"class","svelte-157h5as"),y(l,"class","svelte-157h5as")},m(c,f){F(c,r,f),N(r,i),F(c,a,f),F(c,l,f),N(l,d)},p(c,f){f&4&&n!==(n=c[2][0]+"")&&Ae(i,n),f&4&&s!==(s=c[2][1]+"")&&Ae(d,s)},d(c){c&&A(r),c&&A(a),c&&A(l)}}}function Fi(e){let r,n,i,a,l,s,d,c,f=e[1]==="inner"&&on(e);return{c(){r=D("div"),n=D("span"),i=X(e[0]),a=Z(),l=D("button"),f&&f.c(),this.h()},l(m){r=L(m,"DIV",{class:!0});var t=j(r);n=L(t,"SPAN",{class:!0,id:!0});var o=j(n);i=Q(o,e[0]),o.forEach(A),a=Y(t),l=L(t,"BUTTON",{role:!0,"aria-checked":!0,"aria-labelledby":!0,class:!0});var u=j(l);f&&f.l(u),u.forEach(A),t.forEach(A),this.h()},h(){y(n,"class","label svelte-157h5as"),y(n,"id",e[4]),y(l,"role","switch"),y(l,"aria-checked",e[3]),y(l,"aria-labelledby",e[4]),y(l,"class","svelte-157h5as"),y(r,"class",s="toggle toggle--"+e[1]+" svelte-157h5as")},m(m,t){F(m,r,t),N(r,n),N(n,i),N(r,a),N(r,l),f&&f.m(l,null),d||(c=je(l,"click",e[5]),d=!0)},p(m,[t]){t&1&&Ae(i,m[0]),m[1]==="inner"?f?f.p(m,t):(f=on(m),f.c(),f.m(l,null)):f&&(f.d(1),f=null),t&8&&y(l,"aria-checked",m[3]),t&2&&s!==(s="toggle toggle--"+m[1]+" svelte-157h5as")&&y(r,"class",s)},i:ue,o:ue,d(m){m&&A(r),f&&f.d(),d=!1,c()}}}function $i(e,r,n){let{label:i}=r,{style:a="inner"}=r,{options:l=["on","off"]}=r,{value:s=l[0]}=r,d=s===l[0];const c=`toggle-${Math.floor(Math.random()*1e6)}`,f=m=>{const o=m.target.getAttribute("aria-checked");n(3,d=o!=="true"),n(6,s=d?l[0]:l[1])};return e.$$set=m=>{"label"in m&&n(0,i=m.label),"style"in m&&n(1,a=m.style),"options"in m&&n(2,l=m.options),"value"in m&&n(6,s=m.value)},[i,a,l,d,c,f,s]}class $e extends pe{constructor(r){super(),ge(this,r,$i,Fi,de,{label:0,style:1,options:2,value:6})}}function ln(e,r,n){const i=e.slice();return i[26]=r[n],i[28]=n,i}function sn(e,r,n){const i=e.slice();return i[28]=r[n],i}function un(e,r,n){const i=e.slice();return i[28]=r[n],i}function fn(e){let r,n;return{c(){r=ye("path"),this.h()},l(i){r=be(i,"path",{fill:!0,d:!0}),j(r).forEach(A),this.h()},h(){y(r,"fill","gold"),y(r,"d",n=e[7]()),St(r,"transform","translate(50%, 50%)")},m(i,a){F(i,r,a)},p(i,a){a[0]&128&&n!==(n=i[7]())&&y(r,"d",n)},d(i){i&&A(r)}}}function cn(e){let r,n=Ne(0,1,1/e[2]),i=[];for(let a=0;a<n.length;a+=1)i[a]=dn(un(e,n,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();r=ae()},l(a){for(let l=0;l<i.length;l+=1)i[l].l(a);r=ae()},m(a,l){for(let s=0;s<i.length;s+=1)i[s].m(a,l);F(a,r,l)},p(a,l){if(l[0]&8484){n=Ne(0,1,1/a[2]);let s;for(s=0;s<n.length;s+=1){const d=un(a,n,s);i[s]?i[s].p(d,l):(i[s]=dn(d),i[s].c(),i[s].m(r.parentNode,r))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(a){Be(i,a),a&&A(r)}}}function dn(e){let r,n,i,a;return{c(){r=ye("line"),this.h()},l(l){r=be(l,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),j(r).forEach(A),this.h()},h(){y(r,"x1",n=e[8].width/2),y(r,"y1",we/2),y(r,"x2",i=e[8].width/2+e[13]*Math.cos(e[5](e[28]))),y(r,"y2",a=we/2+e[13]*Math.sin(e[5](e[28]))),y(r,"class","svelte-1vphjdi")},m(l,s){F(l,r,s)},p(l,s){s[0]&256&&n!==(n=l[8].width/2)&&y(r,"x1",n),s[0]&292&&i!==(i=l[8].width/2+l[13]*Math.cos(l[5](l[28])))&&y(r,"x2",i),s[0]&36&&a!==(a=we/2+l[13]*Math.sin(l[5](l[28])))&&y(r,"y2",a)},d(l){l&&A(r)}}}function _n(e){let r,n=Ne(0,e[1],.25),i=[];for(let a=0;a<n.length;a+=1)i[a]=hn(sn(e,n,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();r=ae()},l(a){for(let l=0;l<i.length;l+=1)i[l].l(a);r=ae()},m(a,l){for(let s=0;s<i.length;s+=1)i[s].m(a,l);F(a,r,l)},p(a,l){if(l[0]&8482){n=Ne(0,a[1],.25);let s;for(s=0;s<n.length;s+=1){const d=sn(a,n,s);i[s]?i[s].p(d,l):(i[s]=hn(d),i[s].c(),i[s].m(r.parentNode,r))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(a){Be(i,a),a&&A(r)}}}function hn(e){let r,n,i,a;return{c(){r=ye("line"),this.h()},l(l){r=be(l,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),j(r).forEach(A),this.h()},h(){y(r,"x1",n=e[8].width/2),y(r,"y1",we/2),y(r,"x2",i=e[8].width/2+e[13]*Math.cos(e[5](e[28]))),y(r,"y2",a=we/2+e[13]*Math.sin(e[5](e[28]))),y(r,"class","svelte-1vphjdi")},m(l,s){F(l,r,s)},p(l,s){s[0]&256&&n!==(n=l[8].width/2)&&y(r,"x1",n),s[0]&290&&i!==(i=l[8].width/2+l[13]*Math.cos(l[5](l[28])))&&y(r,"x2",i),s[0]&34&&a!==(a=we/2+l[13]*Math.sin(l[5](l[28])))&&y(r,"y2",a)},d(l){l&&A(r)}}}function mn(e){let r,n;return r=new Un({props:{id:e[26],i:e[28],data:e[0][e[26]]}}),{c(){U(r.$$.fragment)},l(i){z(r.$$.fragment,i)},m(i,a){ee(r,i,a),n=!0},p(i,a){const l={};a[0]&1&&(l.id=i[26]),a[0]&1&&(l.data=i[0][i[26]]),r.$set(l)},i(i){n||(V(r.$$.fragment,i),n=!0)},o(i){K(r.$$.fragment,i),n=!1},d(i){te(r,i)}}}function pn(e){let r,n,i=Object.keys(e[0]),a=[];for(let s=0;s<i.length;s+=1)a[s]=mn(ln(e,i,s));const l=s=>K(a[s],1,1,()=>{a[s]=null});return{c(){for(let s=0;s<a.length;s+=1)a[s].c();r=ae()},l(s){for(let d=0;d<a.length;d+=1)a[d].l(s);r=ae()},m(s,d){for(let c=0;c<a.length;c+=1)a[c].m(s,d);F(s,r,d),n=!0},p(s,d){if(d[0]&1){i=Object.keys(s[0]);let c;for(c=0;c<i.length;c+=1){const f=ln(s,i,c);a[c]?(a[c].p(f,d),V(a[c],1)):(a[c]=mn(f),a[c].c(),V(a[c],1),a[c].m(r.parentNode,r))}for(ct(),c=i.length;c<a.length;c+=1)l(c);dt()}},i(s){if(!n){for(let d=0;d<i.length;d+=1)V(a[d]);n=!0}},o(s){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)K(a[d]);n=!1},d(s){Be(a,s),s&&A(r)}}}function Di(e){let r,n,i,a,l,s,d,c=e[0],f,m,t,o,u,_,g,v,h,p,w,S,I,E,$,B,P,q,M,R,b,k=e[3]==="on"&&fn(e),O=e[4]==="on"&&cn(e),H=e[6]==="on"&&_n(e),T=pn(e);function C(x){e[20](x)}let W={label:"Show grid",style:"inner"};e[6]!==void 0&&(W.value=e[6]),v=new $e({props:W}),xe.push(()=>Me(v,"value",C));function ne(x){e[21](x)}let re={label:"Hi-hat",style:"inner"};e[10].hihat!==void 0&&(re.value=e[10].hihat),w=new $e({props:re}),xe.push(()=>Me(w,"value",ne));function Oe(x){e[22](x)}let Re={label:"Kick",style:"inner"};e[10].kick!==void 0&&(Re.value=e[10].kick),E=new $e({props:Re}),xe.push(()=>Me(E,"value",Oe));function Ce(x){e[23](x)}let le={label:"Snare",style:"inner"};return e[10].snare!==void 0&&(le.value=e[10].snare),P=new $e({props:le}),xe.push(()=>Me(P,"value",Ce)),{c(){r=ye("svg"),n=ye("circle"),k&&k.c(),i=ae(),O&&O.c(),a=ae(),H&&H.c(),l=ye("line"),T.c(),f=Z(),m=D("button"),t=X("play"),o=Z(),u=D("button"),_=X("pause"),g=Z(),U(v.$$.fragment),p=Z(),U(w.$$.fragment),I=Z(),U(E.$$.fragment),B=Z(),U(P.$$.fragment),this.h()},l(x){r=be(x,"svg",{width:!0,height:!0,class:!0});var G=j(r);n=be(G,"circle",{id:!0,r:!0,cx:!0,cy:!0,class:!0}),j(n).forEach(A),k&&k.l(G),i=ae(),O&&O.l(G),a=ae(),H&&H.l(G),l=be(G,"line",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),j(l).forEach(A),T.l(G),G.forEach(A),f=Y(x),m=L(x,"BUTTON",{});var _e=j(m);t=Q(_e,"play"),_e.forEach(A),o=Y(x),u=L(x,"BUTTON",{});var he=j(u);_=Q(he,"pause"),he.forEach(A),g=Y(x),z(v.$$.fragment,x),p=Y(x),z(w.$$.fragment,x),I=Y(x),z(E.$$.fragment,x),B=Y(x),z(P.$$.fragment,x),this.h()},h(){y(n,"id","outer"),y(n,"r",e[13]),y(n,"cx","50%"),y(n,"cy","50%"),y(n,"class","svelte-1vphjdi"),y(l,"id","marker"),y(l,"x1",0),y(l,"y1",0),y(l,"x2",s=e[14](e[5](e[9]))),y(l,"y2",d=e[15](e[5](e[9]))),y(l,"class","svelte-1vphjdi"),St(l,"transform","translate(50%, 50%)"),y(r,"width","100%"),y(r,"height",we),y(r,"class","svelte-1vphjdi")},m(x,G){F(x,r,G),N(r,n),k&&k.m(r,null),N(r,i),O&&O.m(r,null),N(r,a),H&&H.m(r,null),N(r,l),T.m(r,null),F(x,f,G),F(x,m,G),N(m,t),F(x,o,G),F(x,u,G),N(u,_),F(x,g,G),ee(v,x,G),F(x,p,G),ee(w,x,G),F(x,I,G),ee(E,x,G),F(x,B,G),ee(P,x,G),M=!0,R||(b=[je(m,"click",e[17]),je(u,"click",e[16])],R=!0)},p(x,G){x[3]==="on"?k?k.p(x,G):(k=fn(x),k.c(),k.m(r,i)):k&&(k.d(1),k=null),x[4]==="on"?O?O.p(x,G):(O=cn(x),O.c(),O.m(r,a)):O&&(O.d(1),O=null),x[6]==="on"?H?H.p(x,G):(H=_n(x),H.c(),H.m(r,l)):H&&(H.d(1),H=null),(!M||G[0]&544&&s!==(s=x[14](x[5](x[9]))))&&y(l,"x2",s),(!M||G[0]&544&&d!==(d=x[15](x[5](x[9]))))&&y(l,"y2",d),G[0]&1&&de(c,c=x[0])?(ct(),K(T,1,1,ue),dt(),T=pn(x),T.c(),V(T,1),T.m(r,null)):T.p(x,G);const _e={};!h&&G[0]&64&&(h=!0,_e.value=x[6],Se(()=>h=!1)),v.$set(_e);const he={};!S&&G[0]&1024&&(S=!0,he.value=x[10].hihat,Se(()=>S=!1)),w.$set(he);const Ge={};!$&&G[0]&1024&&($=!0,Ge.value=x[10].kick,Se(()=>$=!1)),E.$set(Ge);const qe={};!q&&G[0]&1024&&(q=!0,qe.value=x[10].snare,Se(()=>q=!1)),P.$set(qe)},i(x){M||(V(T),V(v.$$.fragment,x),V(w.$$.fragment,x),V(E.$$.fragment,x),V(P.$$.fragment,x),M=!0)},o(x){K(T),K(v.$$.fragment,x),K(w.$$.fragment,x),K(E.$$.fragment,x),K(P.$$.fragment,x),M=!1},d(x){x&&A(r),k&&k.d(),O&&O.d(),H&&H.d(),T.d(x),x&&A(f),x&&A(m),x&&A(o),x&&A(u),x&&A(g),te(v,x),x&&A(p),te(w,x),x&&A(I),te(E,x),x&&A(B),te(P,x),R=!1,Tn(b)}}}const we=500,gn=0;function Li(e,r,n){let i,a,l,s,d,c,f;Ee(e,gr,b=>n(8,d=b));let{data:m}=r,{beatsPerRotation:t}=r,{division:o}=r,{bpm:u}=r,{showPercentage:_}=r,{showDivisions:g}=r;vt("song",{beatsPerRotation:t,division:o,getT:()=>w,getAngleScale:()=>s,getInstrumentToggles:()=>h,getCycleDuration:()=>l});let v;const h=xn({hihat:"on",snare:"on",kick:"on"});Ee(e,h,b=>n(10,f=b));let p="off";const w=Mn(0);Ee(e,w,b=>n(9,c=b));const S=we/2-100,I=b=>S*Math.cos(b),E=b=>S*Math.sin(b),$=()=>{clearInterval(v),w.set(i,{duration:0})},B=()=>{w.set(gn,{duration:0}),w.set(i,{duration:l}),v=setInterval(()=>{w.set(gn,{duration:0}),w.set(i,{duration:l})},l)};Ln(()=>{clearInterval(v)});function P(b){p=b,n(6,p)}function q(b){e.$$.not_equal(f.hihat,b)&&(f.hihat=b,h.set(f))}function M(b){e.$$.not_equal(f.kick,b)&&(f.kick=b,h.set(f))}function R(b){e.$$.not_equal(f.snare,b)&&(f.snare=b,h.set(f))}return e.$$set=b=>{"data"in b&&n(0,m=b.data),"beatsPerRotation"in b&&n(1,t=b.beatsPerRotation),"division"in b&&n(2,o=b.division),"bpm"in b&&n(18,u=b.bpm),"showPercentage"in b&&n(3,_=b.showPercentage),"showDivisions"in b&&n(4,g=b.showDivisions)},e.$$.update=()=>{e.$$.dirty[0]&2&&n(19,i=t),e.$$.dirty[0]&524288&&n(5,s=Ot().domain([0,i]).range([-Math.PI/2,3/2*Math.PI])),e.$$.dirty[0]&33&&n(7,a=Hi().innerRadius(0).outerRadius(S).startAngle(s(m.hihat[0])+Math.PI/2).endAngle(s(m.hihat[1])+Math.PI/2)),e.$$.dirty[0]&262146&&(l=6e4*t/u)},[m,t,o,_,g,s,p,a,d,c,f,h,w,S,I,E,$,B,u,i,P,q,M,R]}class tt extends pe{constructor(r){super(),ge(this,r,Li,Di,de,{data:0,beatsPerRotation:1,division:2,bpm:18,showPercentage:3,showDivisions:4},null,[-1,-1])}}function vn(e,r,n){const i=e.slice();return i[10]=r[n],i}function yn(e){let r,n=ut(`.${e[6]}f`)(e[10])+"",i;return{c(){r=D("span"),i=X(n),this.h()},l(a){r=L(a,"SPAN",{class:!0});var l=j(r);i=Q(l,n),l.forEach(A),this.h()},h(){y(r,"class","tick svelte-q7ecsm")},m(a,l){F(a,r,l),N(r,i)},p(a,l){l&65&&n!==(n=ut(`.${a[6]}f`)(a[10])+"")&&Ae(i,n)},d(a){a&&A(r)}}}function Bi(e){let r,n,i,a,l,s,d=e[0],c=[];for(let f=0;f<d.length;f+=1)c[f]=yn(vn(e,d,f));return{c(){r=D("div"),n=D("div");for(let f=0;f<c.length;f+=1)c[f].c();i=Z(),a=D("input"),this.h()},l(f){r=L(f,"DIV",{class:!0});var m=j(r);n=L(m,"DIV",{class:!0});var t=j(n);for(let o=0;o<c.length;o+=1)c[o].l(t);t.forEach(A),i=Y(m),a=L(m,"INPUT",{type:!0,"aria-label":!0,min:!0,max:!0,step:!0,class:!0}),m.forEach(A),this.h()},h(){y(n,"class","ticks svelte-q7ecsm"),y(a,"type","range"),y(a,"aria-label",e[5]),y(a,"min",e[2]),y(a,"max",e[3]),y(a,"step",e[4]),y(a,"class","svelte-q7ecsm"),y(r,"class","range svelte-q7ecsm")},m(f,m){F(f,r,m),N(r,n);for(let t=0;t<c.length;t+=1)c[t].m(n,null);N(r,i),N(r,a),Ht(a,e[1]),l||(s=[je(a,"change",e[8]),je(a,"input",e[8])],l=!0)},p(f,[m]){if(m&65){d=f[0];let t;for(t=0;t<d.length;t+=1){const o=vn(f,d,t);c[t]?c[t].p(o,m):(c[t]=yn(o),c[t].c(),c[t].m(n,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=d.length}m&32&&y(a,"aria-label",f[5]),m&4&&y(a,"min",f[2]),m&8&&y(a,"max",f[3]),m&16&&y(a,"step",f[4]),m&2&&Ht(a,f[1])},i:ue,o:ue,d(f){f&&A(r),Be(c,f),l=!1,Tn(s)}}}function Ci(e,r,n){let i,{min:a=0}=r,{max:l=100}=r,{step:s=1}=r,{showTicks:d=!1}=r,{value:c=a}=r,{label:f=""}=r,{ticks:m}=r;const t=u=>Math.floor(u)===u?0:u.toString().split(".")[1].length||0;function o(){c=Bn(this.value),n(1,c)}return e.$$set=u=>{"min"in u&&n(2,a=u.min),"max"in u&&n(3,l=u.max),"step"in u&&n(4,s=u.step),"showTicks"in u&&n(7,d=u.showTicks),"value"in u&&n(1,c=u.value),"label"in u&&n(5,f=u.label),"ticks"in u&&n(0,m=u.ticks)},e.$$.update=()=>{e.$$.dirty&16&&n(6,i=t(s)),e.$$.dirty&157&&n(0,m=m||(d?Ne(a,l+s,s):[]))},[m,c,a,l,s,f,i,d,o]}class Gi extends pe{constructor(r){super(),ge(this,r,Ci,Bi,de,{min:2,max:3,step:4,showTicks:7,value:1,label:5,ticks:0})}}function qi(e){let r,n,i,a,l;return{c(){r=D("p"),n=X("This rhythm is "),i=D("strong"),a=X("swung"),l=X(`. Swing means that there's a long-short
		pattern, so the first note takes up more space than the second.`)},l(s){r=L(s,"P",{});var d=j(r);n=Q(d,"This rhythm is "),i=L(d,"STRONG",{});var c=j(i);a=Q(c,"swung"),c.forEach(A),l=Q(d,`. Swing means that there's a long-short
		pattern, so the first note takes up more space than the second.`),d.forEach(A)},m(s,d){F(s,r,d),N(r,n),N(r,i),N(i,a),N(r,l)},d(s){s&&A(r)}}}function ji(e){let r,n,i,a,l;return{c(){r=D("p"),n=X("This rhythm is completely "),i=D("strong"),a=X("straight"),l=X(`. Each beat is equally
		spaced apart.`)},l(s){r=L(s,"P",{});var d=j(r);n=Q(d,"This rhythm is completely "),i=L(d,"STRONG",{});var c=j(i);a=Q(c,"straight"),c.forEach(A),l=Q(d,`. Each beat is equally
		spaced apart.`),d.forEach(A)},m(s,d){F(s,r,d),N(r,n),N(r,i),N(i,a),N(r,l)},d(s){s&&A(r)}}}function bn(e){let r,n,i,a=e[3][e[0]]+"",l,s,d,c=e[5][e[0]]+"",f,m,t,o,u,_;function g(h){e[8](h)}let v={label:"Show divisions",style:"inner"};return e[2]!==void 0&&(v.value=e[2]),o=new $e({props:v}),xe.push(()=>Me(o,"value",g)),{c(){r=D("p"),n=X("It's called a "),i=D("strong"),l=X(a),s=X(" swing"),d=X(` because the beat is
		divided into `),f=X(c),m=X(` parts. Since we're dividing the beat into an
		odd number of parts, it will be uneven and have this slightly off-kilter feeling.`),t=Z(),U(o.$$.fragment)},l(h){r=L(h,"P",{});var p=j(r);n=Q(p,"It's called a "),i=L(p,"STRONG",{});var w=j(i);l=Q(w,a),s=Q(w," swing"),w.forEach(A),d=Q(p,` because the beat is
		divided into `),f=Q(p,c),m=Q(p,` parts. Since we're dividing the beat into an
		odd number of parts, it will be uneven and have this slightly off-kilter feeling.`),p.forEach(A),t=Y(h),z(o.$$.fragment,h)},m(h,p){F(h,r,p),N(r,n),N(r,i),N(i,l),N(i,s),N(r,d),N(r,f),N(r,m),F(h,t,p),ee(o,h,p),_=!0},p(h,p){(!_||p&1)&&a!==(a=h[3][h[0]]+"")&&Ae(l,a),(!_||p&1)&&c!==(c=h[5][h[0]]+"")&&Ae(f,c);const w={};!u&&p&4&&(u=!0,w.value=h[2],Se(()=>u=!1)),o.$set(w)},i(h){_||(V(o.$$.fragment,h),_=!0)},o(h){K(o.$$.fragment,h),_=!1},d(h){h&&A(r),h&&A(t),te(o,h)}}}function Vi(e){let r,n,i,a=e[3][e[0]]+"",l,s,d,c,f,m,t,o,u,_,g=(e[4][e[0]].hihat[1]*100).toFixed(1)+"",v,h,p,w,S,I,E,$,B;r=new tt({props:{data:e[4][e[0]],beatsPerRotation:1,division:e[5][e[0]],bpm:60,showPercentage:e[1],showDivisions:e[2]}});function P(T){e[6](T)}let q={min:0,max:e[3].length-1,step:1,showTicks:!0,ticks:[50,57,60,66]};e[0]!==void 0&&(q.value=e[0]),c=new Gi({props:q}),xe.push(()=>Me(c,"value",P));function M(T,C){return T[0]===0?ji:qi}let R=M(e),b=R(e);function k(T){e[7](T)}let O={label:"Show percentage",style:"inner"};e[1]!==void 0&&(O.value=e[1]),S=new $e({props:O}),xe.push(()=>Me(S,"value",k));let H=e[0]!==0&&bn(e);return{c(){U(r.$$.fragment),n=Z(),i=D("h2"),l=X(a),s=Z(),d=D("div"),U(c.$$.fragment),m=Z(),b.c(),t=Z(),o=D("p"),u=X("In this case, the first beat takes up "),_=D("strong"),v=X(g),h=X("%"),p=X(" of the beat."),w=Z(),U(S.$$.fragment),E=Z(),H&&H.c(),$=ae(),this.h()},l(T){z(r.$$.fragment,T),n=Y(T),i=L(T,"H2",{});var C=j(i);l=Q(C,a),C.forEach(A),s=Y(T),d=L(T,"DIV",{style:!0});var W=j(d);z(c.$$.fragment,W),W.forEach(A),m=Y(T),b.l(T),t=Y(T),o=L(T,"P",{});var ne=j(o);u=Q(ne,"In this case, the first beat takes up "),_=L(ne,"STRONG",{});var re=j(_);v=Q(re,g),h=Q(re,"%"),re.forEach(A),p=Q(ne," of the beat."),ne.forEach(A),w=Y(T),z(S.$$.fragment,T),E=Y(T),H&&H.l(T),$=ae(),this.h()},h(){St(d,"width","50%")},m(T,C){ee(r,T,C),F(T,n,C),F(T,i,C),N(i,l),F(T,s,C),F(T,d,C),ee(c,d,null),F(T,m,C),b.m(T,C),F(T,t,C),F(T,o,C),N(o,u),N(o,_),N(_,v),N(_,h),N(o,p),F(T,w,C),ee(S,T,C),F(T,E,C),H&&H.m(T,C),F(T,$,C),B=!0},p(T,[C]){const W={};C&1&&(W.data=T[4][T[0]]),C&1&&(W.division=T[5][T[0]]),C&2&&(W.showPercentage=T[1]),C&4&&(W.showDivisions=T[2]),r.$set(W),(!B||C&1)&&a!==(a=T[3][T[0]]+"")&&Ae(l,a);const ne={};!f&&C&1&&(f=!0,ne.value=T[0],Se(()=>f=!1)),c.$set(ne),R!==(R=M(T))&&(b.d(1),b=R(T),b&&(b.c(),b.m(t.parentNode,t))),(!B||C&1)&&g!==(g=(T[4][T[0]].hihat[1]*100).toFixed(1)+"")&&Ae(v,g);const re={};!I&&C&2&&(I=!0,re.value=T[1],Se(()=>I=!1)),S.$set(re),T[0]!==0?H?(H.p(T,C),C&1&&V(H,1)):(H=bn(T),H.c(),V(H,1),H.m($.parentNode,$)):H&&(ct(),K(H,1,1,()=>{H=null}),dt())},i(T){B||(V(r.$$.fragment,T),V(c.$$.fragment,T),V(S.$$.fragment,T),V(H),B=!0)},o(T){K(r.$$.fragment,T),K(c.$$.fragment,T),K(S.$$.fragment,T),K(H),B=!1},d(T){te(r,T),T&&A(n),T&&A(i),T&&A(s),T&&A(d),te(c),T&&A(m),b.d(T),T&&A(t),T&&A(o),T&&A(w),te(S,T),T&&A(E),H&&H.d(T),T&&A($)}}}function Wi(e,r,n){let i=0,a=["straight","septuplet swing","quintuplet swing","triplet swing"],l=!1,s=!1;const d=h=>[0,h],c={hihat:d(.5)},f={hihat:d(2/3)},m={hihat:d(3/5)},t={hihat:d(4/7)},o=[c,t,m,f],u=[2,7,5,3];function _(h){i=h,n(0,i)}function g(h){l=h,n(1,l)}function v(h){s=h,n(2,s)}return[i,l,s,a,o,u,_,g,v]}class Xi extends pe{constructor(r){super(),ge(this,r,Wi,Vi,de,{})}}const Qi={keySignatures:[{key:"C",scale:"major",ticks:0}],meta:[],name:"Drums",ppq:480,tempos:[{bpm:120,ticks:0},{bpm:120,ticks:1920},{bpm:120,ticks:3840}],timeSignatures:[{ticks:0,timeSignature:[4,4],measures:0}]},Zi=[{channel:0,controlChanges:{},pitchBends:[],instrument:{family:"piano",number:0,name:"acoustic grand piano"},name:"Drums",notes:[{duration:.221875,durationTicks:213,midi:36,name:"C2",ticks:0,time:0,velocity:.7716535433070866},{duration:.10520833333333333,durationTicks:101,midi:42,name:"F#2",ticks:0,time:0,velocity:.7716535433070866},{duration:.06874999999999998,durationTicks:66,midi:42,name:"F#2",ticks:240,time:.25,velocity:.7716535433070866},{duration:.09583333333333333,durationTicks:92,midi:42,name:"F#2",ticks:360,time:.375,velocity:.7716535433070866},{duration:.09166666666666667,durationTicks:88,midi:38,name:"D2",ticks:678,time:.70625,velocity:.7716535433070866},{duration:.10520833333333335,durationTicks:101,midi:42,name:"F#2",ticks:680,time:.7083333333333334,velocity:.7716535433070866},{duration:.06874999999999998,durationTicks:66,midi:42,name:"F#2",ticks:920,time:.9583333333333334,velocity:.7716535433070866},{duration:.09583333333333344,durationTicks:92,midi:42,name:"F#2",ticks:1040,time:1.0833333333333333,velocity:.7716535433070866},{duration:.12291666666666679,durationTicks:118,midi:36,name:"C2",ticks:1280,time:1.3333333333333333,velocity:.7716535433070866},{duration:.10520833333333335,durationTicks:101,midi:42,name:"F#2",ticks:1320,time:1.375,velocity:.7716535433070866},{duration:.06875000000000009,durationTicks:66,midi:42,name:"F#2",ticks:1560,time:1.625,velocity:.7716535433070866},{duration:.09583333333333344,durationTicks:92,midi:42,name:"F#2",ticks:1680,time:1.75,velocity:.7716535433070866},{duration:.10000000000000009,durationTicks:96,midi:38,name:"D2",ticks:1996,time:2.0791666666666666,velocity:.7716535433070866},{duration:.10520833333333313,durationTicks:101,midi:42,name:"F#2",ticks:2e3,time:2.0833333333333335,velocity:.7716535433070866},{duration:.06875000000000009,durationTicks:66,midi:42,name:"F#2",ticks:2240,time:2.3333333333333335,velocity:.7716535433070866},{duration:.09583333333333321,durationTicks:92,midi:42,name:"F#2",ticks:2360,time:2.4583333333333335,velocity:.7716535433070866},{duration:.10000000000000009,durationTicks:96,midi:36,name:"C2",ticks:2708,time:2.8208333333333333,velocity:.7716535433070866},{duration:.10520833333333357,durationTicks:101,midi:42,name:"F#2",ticks:2740,time:2.8541666666666665,velocity:.7716535433070866},{duration:.11875000000000036,durationTicks:114,midi:38,name:"D2",ticks:2945,time:3.067708333333333,velocity:.7716535433070866},{duration:.06875000000000009,durationTicks:66,midi:42,name:"F#2",ticks:3e3,time:3.125,velocity:.7716535433070866},{duration:.09583333333333321,durationTicks:92,midi:42,name:"F#2",ticks:3187,time:3.3197916666666667,velocity:.7716535433070866}],endOfTrackTicks:3840}],wn={header:Qi,tracks:Zi};function Yi(e){let r,n,i,a,l,s,d,c,f,m,t,o,u,_,g,v,h;return a=new tt({props:{data:e[0],beatsPerRotation:4,division:4,bpm:100}}),f=new tt({props:{data:e[1],beatsPerRotation:4,division:5,bpm:100}}),_=new tt({props:{data:e[2],beatsPerRotation:5,division:7,bpm:100}}),v=new Xi({}),{c(){r=D("h3"),n=X("Basic 4/4"),i=Z(),U(a.$$.fragment),l=Z(),s=D("h3"),d=X("Quintuplet swing with a slightly early snare"),c=Z(),U(f.$$.fragment),m=Z(),t=D("h3"),o=X("With the love of my heart - Jacob Collier (lots of weird stuff)"),u=Z(),U(_.$$.fragment),g=Z(),U(v.$$.fragment)},l(p){r=L(p,"H3",{});var w=j(r);n=Q(w,"Basic 4/4"),w.forEach(A),i=Y(p),z(a.$$.fragment,p),l=Y(p),s=L(p,"H3",{});var S=j(s);d=Q(S,"Quintuplet swing with a slightly early snare"),S.forEach(A),c=Y(p),z(f.$$.fragment,p),m=Y(p),t=L(p,"H3",{});var I=j(t);o=Q(I,"With the love of my heart - Jacob Collier (lots of weird stuff)"),I.forEach(A),u=Y(p),z(_.$$.fragment,p),g=Y(p),z(v.$$.fragment,p)},m(p,w){F(p,r,w),N(r,n),F(p,i,w),ee(a,p,w),F(p,l,w),F(p,s,w),N(s,d),F(p,c,w),ee(f,p,w),F(p,m,w),F(p,t,w),N(t,o),F(p,u,w),ee(_,p,w),F(p,g,w),ee(v,p,w),h=!0},p:ue,i(p){h||(V(a.$$.fragment,p),V(f.$$.fragment,p),V(_.$$.fragment,p),V(v.$$.fragment,p),h=!0)},o(p){K(a.$$.fragment,p),K(f.$$.fragment,p),K(_.$$.fragment,p),K(v.$$.fragment,p),h=!1},d(p){p&&A(r),p&&A(i),te(a,p),p&&A(l),p&&A(s),p&&A(c),te(f,p),p&&A(m),p&&A(t),p&&A(u),te(_,p),p&&A(g),te(v,p)}}}function Ki(e){const r=(d,c)=>Ne(c).map(f=>[f,f+d]).flat(),n={hihat:Ne(0,4,.5),snare:[1,3],kick:[0,2]},i={hihat:r(3/5,4),snare:[.95,2.95],kick:[0,2]},a=Ot().domain(kr(wn.tracks[0].notes.map(d=>d.ticks))).range([0,5]),l=wn.tracks[0].notes.map(d=>({beat:a(d.ticks),instrument:d.midi})),s={hihat:l.filter(d=>d.instrument===42).map(d=>d.beat),snare:l.filter(d=>d.instrument===38).map(d=>d.beat),kick:l.filter(d=>d.instrument===36).map(d=>d.beat)};return[n,i,s]}class Ji extends pe{constructor(r){super(),ge(this,r,Ki,Yi,de,{})}}const Ui="The math and the magic of wonky grooves",zi="Visualizing wonky grooves",ea="By <a href=https://pudding.cool/author/michelle-mcghee/ target=_blank>Michelle McGhee</a>",An={hed:Ui,dek:zi,byline:ea};function ta(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.1.0"),console.log("build: 2023-03-06-18:55"),console.log("--- --- --- --- --- ---")}function na(e){let r,n,i,a;return r=new Vn({props:{title:e[1],description:e[2],url:e[3],preloadFont:e[0],keywords:e[4]}}),i=new Ji({}),{c(){U(r.$$.fragment),n=Z(),U(i.$$.fragment)},l(l){z(r.$$.fragment,l),n=Y(l),z(i.$$.fragment,l)},m(l,s){ee(r,l,s),F(l,n,s),ee(i,l,s),a=!0},p:ue,i(l){a||(V(r.$$.fragment,l),V(i.$$.fragment,l),a=!0)},o(l){K(r.$$.fragment,l),K(i.$$.fragment,l),a=!1},d(l){te(r,l),l&&A(n),te(i,l)}}}function ra(e,r,n){let{data:i}=r;ta();const a=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2","https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2"],{title:l,description:s,url:d,keywords:c}=An;return vt("copy",An),vt("data",i.data),e.$$set=f=>{"data"in f&&n(5,i=f.data)},[a,l,s,d,c,i]}class la extends pe{constructor(r){super(),ge(this,r,ra,na,de,{data:5})}}export{la as default};
